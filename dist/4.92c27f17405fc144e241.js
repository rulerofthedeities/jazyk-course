(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"8nS+":function(n,l,e){"use strict";e.d(l,"a",function(){return u});var t=e("CcnG"),u=function(){function n(n){this.elementRef=n,this.disabled=!1,this.text={},this.languageSelected=new t.EventEmitter,this.showDropdown=!1,this.dataReady=!1}return n.prototype.clickout=function(n){this.elementRef.nativeElement.contains(n.target)||(this.showDropdown=!1)},n.prototype.ngOnChanges=function(){this.selectedLanguage=this.currentLanguage,this.dataReady=!0},n.prototype.onToggleDropdown=function(){this.disabled||(this.showDropdown=!this.showDropdown,this.selectedDropdown=this.selectedLanguage.code)},n.prototype.onSelectLanguage=function(n){this.selectedLanguage=n,this.selectedDropdown=n.code,this.showDropdown=!1,this.languageSelected.emit(n)},n.prototype.onHoverLanguage=function(n){this.selectedDropdown=n.code},n}()},"8sTi":function(n,l,e){"use strict";e.d(l,"a",function(){return t});var t=[".btn-dropdown[_ngcontent-%COMP%]{text-align:left;width:100%;cursor:default}.selector[_ngcontent-%COMP%]{position:relative;z-index:10}.dropdown[_ngcontent-%COMP%]{bottom:0;left:0;position:absolute;right:0;top:46px}.flag[_ngcontent-%COMP%]{border:1px solid #999;border-radius:2px;height:20px;margin-right:8px;width:30px}.gravatar[_ngcontent-%COMP%]{border:1px solid #999;border-radius:2px;height:22px;margin-right:8px;width:22px}.caret[_ngcontent-%COMP%]{float:right;margin-top:8px}.list-group-item[_ngcontent-%COMP%]{cursor:pointer;font-size:18px}.disabled[_ngcontent-%COMP%]   .btn-default[_ngcontent-%COMP%]{cursor:default;border:0;background-color:inherit;padding-left:0}.disabled[_ngcontent-%COMP%]   .btn-default[_ngcontent-%COMP%]:hover{background-color:inherit}.disabled[_ngcontent-%COMP%]   .btn-default[_ngcontent-%COMP%]:active{box-shadow:inherit}"]},M6Em:function(n,l,e){"use strict";e.d(l,"a",function(){return o}),e.d(l,"b",function(){return i});var t=e("CcnG"),u=e("Ip0R"),o=(e("rKNO"),t["\u0275crt"]({encapsulation:2,styles:[],data:{}}));function i(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,20,"div",[["class","modal"],["role","dialog"],["tabindex","-1"]],null,null,null,null,null)),t["\u0275did"](1,278528,null,0,u.NgStyle,[t.KeyValueDiffers,t.ElementRef,t.Renderer2],{ngStyle:[0,"ngStyle"]},null),t["\u0275pod"](2,{display:0}),(n()(),t["\u0275eld"](3,0,null,null,17,"div",[["class","modal-dialog"]],null,null,null,null,null)),(n()(),t["\u0275eld"](4,0,null,null,16,"div",[["class","modal-content"]],null,null,null,null,null)),(n()(),t["\u0275eld"](5,0,null,null,5,"div",[["class","modal-header bg-primary"]],null,null,null,null,null)),(n()(),t["\u0275eld"](6,0,null,null,2,"button",[["aria-label","Close"],["class","close"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onModalNo()&&t),t},null,null)),(n()(),t["\u0275eld"](7,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["\xd7"])),(n()(),t["\u0275eld"](9,0,null,null,1,"h4",[["class","modal-title"]],null,null,null,null,null)),t["\u0275ncd"](null,0),(n()(),t["\u0275eld"](11,0,null,null,2,"div",[["class","modal-body"]],null,null,null,null,null)),(n()(),t["\u0275eld"](12,0,null,null,1,"p",[],null,null,null,null,null)),t["\u0275ncd"](null,1),(n()(),t["\u0275eld"](14,0,null,null,6,"div",[["class","modal-footer"]],null,null,null,null,null)),(n()(),t["\u0275eld"](15,0,null,null,3,"button",[["class","btn"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onModalYes()&&t),t},null,null)),t["\u0275did"](16,278528,null,0,u.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pad"](17,1),(n()(),t["\u0275ted"](18,null,[""," "])),(n()(),t["\u0275eld"](19,0,null,null,1,"button",[["class","btn btn-success"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onModalNo()&&t),t},null,null)),(n()(),t["\u0275ted"](20,null,[""," "]))],function(n,l){var e=l.component;n(l,1,0,n(l,2,0,e.showModal?"block":"none")),n(l,16,0,"btn",n(l,17,0,"btn-"+e.level))},function(n,l){var e=l.component;n(l,18,0,e.text.Yes),n(l,20,0,e.text.No)})}},QHbJ:function(n,l,e){"use strict";e.d(l,"a",function(){return i}),e.d(l,"b",function(){return d});var t=e("8sTi"),u=e("CcnG"),o=e("Ip0R"),i=(e("8nS+"),u["\u0275crt"]({encapsulation:0,styles:[t.a],data:{}}));function s(n){return u["\u0275vid"](0,[(n()(),u["\u0275eld"](0,0,null,null,0,"span",[["class","caret"]],null,null,null,null,null))],null,null)}function a(n){return u["\u0275vid"](0,[(n()(),u["\u0275eld"](0,0,null,null,4,"li",[["class","list-group-item"]],null,[[null,"click"],[null,"mouseover"]],function(n,l,e){var t=!0,u=n.component;return"click"===l&&(t=!1!==u.onSelectLanguage(n.context.$implicit)&&t),"mouseover"===l&&(t=!1!==u.onHoverLanguage(n.context.$implicit)&&t),t},null,null)),u["\u0275did"](1,278528,null,0,o.NgClass,[u.IterableDiffers,u.KeyValueDiffers,u.ElementRef,u.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),u["\u0275pod"](2,{active:0}),(n()(),u["\u0275eld"](3,0,null,null,0,"img",[["class","flag"]],[[8,"src",4],[8,"alt",0]],null,null,null,null)),(n()(),u["\u0275ted"](4,null,[""," "]))],function(n,l){n(l,1,0,"list-group-item",n(l,2,0,l.context.$implicit.code===l.component.selectedDropdown))},function(n,l){var e=l.component;n(l,3,0,u["\u0275inlineInterpolate"](1,"/assets/img/flags/",l.context.$implicit.code,".png"),u["\u0275inlineInterpolate"](1,"",e.text[l.context.$implicit.name],"")),n(l,4,0,e.text[l.context.$implicit.name])})}function r(n){return u["\u0275vid"](0,[(n()(),u["\u0275eld"](0,0,null,null,2,"ul",[["class","list-group dropdown"]],null,null,null,null,null)),(n()(),u["\u0275and"](16777216,null,null,1,null,a)),u["\u0275did"](2,802816,null,0,o.NgForOf,[u.ViewContainerRef,u.TemplateRef,u.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,l){n(l,2,0,l.component.languages)},null)}function c(n){return u["\u0275vid"](0,[(n()(),u["\u0275eld"](0,0,null,null,9,"div",[],null,null,null,null,null)),(n()(),u["\u0275eld"](1,0,null,null,8,"div",[["class","selector"]],[[2,"disabled",null]],null,null,null,null)),(n()(),u["\u0275eld"](2,0,null,null,5,"div",[["class","input-group col-xs-12"]],null,null,null,null,null)),(n()(),u["\u0275eld"](3,0,null,null,4,"div",[["class","btn btn-default btn-dropdown btn-lg"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onToggleDropdown()&&t),t},null,null)),(n()(),u["\u0275and"](16777216,null,null,1,null,s)),u["\u0275did"](5,16384,null,0,o.NgIf,[u.ViewContainerRef,u.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),u["\u0275eld"](6,0,null,null,0,"img",[["class","flag"]],[[8,"src",4],[8,"alt",0]],null,null,null,null)),(n()(),u["\u0275ted"](7,null,[""," "])),(n()(),u["\u0275and"](16777216,null,null,1,null,r)),u["\u0275did"](9,16384,null,0,o.NgIf,[u.ViewContainerRef,u.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,5,0,!e.disabled),n(l,9,0,e.showDropdown)},function(n,l){var e=l.component;n(l,1,0,e.disabled),n(l,6,0,u["\u0275inlineInterpolate"](1,"/assets/img/flags/",null==e.selectedLanguage?null:e.selectedLanguage.code,".png"),u["\u0275inlineInterpolate"](1,"",e.text[null==e.selectedLanguage?null:e.selectedLanguage.name],"")),n(l,7,0,e.text[null==e.selectedLanguage?null:e.selectedLanguage.name])})}function d(n){return u["\u0275vid"](0,[(n()(),u["\u0275and"](16777216,null,null,1,null,c)),u["\u0275did"](1,16384,null,0,o.NgIf,[u.ViewContainerRef,u.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){n(l,1,0,l.component.dataReady)},null)}},ZJMK:function(n,l,e){"use strict";e.r(l);var t=e("CcnG"),u=function(){},o=e("z/Lv"),i=e("nNQa"),s=e("puSb"),a=e("ZYCi"),r=e("qfBg"),c=e("zuHl"),d=e("Ip0R"),p=e("HMtG"),f=e("d6iw"),h=e("4sBp"),g=e("QHbJ"),m=e("8nS+"),b=e("gIcY"),v=e("U2BN"),k=e("vbDk"),x=e("K9Ia"),y=e("5tAl"),w=function(){function n(n){this.http=n,this.readAnotherBook=new x.a}return n.prototype.startNewBook=function(n){this.readAnotherBook.next(n)},n.prototype.fetchPublishedBooks=function(n,l){return this.http.get("/api/books/published/"+n+"/"+l).pipe(Object(y.a)(3))},n.prototype.fetchUserBooks=function(n){return this.http.get("/api/books/user/"+n).pipe(Object(y.a)(3))},n.prototype.fetchUserBook=function(n,l){return this.http.get("/api/book/user/"+n+"/"+l).pipe(Object(y.a)(3))},n.prototype.fetchBook=function(n){return this.http.get("/api/book/"+n).pipe(Object(y.a)(3))},n.prototype.placeBookmark=function(n,l,e){return this.http.put("/api/book/bookmark/"+n+"/"+e,{bookmark:l})},n.prototype.fetchChapter=function(n,l,e){return this.http.get("/api/book/chapter/"+n+"/"+(l||"0")+"/"+e.toString()).pipe(Object(y.a)(3))},n.prototype.fetchSentenceTranslations=function(n,l,e){return this.http.get("/api/book/translations/"+l+"/"+n+"/"+encodeURIComponent(e)).pipe(Object(y.a)(3))},n.prototype.addSentenceTranslation=function(n,l,e,t,u,o){return this.http.post("/api/book/translation/",{bookLanCode:n,userLanCode:l,bookId:e,sentence:t,translation:u,note:o})},n.prototype.updateSentenceTranslation=function(n,l,e,t){return this.http.put("/api/book/translation",{translationId:n,translationElementId:l,translation:e,note:t})},n.prototype.fetchTranslationData=function(n){return this.http.get("/api/book/translation/"+n)},n.prototype.saveSessionData=function(n){return n._id?this.http.put("/api/book/session",{sessionData:n}):this.http.post("/api/book/session",{sessionData:n})},n.prototype.fetchSessionData=function(n){return this.http.get("/api/book/sessions/"+n).pipe(Object(y.a)(3))},n.prototype.fetchPreviousAnswers=function(n,l){return this.http.get("/api/book/sessions/book/"+n+"/"+l).pipe(Object(y.a)(3))},n.prototype.fetchThumbs=function(n,l){return this.http.get("/api/book/thumb/"+n+"/"+l).pipe(Object(y.a)(3))},n.prototype.saveThumb=function(n,l,e,t,u){return this.http.post("/api/book/thumb",{up:n,bookId:l,translatorId:e,translationId:t,translationElementId:u})},n.prototype.fetchSessionTrophies=function(){return this.http.get("/api/book/trophies/user").pipe(Object(y.a)(3))},n.prototype.fetchOverallSessionTrophies=function(n){return this.http.post("/api/book/trophies/session",{existingTrophies:n}).pipe(Object(y.a)(3))},n.prototype.fetchOverallThumbTrophies=function(n){return this.http.post("/api/book/trophies/thumb",{existingTrophies:n}).pipe(Object(y.a)(3))},n.prototype.saveTrophies=function(n){return this.http.post("/api/book/trophies",{trophies:n})},n.prototype.shuffle=function(n){if(!n||n.length<=1)return n;for(var l=0;l<n.length;l++){var e=this.getRandom(l,n.length-1);n[l]=(t=[n[e],n[l]])[0],n[e]=t[1]}return n;var t},n.prototype.getRandom=function(n,l){return Math.floor(Math.random()*(l-n+1))+n},n}(),C=e("0ygI"),I=e("jvbL"),R=function(){function n(n,l,e){this.readService=n,this.userService=l,this.utilsService=e,this.componentActive=!0,this.text={},this.filteredBooks=[],this.userBooks={},this.userData={},this.translationData={},this.isLoading=!1,this.isError=!1,this.isReady=!1,this.IsBooksReady=!1,this.listTpe="all",this.sort="difficulty1"}return n.prototype.ngOnInit=function(){this.getDependables()},n.prototype.onBookLanguageSelected=function(n){this.userService.setLanCode(n.code),n.code===this.myLanguage.code&&(this.myLanguage=this.bookLanguage),this.bookLanguage=n,this.filterUserLanguages(),this.getBooks()},n.prototype.onMyLanguageSelected=function(n){this.userService.setUserLanCode(n.code),this.myLanguage=n,this.getUserBooks(),this.getUserData(),this.getBookTranslations()},n.prototype.onChangeBookType=function(n){this.listTpe=n,this.filterBooks()},n.prototype.onChangeSort=function(n){this.sort=n,this.getBooks(!0)},n.prototype.onRemovedSubscription=function(n){this.userBooks[n._id].subscribed=!1},n.prototype.getFilterCount=function(){},n.prototype.filterBooks=function(){var n=this;switch(this.listTpe){case"my":this.filteredBooks=this.books.filter(function(l){return!!n.userBooks[l._id]&&n.userBooks[l._id].bookmark});break;default:this.filteredBooks=this.books.slice()}var l=this.text.ShowingItems;l&&(l=(l=l.replace("%1",this.filteredBooks.length.toString())).replace("%2",this.nrOfBooks.toString())),this.itemTxt=l},n.prototype.getBooks=function(n){var l=this;void 0===n&&(n=!1),n||(this.getUserBooks(),this.getUserData(),this.getBookTranslations()),this.isLoading=!0,this.readService.fetchPublishedBooks(this.bookLanguage.code,this.sort).pipe(Object(I.a)(function(){return l.componentActive})).subscribe(function(n){l.books=n,n&&(l.nrOfBooks=n.length,l.filterBooks()),l.isLoading=!1,l.IsBooksReady=!0})},n.prototype.getUserBooks=function(){var n=this;this.readService.fetchUserBooks(this.myLanguage.code).pipe(Object(I.a)(function(){return n.componentActive})).subscribe(function(l){n.userBooks={},l.forEach(function(l){n.userBooks[l.bookId]=l})})},n.prototype.getUserData=function(){var n=this;this.readService.fetchSessionData(this.myLanguage.code).pipe(Object(I.a)(function(){return n.componentActive})).subscribe(function(l){n.userData={},l.forEach(function(l){n.userData[l.bookId]=l})})},n.prototype.getBookTranslations=function(){var n=this;this.readService.fetchTranslationData(this.myLanguage.code).pipe(Object(I.a)(function(){return n.componentActive})).subscribe(function(l){n.translationData={},l.forEach(function(l){n.translationData[l.bookId]=l})})},n.prototype.getDependables=function(){var n=this,l={lan:this.userService.user.main.lan,component:"ReadComponent",getTranslations:!0,getLanguages:!0,getLicenses:!0};this.isLoading=!0,this.utilsService.fetchDependables(l).pipe(Object(I.a)(function(){return n.componentActive})).subscribe(function(l){n.licenses=l.licenseUrls,n.text=n.utilsService.getTranslatedText(l.translations),n.setActiveLanguages(l.bookLanguages),n.userLanguages=l.userLanguages,n.myLanguage=n.userService.getUserLanguage(n.userLanguages),n.utilsService.setPageTitle(n.text,"Read"),n.getBooks(),n.filterUserLanguages(),n.isReady=!0})},n.prototype.setActiveLanguages=function(n){this.bookLanguages=n;var l=this.utilsService.getAllLanguage();this.bookLanguages.unshift(l),this.bookLanguage=this.userService.getUserLearnLanguage(this.bookLanguages)},n.prototype.filterUserLanguages=function(){var n=this;this.myLanguages=this.userLanguages.filter(function(l){return l.code!==n.bookLanguage.code});var l=this.myLanguages.find(function(l){return l.code===n.myLanguage.code});if(!l){var e=this.userService.user.main.myLan,t=this.myLanguages.find(function(n){return n.code===e});t&&(this.myLanguage=t)}if(!(l=this.myLanguages.find(function(l){return l.code===n.myLanguage.code}))){var u=this.userService.user.main.lan,o=this.myLanguages.find(function(n){return n.code===u});o&&(this.myLanguage=o)}l||("fr"!==this.bookLanguage.code?this.myLanguage=this.myLanguages.find(function(n){return"fr"===n.code}):this.bookLanguage.code!==this.myLanguages[0].code?this.myLanguage=this.myLanguages[0]:this.myLanguages.length>0&&(this.myLanguage=this.myLanguages[1]))},n.prototype.ngOnDestroy=function(){this.componentActive=!1},n}(),S=t["\u0275crt"]({encapsulation:0,styles:[[".selector[_ngcontent-%COMP%]{padding:0;margin-bottom:4px}.tpe-selector[_ngcontent-%COMP%]{padding-left:4px}.my-lan-selector[_ngcontent-%COMP%]{padding-left:20px;position:relative}.sel-arrow[_ngcontent-%COMP%]{position:absolute;left:5px;top:14px;text-shadow:1px 1px 1px #fff}.filter-count[_ngcontent-%COMP%]{padding:6px;position:relative;top:4px}.sort-control[_ngcontent-%COMP%]{width:inherit}"]],data:{}});function O(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"span",[["class","label label-info filter-count pull-right"]],null,null,null,null,null)),(n()(),t["\u0275ted"](1,null,[" "," "]))],null,function(n,l){n(l,1,0,l.component.itemTxt)})}function T(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-book-summary",[],null,[[null,"removedSubscription"]],function(n,l,e){var t=!0;return"removedSubscription"===l&&(t=!1!==n.component.onRemovedSubscription(e)&&t),t},i.b,i.a)),t["\u0275did"](1,770048,null,0,s.a,[a.l,r.a,c.a],{book:[0,"book"],userBook:[1,"userBook"],userData:[2,"userData"],translationData:[3,"translationData"],userLanCode:[4,"userLanCode"],text:[5,"text"],nr:[6,"nr"],tpe:[7,"tpe"],licenses:[8,"licenses"]},{removedSubscription:"removedSubscription"})],function(n,l){var e=l.component;n(l,1,0,l.parent.context.$implicit,e.userBooks[l.parent.context.$implicit._id],e.userData[l.parent.context.$implicit._id],e.translationData[l.parent.context.$implicit._id],e.myLanguage.code,e.text,l.parent.context.index+1,"my"===e.listTpe?"my":"read",e.licenses)},null)}function M(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"li",[],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,T)),t["\u0275did"](2,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,2,0,"all"===e.listTpe||!(null==e.userBooks[l.context.$implicit._id]||!e.userBooks[l.context.$implicit._id].subscribed))},null)}function D(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"ul",[["class","list-unstyled"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,M)),t["\u0275did"](2,802816,null,0,d.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,l){n(l,2,0,l.component.filteredBooks)},null)}function P(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"div",[],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"km-info-msg",[],null,null,null,p.b,p.a)),t["\u0275did"](2,49152,null,0,f.a,[],{msg:[0,"msg"]},null)],function(n,l){n(l,2,0,l.component.text.NoBooks)},null)}function L(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,4,"div",[],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,D)),t["\u0275did"](2,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,P)),t["\u0275did"](4,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,2,0,null==e.filteredBooks?null:e.filteredBooks.length),n(l,4,0,!e.books.length)},null)}function _(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,51,"section",[],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,9,"div",[["class","form-group form-group-lg"]],null,null,null,null,null)),(n()(),t["\u0275eld"](2,16777216,null,null,3,"div",[["class","col-xs-4 selector"]],null,[[null,"focusin"],[null,"mouseenter"],[null,"focusout"],[null,"mouseleave"]],function(n,l,e){var u=!0;return"focusin"===l&&(u=!1!==t["\u0275nov"](n,3).show()&&u),"mouseenter"===l&&(u=!1!==t["\u0275nov"](n,3).show()&&u),"focusout"===l&&(u=!1!==t["\u0275nov"](n,3).hide()&&u),"mouseleave"===l&&(u=!1!==t["\u0275nov"](n,3).hide()&&u),u},null,null)),t["\u0275did"](3,16384,null,0,h.Tooltip,[t.ViewContainerRef,t.ComponentFactoryResolver],{content:[0,"content"],tooltipPlacement:[1,"tooltipPlacement"]},null),(n()(),t["\u0275eld"](4,0,null,null,1,"km-language-selector",[],null,[[null,"languageSelected"],["document","click"]],function(n,l,e){var u=!0,o=n.component;return"document:click"===l&&(u=!1!==t["\u0275nov"](n,5).clickout(e)&&u),"languageSelected"===l&&(u=!1!==o.onBookLanguageSelected(e)&&u),u},g.b,g.a)),t["\u0275did"](5,573440,null,0,m.a,[t.ElementRef],{languages:[0,"languages"],currentLanguage:[1,"currentLanguage"],text:[2,"text"]},{languageSelected:"languageSelected"}),(n()(),t["\u0275eld"](6,16777216,null,null,4,"div",[["class","col-xs-4 selector my-lan-selector"]],null,[[null,"focusin"],[null,"mouseenter"],[null,"focusout"],[null,"mouseleave"]],function(n,l,e){var u=!0;return"focusin"===l&&(u=!1!==t["\u0275nov"](n,7).show()&&u),"mouseenter"===l&&(u=!1!==t["\u0275nov"](n,7).show()&&u),"focusout"===l&&(u=!1!==t["\u0275nov"](n,7).hide()&&u),"mouseleave"===l&&(u=!1!==t["\u0275nov"](n,7).hide()&&u),u},null,null)),t["\u0275did"](7,16384,null,0,h.Tooltip,[t.ViewContainerRef,t.ComponentFactoryResolver],{content:[0,"content"],tooltipPlacement:[1,"tooltipPlacement"]},null),(n()(),t["\u0275eld"](8,0,null,null,0,"span",[["class","fa fa-arrow-right sel-arrow"]],null,null,null,null,null)),(n()(),t["\u0275eld"](9,0,null,null,1,"km-language-selector",[],null,[[null,"languageSelected"],["document","click"]],function(n,l,e){var u=!0,o=n.component;return"document:click"===l&&(u=!1!==t["\u0275nov"](n,10).clickout(e)&&u),"languageSelected"===l&&(u=!1!==o.onMyLanguageSelected(e)&&u),u},g.b,g.a)),t["\u0275did"](10,573440,null,0,m.a,[t.ElementRef],{languages:[0,"languages"],currentLanguage:[1,"currentLanguage"],text:[2,"text"]},{languageSelected:"languageSelected"}),(n()(),t["\u0275eld"](11,0,null,null,10,"div",[["class","form-group form-group-lg"]],null,null,null,null,null)),(n()(),t["\u0275eld"](12,0,null,null,9,"div",[["class","col-xs-4 selector tpe-selector"]],null,null,null,null,null)),(n()(),t["\u0275eld"](13,0,null,null,8,"select",[["class","form-control"]],null,[[null,"change"]],function(n,l,e){var t=!0;return"change"===l&&(t=!1!==n.component.onChangeBookType(e.target.value)&&t),t},null,null)),(n()(),t["\u0275eld"](14,0,null,null,3,"option",[["value","all"]],null,null,null,null,null)),t["\u0275did"](15,147456,null,0,b.t,[t.ElementRef,t.Renderer2,[8,null]],{value:[0,"value"]},null),t["\u0275did"](16,147456,null,0,b.C,[t.ElementRef,t.Renderer2,[8,null]],{value:[0,"value"]},null),(n()(),t["\u0275ted"](17,null,["",""])),(n()(),t["\u0275eld"](18,0,null,null,3,"option",[["value","my"]],null,null,null,null,null)),t["\u0275did"](19,147456,null,0,b.t,[t.ElementRef,t.Renderer2,[8,null]],{value:[0,"value"]},null),t["\u0275did"](20,147456,null,0,b.C,[t.ElementRef,t.Renderer2,[8,null]],{value:[0,"value"]},null),(n()(),t["\u0275ted"](21,null,["",""])),(n()(),t["\u0275eld"](22,0,null,null,0,"div",[["class","clearfix"]],null,null,null,null,null)),(n()(),t["\u0275eld"](23,0,null,null,26,"div",[["class","row"]],null,null,null,null,null)),(n()(),t["\u0275eld"](24,0,null,null,25,"div",[["class","col-xs-12"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,O)),t["\u0275did"](26,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](27,0,null,null,22,"div",[["class","form-group form-group-sm"]],null,null,null,null,null)),(n()(),t["\u0275eld"](28,16777216,null,null,21,"select",[["class","form-control sort-control"]],null,[[null,"change"],[null,"focusin"],[null,"mouseenter"],[null,"focusout"],[null,"mouseleave"]],function(n,l,e){var u=!0,o=n.component;return"focusin"===l&&(u=!1!==t["\u0275nov"](n,29).show()&&u),"mouseenter"===l&&(u=!1!==t["\u0275nov"](n,29).show()&&u),"focusout"===l&&(u=!1!==t["\u0275nov"](n,29).hide()&&u),"mouseleave"===l&&(u=!1!==t["\u0275nov"](n,29).hide()&&u),"change"===l&&(u=!1!==o.onChangeSort(e.target.value)&&u),u},null,null)),t["\u0275did"](29,16384,null,0,h.Tooltip,[t.ViewContainerRef,t.ComponentFactoryResolver],{content:[0,"content"],tooltipPlacement:[1,"tooltipPlacement"]},null),(n()(),t["\u0275eld"](30,0,null,null,3,"option",[["selected",""],["value","difficulty1"]],null,null,null,null,null)),t["\u0275did"](31,147456,null,0,b.t,[t.ElementRef,t.Renderer2,[8,null]],{value:[0,"value"]},null),t["\u0275did"](32,147456,null,0,b.C,[t.ElementRef,t.Renderer2,[8,null]],{value:[0,"value"]},null),(n()(),t["\u0275ted"](33,null,["",""])),(n()(),t["\u0275eld"](34,0,null,null,3,"option",[["value","difficulty0"]],null,null,null,null,null)),t["\u0275did"](35,147456,null,0,b.t,[t.ElementRef,t.Renderer2,[8,null]],{value:[0,"value"]},null),t["\u0275did"](36,147456,null,0,b.C,[t.ElementRef,t.Renderer2,[8,null]],{value:[0,"value"]},null),(n()(),t["\u0275ted"](37,null,["",""])),(n()(),t["\u0275eld"](38,0,null,null,3,"option",[["value","sentences0"]],null,null,null,null,null)),t["\u0275did"](39,147456,null,0,b.t,[t.ElementRef,t.Renderer2,[8,null]],{value:[0,"value"]},null),t["\u0275did"](40,147456,null,0,b.C,[t.ElementRef,t.Renderer2,[8,null]],{value:[0,"value"]},null),(n()(),t["\u0275ted"](41,null,["",""])),(n()(),t["\u0275eld"](42,0,null,null,3,"option",[["value","sentences1"]],null,null,null,null,null)),t["\u0275did"](43,147456,null,0,b.t,[t.ElementRef,t.Renderer2,[8,null]],{value:[0,"value"]},null),t["\u0275did"](44,147456,null,0,b.C,[t.ElementRef,t.Renderer2,[8,null]],{value:[0,"value"]},null),(n()(),t["\u0275ted"](45,null,["",""])),(n()(),t["\u0275eld"](46,0,null,null,3,"option",[["value","newest0"]],null,null,null,null,null)),t["\u0275did"](47,147456,null,0,b.t,[t.ElementRef,t.Renderer2,[8,null]],{value:[0,"value"]},null),t["\u0275did"](48,147456,null,0,b.C,[t.ElementRef,t.Renderer2,[8,null]],{value:[0,"value"]},null),(n()(),t["\u0275ted"](49,null,["",""])),(n()(),t["\u0275and"](16777216,null,null,1,null,L)),t["\u0275did"](51,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,3,0,e.text.BookLanguage,"top"),n(l,5,0,e.bookLanguages,e.bookLanguage,e.text),n(l,7,0,e.text.TranslationLanguage,"top"),n(l,10,0,e.myLanguages,e.myLanguage,e.text),n(l,15,0,"all"),n(l,16,0,"all"),n(l,19,0,"my"),n(l,20,0,"my"),n(l,26,0,!!e.filteredBooks.length),n(l,29,0,e.text.SortOrder,"top"),n(l,31,0,"difficulty1"),n(l,32,0,"difficulty1"),n(l,35,0,"difficulty0"),n(l,36,0,"difficulty0"),n(l,39,0,"sentences0"),n(l,40,0,"sentences0"),n(l,43,0,"sentences1"),n(l,44,0,"sentences1"),n(l,47,0,"newest0"),n(l,48,0,"newest0"),n(l,51,0,e.IsBooksReady)},function(n,l){var e=l.component;n(l,17,0,e.text.AllLecture),n(l,21,0,e.text.MyLecture),n(l,33,0,e.text.difficulty1),n(l,37,0,e.text.difficulty0),n(l,41,0,e.text.sentences0),n(l,45,0,e.text.sentences1),n(l,49,0,e.text.newest0)})}function N(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-loader",[],null,null,null,v.b,v.a)),t["\u0275did"](1,114688,null,0,k.a,[],{msg:[0,"msg"]},null)],function(n,l){n(l,1,0,l.component.text.LoadingBooks)},null)}function B(n){return t["\u0275vid"](0,[(n()(),t["\u0275and"](16777216,null,null,1,null,_)),t["\u0275did"](1,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,N)),t["\u0275did"](3,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,1,0,e.isReady),n(l,3,0,e.isLoading&&!e.isError)},null)}var E=t["\u0275ccf"]("ng-component",R,function(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,B,S)),t["\u0275did"](1,245760,null,0,R,[w,r.a,C.a],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),A=[".bullets[_ngcontent-%COMP%]{color:grey;font-size:18px;margin-top:0;height:26px}.bullet[_ngcontent-%COMP%]{margin:0 1px 0 0}"],V=function(){},F=t["\u0275crt"]({encapsulation:0,styles:[A],data:{}});function j(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,3,"span",[["class","bullet"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,2,"span",[["class","fa fa-square"]],null,null,null,null,null)),t["\u0275did"](2,278528,null,0,d.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](3,{green:0,orange:1,red:2})],function(n,l){n(l,2,0,"fa fa-square",n(l,3,0,"y"===l.context.$implicit,"m"===l.context.$implicit,"n"===l.context.$implicit))},null)}function U(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","bullets"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,j)),t["\u0275did"](2,802816,null,0,d.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,l){n(l,2,0,l.component.data.answers.slice(-20).split(""))},null)}function $(n){return t["\u0275vid"](0,[(n()(),t["\u0275and"](16777216,null,null,1,null,U)),t["\u0275did"](1,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){n(l,1,0,l.component.data)},null)}var z=e("Fuuz"),K=e("Wu/H"),Y=e("JU9P"),H=function(){function n(n){this.readService=n,this.translationAdded=new t.EventEmitter,this.nextSentence=new t.EventEmitter,this.componentActive=!0,this.translations=[],this.submitting=!1,this.submitted=!1,this.duplicate=!1,this.isEditing=null,this.showTranslations=!1,this.canThumb=!1,this.canEdit=!1,this.thumbs={}}return n.prototype.ngOnInit=function(){this.observe(),this.getSentenceTranslations(this.sentence)},n.prototype.onKeyPressed=function(n){switch(n){case"Enter":this.translationEdit&&!this.submitted?this.addUpdateTranslation(this.translationEdit,this.translationNote||""):this.nextSentence.emit()}},n.prototype.onAddUpdateTranslation=function(n,l){this.addUpdateTranslation(n,l)},n.prototype.onEditTranslation=function(n){this.isEditing=n,this.translationEdit=this.translations[n].translation,this.translationNote=this.translations[n].note,this.submitted=!1,this.submitting=!1},n.prototype.onThumb=function(n,l){this.canThumb&&(this.setThumbData(l),this.thumbs[l.elementId].savingUp||this.thumbs[l.elementId].savingDown||(this.thumbs[l.elementId].user===n&&(n=null),this.saveThumb(n,l)))},n.prototype.getColor=function(n,l){return this.isEditing===n?"rgb(66,139,202)":"hsl(200, 0%,"+Math.min(80,(n+1)*(l?50:10)-10).toString()+"%)"},n.prototype.getTranslationPlaceHolder=function(){var n=this.userLanCode.toUpperCase();return this.text.AddTranslation.replace("%s",this.text[n].toUpperCase())},n.prototype.setThumbData=function(n){this.thumbs[n.elementId]||(this.thumbs[n.elementId]={nrUp:0,nrDown:0,user:null,translationElementId:n.elementId,savingUp:!1,savingDown:!1})},n.prototype.saveThumb=function(n,l){var e=this;this.thumbs[l.elementId].savingDown=!n,this.thumbs[l.elementId].savingUp=n,this.readService.saveThumb(n,this.bookId,l.userId,l._id,l.elementId).pipe(Object(I.a)(function(){return e.componentActive})).subscribe(function(t){e.thumbs[l.elementId].savingDown=!1,e.thumbs[l.elementId].savingUp=!1,e.thumbs[l.elementId].user!==n&&(!0===n?(!0!==e.thumbs[l.elementId].user&&e.thumbs[l.elementId].nrUp++,!1===e.thumbs[l.elementId].user&&e.thumbs[l.elementId].nrDown>0&&e.thumbs[l.elementId].nrDown--):!1===n?(!1!==e.thumbs[l.elementId].user&&e.thumbs[l.elementId].nrDown++,!0===e.thumbs[l.elementId].user&&e.thumbs[l.elementId].nrUp>0&&e.thumbs[l.elementId].nrUp--):null===n&&(!0===e.thumbs[l.elementId].user&&e.thumbs[l.elementId].nrUp--,!1===e.thumbs[l.elementId].user&&e.thumbs[l.elementId].nrDown--),e.thumbs[l.elementId].user=n)})},n.prototype.getSentenceTranslations=function(n){var l=this;this.readService.fetchSentenceTranslations(this.userLanCode,this.bookId,n).pipe(Object(I.a)(function(){return l.componentActive})).subscribe(function(n){l.translations=n,l.translations.length&&l.getTranslationThumbs(l.translations[0]._id)})},n.prototype.getTranslationThumbs=function(n){var l=this;this.readService.fetchThumbs(this.bookId,n).pipe(Object(I.a)(function(){return l.componentActive})).subscribe(function(n){n.forEach(function(n){l.thumbs[n.translationElementId]=n})})},n.prototype.addUpdateTranslation=function(n,l){this.submitting=!0,this.duplicate=!1,n=n.trim(),l=(l=l||"").trim();var e=this.translations.find(function(l){return l.translation===n});n&&!e?null===this.isEditing?this.saveTranslation(n,l):this.updateTranslation(n,l):(this.submitting=!1,e&&(this.duplicate=!0))},n.prototype.saveTranslation=function(n,l){var e=this;this.readService.addSentenceTranslation(this.bookLanCode,this.userLanCode,this.bookId,this.sentence,n,l).pipe(Object(I.a)(function(){return e.componentActive})).subscribe(function(n){e.submitMsg=e.text.ThankYouTranslation+"!",e.submitted=!0,e.submitting=!1;var l=n.translation;l.elementId=l._id,l._id=n.translationsId,e.translations.unshift(l);var t=e.getTranslationPoints(l.translation);e.translationAdded.emit(t),e.setThumbData(l),e.saveThumb(!0,l)})},n.prototype.updateTranslation=function(n,l){var e=this;this.readService.updateSentenceTranslation(this.translations[this.isEditing]._id,this.translations[this.isEditing].elementId,n,l).pipe(Object(I.a)(function(){return e.componentActive})).subscribe(function(t){e.submitMsg="",t&&(e.submitMsg=e.text.TranslationUpdated,e.translations[e.isEditing].translation=n,e.translations[e.isEditing].note=l),e.submitting=!1,e.submitted=!0,e.isEditing=null})},n.prototype.getTranslationPoints=function(n){var l=0,e=n.split(" "),t=this.sentence.split(" ");return e.length>=t.length/2&&(l=e.length+t.length||0),l},n.prototype.observe=function(){var n=this;this.answersReceived.pipe(Object(I.a)(function(){return n.componentActive})).subscribe(function(l){if(n.canThumb=!1,n.canEdit=!1,l&&l.answers){var e=l.answers.slice(-1);"y"!==e&&"m"!==e||(n.canThumb=!0,"y"===e&&(n.canEdit=!0)),n.showTranslations=!0}}),this.newSentence.pipe(Object(I.a)(function(){return n.componentActive})).subscribe(function(l){l&&(n.showTranslations=!1,n.sentence=l,n.submitting=!1,n.submitted=!1,n.duplicate=!1,n.isEditing=null,n.translationEdit=null,n.translationNote=null,n.submitMsg=null,n.getSentenceTranslations(l))})},n.prototype.ngOnDestroy=function(){this.componentActive=!1},n}(),q=t["\u0275crt"]({encapsulation:0,styles:[[".translations-container[_ngcontent-%COMP%]{max-height:100px;overflow-y:scroll;border:1px solid #333;margin-bottom:12px;border-radius:6px}.translation-item[_ngcontent-%COMP%]{padding:5px 10px}.translation-item[_ngcontent-%COMP%]:nth-child(2n){background-color:#fafafa}.translation-item[_ngcontent-%COMP%]:hover{background-color:#eee}.translation-new-note[_ngcontent-%COMP%]{height:26px;padding-top:0;font-style:italic}.translation-send[_ngcontent-%COMP%]{vertical-align:top}.translation-note[_ngcontent-%COMP%]{font-style:italic;font-size:12px}.new-translation[_ngcontent-%COMP%]{margin-top:3px}.edit-icon[_ngcontent-%COMP%]{float:right;color:#428bca}.btn-thumb[_ngcontent-%COMP%]{cursor:default}.btn-up[_ngcontent-%COMP%]:hover, .thumbed-up[_ngcontent-%COMP%]{background-color:#32cd32;border-color:#32cd32}.btn-down[_ngcontent-%COMP%]:hover, .thumbed-down[_ngcontent-%COMP%]{background-color:red;border-color:red}.btn-down[_ngcontent-%COMP%], .btn-up[_ngcontent-%COMP%]{cursor:pointer}.vote-block[_ngcontent-%COMP%]{float:left}.translation-block[_ngcontent-%COMP%]{display:block}@media screen and (max-width:767px){.translation-send[_ngcontent-%COMP%]{float:left;width:100%}.translation-send[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]{width:100%}}"]],data:{}});function Q(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"button",[["class","btn btn-primary btn-sm pull-right edit-button"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onEditTranslation(n.parent.context.index)&&t),t},null,null)),(n()(),t["\u0275eld"](1,0,null,null,0,"span",[["class","fa fa-pencil"]],null,null,null,null,null))],null,null)}function G(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,0,"span",[["class","fa fa-pencil edit-icon"]],null,null,null,null,null))],null,null)}function W(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,0,"span",[["class","fa fa-thumbs-up"]],null,null,null,null,null))],null,null)}function J(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,0,"span",[["class","fa fa-thumbs-down"]],null,null,null,null,null))],null,null)}function Z(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"div",[["class","translation-note"]],[[4,"color",null]],null,null,null,null)),(n()(),t["\u0275ted"](1,null,[" (",") "]))],null,function(n,l){n(l,0,0,l.component.getColor(l.parent.context.index,!0)),n(l,1,0,l.parent.context.$implicit.note)})}function X(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,19,"li",[["class","list-group-item translation-item"]],[[4,"color",null]],null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Q)),t["\u0275did"](2,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](3,0,null,null,11,"div",[["class","vote-block"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,G)),t["\u0275did"](5,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275ted"](6,null,[" ",". "])),(n()(),t["\u0275eld"](7,0,null,null,3,"button",[["class","btn btn-primary btn-sm btn-thumb"],["type","button"]],[[2,"btn-up",null],[2,"thumbed-up",null]],[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onThumb(!0,n.context.$implicit)&&t),t},null,null)),(n()(),t["\u0275ted"](8,null,[" "," "])),(n()(),t["\u0275and"](16777216,null,null,1,null,W)),t["\u0275did"](10,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](11,0,null,null,3,"button",[["class","btn btn-primary btn-sm btn-thumb"],["type","button"]],[[2,"btn-down",null],[2,"thumbed-down",null]],[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onThumb(!1,n.context.$implicit)&&t),t},null,null)),(n()(),t["\u0275ted"](12,null,[" "," "])),(n()(),t["\u0275and"](16777216,null,null,1,null,J)),t["\u0275did"](14,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](15,0,null,null,3,"div",[["class","translation-block"]],null,null,null,null,null)),(n()(),t["\u0275ted"](16,null,[" "," "])),(n()(),t["\u0275and"](16777216,null,null,1,null,Z)),t["\u0275did"](18,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](19,0,null,null,0,"div",[["class","clearfix"]],null,null,null,null,null))],function(n,l){var e=l.component;n(l,2,0,e.canEdit&&(null==l.context.$implicit.userId?null:l.context.$implicit.userId.toString())===e.userId&&e.isEditing!==l.context.index),n(l,5,0,e.isEditing===l.context.index),n(l,10,0,e.canThumb),n(l,14,0,e.canThumb),n(l,18,0,l.context.$implicit.note)},function(n,l){var e=l.component;n(l,0,0,e.getColor(l.context.index,!1)),n(l,6,0,l.context.index+1),n(l,7,0,e.canThumb,!0===(null==e.thumbs[l.context.$implicit.elementId]?null:e.thumbs[l.context.$implicit.elementId].user)),n(l,8,0,(null==e.thumbs[l.context.$implicit.elementId]?null:e.thumbs[l.context.$implicit.elementId].nrUp)||0),n(l,11,0,e.canThumb,!1===(null==e.thumbs[l.context.$implicit.elementId]?null:e.thumbs[l.context.$implicit.elementId].user)),n(l,12,0,(null==e.thumbs[l.context.$implicit.elementId]?null:e.thumbs[l.context.$implicit.elementId].nrDown)||0),n(l,16,0,l.context.$implicit.translation)})}function nn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,3,"div",[["class","translations-container"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,2,"ul",[["class","list-group"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,X)),t["\u0275did"](3,802816,null,0,d.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,l){n(l,3,0,l.component.translations)},null)}function ln(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),t["\u0275ted"](1,null,[" "," "]))],null,function(n,l){n(l,1,0,l.component.text.NoTranslations)})}function en(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),t["\u0275ted"](1,null,[" "," "]))],null,function(n,l){n(l,1,0,l.component.text.TranslationExists)})}function tn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,23,"div",[],null,null,null,null,null)),(n()(),t["\u0275ted"](1,null,[" "," "," "])),(n()(),t["\u0275eld"](2,0,null,null,19,"div",[["class","input-group new-translation"]],null,null,null,null,null)),(n()(),t["\u0275eld"](3,0,null,null,2,"span",[["class","input-group-addon"]],null,null,null,null,null)),(n()(),t["\u0275eld"](4,0,null,null,0,"img",[["class","flag"]],[[8,"src",4]],null,null,null,null)),(n()(),t["\u0275eld"](5,0,null,null,0,"div",[["class","translation-new-note"]],null,null,null,null,null)),(n()(),t["\u0275eld"](6,0,null,null,5,"textarea",[["autocomplete","\u201doff\u201d"],["autofocus",""],["class","form-control"],["rows","3"],["type","text"]],[[8,"placeholder",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,l,e){var u=!0,o=n.component;return"input"===l&&(u=!1!==t["\u0275nov"](n,7)._handleInput(e.target.value)&&u),"blur"===l&&(u=!1!==t["\u0275nov"](n,7).onTouched()&&u),"compositionstart"===l&&(u=!1!==t["\u0275nov"](n,7)._compositionStart()&&u),"compositionend"===l&&(u=!1!==t["\u0275nov"](n,7)._compositionEnd(e.target.value)&&u),"ngModelChange"===l&&(u=!1!==(o.translationEdit=e)&&u),u},null,null)),t["\u0275did"](7,16384,null,0,b.d,[t.Renderer2,t.ElementRef,[2,b.a]],null,null),t["\u0275prd"](1024,null,b.o,function(n){return[n]},[b.d]),t["\u0275did"](9,671744,[["translation",4]],0,b.s,[[8,null],[8,null],[8,null],[6,b.o]],{model:[0,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,b.p,null,[b.s]),t["\u0275did"](11,16384,null,0,b.q,[[4,b.p]],null,null),(n()(),t["\u0275eld"](12,0,null,null,5,"input",[["autocomplete","\u201doff\u201d"],["class","form-control"],["type","text"]],[[8,"placeholder",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,l,e){var u=!0,o=n.component;return"input"===l&&(u=!1!==t["\u0275nov"](n,13)._handleInput(e.target.value)&&u),"blur"===l&&(u=!1!==t["\u0275nov"](n,13).onTouched()&&u),"compositionstart"===l&&(u=!1!==t["\u0275nov"](n,13)._compositionStart()&&u),"compositionend"===l&&(u=!1!==t["\u0275nov"](n,13)._compositionEnd(e.target.value)&&u),"ngModelChange"===l&&(u=!1!==(o.translationNote=e)&&u),u},null,null)),t["\u0275did"](13,16384,null,0,b.d,[t.Renderer2,t.ElementRef,[2,b.a]],null,null),t["\u0275prd"](1024,null,b.o,function(n){return[n]},[b.d]),t["\u0275did"](15,671744,[["tlnote",4]],0,b.s,[[8,null],[8,null],[8,null],[6,b.o]],{model:[0,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,b.p,null,[b.s]),t["\u0275did"](17,16384,null,0,b.q,[[4,b.p]],null,null),(n()(),t["\u0275eld"](18,0,null,null,3,"span",[["class","input-group-btn translation-send"]],null,null,null,null,null)),(n()(),t["\u0275eld"](19,0,null,null,2,"button",[["class","btn btn-primary"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],function(n,l,e){var u=!0;return"click"===l&&(u=!1!==n.component.onAddUpdateTranslation(t["\u0275nov"](n,9).value,t["\u0275nov"](n,15).value)&&u),u},null,null)),(n()(),t["\u0275eld"](20,0,null,null,0,"span",[["class","fa fa-envelope fa-spacing"]],null,null,null,null,null)),(n()(),t["\u0275ted"](21,null,[" "," "])),(n()(),t["\u0275and"](16777216,null,null,1,null,en)),t["\u0275did"](23,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,9,0,e.translationEdit),n(l,15,0,e.translationNote),n(l,23,0,e.duplicate)},function(n,l){var e=l.component;n(l,1,0,e.translations.length?e.text.BetterTranslation:e.text.GoodTranslation,e.text.EnterBelow),n(l,4,0,t["\u0275inlineInterpolate"](1,"/assets/img/flags/",e.userLanCode,".png")),n(l,6,0,e.getTranslationPlaceHolder(),t["\u0275nov"](l,11).ngClassUntouched,t["\u0275nov"](l,11).ngClassTouched,t["\u0275nov"](l,11).ngClassPristine,t["\u0275nov"](l,11).ngClassDirty,t["\u0275nov"](l,11).ngClassValid,t["\u0275nov"](l,11).ngClassInvalid,t["\u0275nov"](l,11).ngClassPending),n(l,12,0,e.text.AddTranslationNote,t["\u0275nov"](l,17).ngClassUntouched,t["\u0275nov"](l,17).ngClassTouched,t["\u0275nov"](l,17).ngClassPristine,t["\u0275nov"](l,17).ngClassDirty,t["\u0275nov"](l,17).ngClassValid,t["\u0275nov"](l,17).ngClassInvalid,t["\u0275nov"](l,17).ngClassPending),n(l,19,0,e.submitting),n(l,21,0,null!==e.isEditing?e.text.UpdateTranslation:e.text.SubmitTranslation)})}function un(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),t["\u0275ted"](1,null,[" "," "]))],null,function(n,l){n(l,1,0,l.component.submitMsg)})}function on(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,13,"div",[["class","panel panel-info"],["kmPressed",""]],null,[[null,"hasKeyPressed"],["document","keydown"]],function(n,l,e){var u=!0,o=n.component;return"document:keydown"===l&&(u=!1!==t["\u0275nov"](n,1).keypress(e)&&u),"hasKeyPressed"===l&&(u=!1!==o.onKeyPressed(e)&&u),u},null,null)),t["\u0275did"](1,16384,null,0,Y.a,[],null,{hasKeyPressed:"hasKeyPressed"}),(n()(),t["\u0275eld"](2,0,null,null,2,"div",[["class","panel-heading"]],null,null,null,null,null)),(n()(),t["\u0275eld"](3,0,null,null,1,"h3",[["class","panel-title"]],null,null,null,null,null)),(n()(),t["\u0275ted"](4,null,["",""])),(n()(),t["\u0275eld"](5,0,null,null,8,"div",[["class","panel-body"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,nn)),t["\u0275did"](7,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,ln)),t["\u0275did"](9,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,tn)),t["\u0275did"](11,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,un)),t["\u0275did"](13,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,7,0,e.translations.length),n(l,9,0,!e.translations.length),n(l,11,0,e.canEdit&&!e.submitted),n(l,13,0,e.submitted)},function(n,l){n(l,4,0,l.component.text.Translations)})}function sn(n){return t["\u0275vid"](0,[(n()(),t["\u0275and"](16777216,null,null,1,null,on)),t["\u0275did"](1,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){n(l,1,0,l.component.showTranslations)},null)}var an=function(){function n(){this.componentActive=!0,this.currentSentences=[],this.level=1,this.nr=1,this.minimized=!1}return n.prototype.ngOnInit=function(){var n=this;this.sentenceNr.pipe(Object(I.a)(function(){return n.componentActive})).subscribe(function(l){n.nr=l,n.updateCurrentSentences()}),this.chapter.pipe(Object(I.a)(function(){return n.componentActive})).subscribe(function(l){n.sentences=l.sentences,n.level=l.level,n.title=l.title.trim(),n.updateCurrentSentences()})},n.prototype.onMinimize=function(n){this.minimized=n},n.prototype.updateCurrentSentences=function(){var n=this.nr>10?this.nr-10-1:0;this.currentSentences=this.sentences?this.sentences.slice(n,n+(this.nr>10?10:this.nr-1)):[]},n.prototype.ngOnDestroy=function(){this.componentActive=!1},n}(),rn=t["\u0275crt"]({encapsulation:0,styles:[[".context[_ngcontent-%COMP%]{background-color:#f9f5e8}.newline-space[_ngcontent-%COMP%]{line-height:8px}.paragraph-space[_ngcontent-%COMP%]{height:1px;margin:1px}.sentence[_ngcontent-%COMP%]{line-height:12px}.paragraph[_ngcontent-%COMP%]::before{content:'\\00a0\\00a0\\00a0'}.break[_ngcontent-%COMP%]{line-height:6px}.header[_ngcontent-%COMP%]{display:block}.header1[_ngcontent-%COMP%]{font-size:32px;line-height:36px}.header2[_ngcontent-%COMP%]{font-size:26px;line-height:30px}.header3[_ngcontent-%COMP%]{font-size:20px;line-height:24px}.header4[_ngcontent-%COMP%]{font-weight:700;line-height:20px}[_nghost-%COMP%]{font-size:16px}.history[_ngcontent-%COMP%]{border:1px solid #999;border-radius:6px;margin-bottom:8px;padding:6px}.minimize[_ngcontent-%COMP%]{color:orange;cursor:pointer;margin-right:2px}"]],data:{}});function cn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"p",[["class","newline-space"]],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["\xa0"]))],null,null)}function dn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"p",[["class","paragraph-space"]],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["\xa0"]))],null,null)}function pn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,8,"span",[],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,cn)),t["\u0275did"](2,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,dn)),t["\u0275did"](4,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](5,0,null,null,3,"span",[["class","sentence"]],null,null,null,null,null)),t["\u0275did"](6,278528,null,0,d.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](7,{paragraph:0,header:1,header1:2,header2:3,header3:4,header4:5}),(n()(),t["\u0275ted"](8,null,[""," "]))],function(n,l){var e=l.component;n(l,2,0,l.context.$implicit.isEmptyLine),n(l,4,0,l.context.$implicit.isNewParagraph),n(l,6,0,"sentence",n(l,7,0,l.context.$implicit.isNewParagraph,l.context.$implicit.isHeader,l.context.$implicit.isHeader&&1===e.level,l.context.$implicit.isHeader&&2===e.level,l.context.$implicit.isHeader&&3===e.level,l.context.$implicit.isHeader&&4===e.level))},function(n,l){n(l,8,0,l.context.$implicit.text)})}function fn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,6,"div",[["class","context"]],[[2,"history",null]],null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,2,"span",[["class","fa fa-window-minimize pull-right minimize"]],null,[[null,"click"]],function(n,l,e){var t=!0,u=n.component;return"click"===l&&(t=!1!==u.onMinimize(!u.minimized)&&t),t},null,null)),t["\u0275did"](2,278528,null,0,d.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](3,{"fa-window-minimize":0,"fa-window-maximize":1}),(n()(),t["\u0275eld"](4,0,null,null,2,"div",[],[[4,"display",null]],null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,pn)),t["\u0275did"](6,802816,null,0,d.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,l){var e=l.component;n(l,2,0,"fa fa-window-minimize pull-right minimize",n(l,3,0,!e.minimized,e.minimized)),n(l,6,0,e.currentSentences)},function(n,l){var e=l.component;n(l,0,0,!e.minimized),n(l,4,0,e.minimized?"none":"block")})}function hn(n){return t["\u0275vid"](0,[(n()(),t["\u0275and"](16777216,null,null,1,null,fn)),t["\u0275did"](1,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){n(l,1,0,l.component.nr>1)},null)}var gn=e("DZ7j"),mn=function(n){return n[n.Question=0]="Question",n[n.Answered=1]="Answered",n[n.Translations=2]="Translations",n[n.Results=3]="Results",n}({}),bn=e("909l"),vn=function(){function n(n){this.readService=n,this.componentActive=!0,this.percYes=0,this.percMaybe=0,this.percNo=0,this.total=0,this.showDetails=!1,this.points=0,this.isFinished=!1,this.newTrophies=[]}return n.prototype.ngOnChanges=function(){this.calculateResults()},n.prototype.onShowDetails=function(n){this.showDetails=n},n.prototype.calculateResults=function(){this.newTrophies=[],this.isFinished=this.data.resultData.isFinished,this.checkSessionTrophies(this.data),this.total=this.data.nrYes+this.data.nrMaybe+this.data.nrNo,this.total>0&&(this.percYes=Math.round(this.data.nrYes/this.total*1e3)/10,this.percMaybe=Math.round(this.data.nrMaybe/this.total*1e3)/10,this.percNo=Math.round(this.data.nrNo/this.total*1e3)/10),this.points=this.data.points.finished+this.data.points.translations+this.data.points.words},n.prototype.checkSessionTrophies=function(n){var l=n.resultData,e=n.answers.length,t=n.translations,u=[];l.isFinished&&(u.push("01"),l.totalBookSentences>=100&&u.push("02"),l.totalBookSentences>=1e3&&u.push("03")),e>=10&&u.push("11"),e>=50&&u.push("12"),e>=200&&u.push("13"),t>=5&&u.push("21"),t>=25&&u.push("22"),t>=50&&u.push("23"),u.length&&this.getTrophies(u)},n.prototype.getTrophies=function(n){var l=this;this.readService.fetchSessionTrophies().pipe(Object(I.a)(function(){return l.componentActive})).subscribe(function(e){l.getOverallTrophies(e,n)})},n.prototype.getOverallTrophies=function(n,l){var e=this;Object(bn.a)(this.readService.fetchOverallSessionTrophies(n),this.readService.fetchOverallThumbTrophies(n)).pipe(Object(I.a)(function(){return e.componentActive})).subscribe(function(t){var u=t[0].concat(t[1]);l.forEach(function(l){n.find(function(n){return n.trophy===l})||u.push(l)}),u.length&&e.saveTrophies(u)})},n.prototype.saveTrophies=function(n){var l=this;this.readService.saveTrophies(n).pipe(Object(I.a)(function(){return l.componentActive})).subscribe(function(e){l.newTrophies=n})},n.prototype.ngOnDestroy=function(){this.componentActive=!1},n}(),kn=t["\u0275crt"]({encapsulation:0,styles:[[".graph[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:15px}.row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:100%;margin-top:1px}.result-label[_ngcontent-%COMP%]{padding:4px;text-align:right;font-weight:700;white-space:nowrap}.bg-green[_ngcontent-%COMP%]{background-color:green}.bg-orange[_ngcontent-%COMP%]{background-color:orange}.bg-red[_ngcontent-%COMP%]{background-color:red}.bar[_ngcontent-%COMP%]{font-style:italic;color:#000;transition:width 1s ease-out;height:100%;border:1px solid #666;padding:4px}.total[_ngcontent-%COMP%]{color:#666}.details[_ngcontent-%COMP%]{font-size:1.6rem}.main-details[_ngcontent-%COMP%]{margin:12px 0;border:1px dotted #999;border-left:none;border-right:none;border-bottom:none}.main-details[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:#fefefe;padding:3px 6px;border:1px dotted #999;border-top:none;margin:0}.panel-details[_ngcontent-%COMP%]{background-color:#d9edf7}.bullet-list[_ngcontent-%COMP%]{background-color:#fefefe;border:1px dotted #999;padding:6px 8px 12px;display:flex;flex-wrap:wrap}.bullet[_ngcontent-%COMP%]{height:15px}.fa-check[_ngcontent-%COMP%]{color:green}.finished[_ngcontent-%COMP%]{font-size:32px}.points[_ngcontent-%COMP%]{font-size:24px;padding:6px 15px}.trophy[_ngcontent-%COMP%]{height:40px;margin-right:12px}.trophies[_ngcontent-%COMP%]{min-height:46px;padding:3px 15px}@media screen and (max-width:500px){.chart-label[_ngcontent-%COMP%]{display:none}}"],A],data:{}});function xn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,4,"div",[["class","panel panel-info"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,3,"div",[["class","panel-heading"]],null,null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,2,"h3",[["class","panel-title finished"]],null,null,null,null,null)),(n()(),t["\u0275eld"](3,0,null,null,0,"span",[["class","fa fa-check"]],null,null,null,null,null)),(n()(),t["\u0275ted"](4,null,[" ","! "]))],null,function(n,l){n(l,4,0,l.component.text.BookFinished)})}function yn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,3,"span",[["class","bullet"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,2,"span",[["class","fa fa-square"]],null,null,null,null,null)),t["\u0275did"](2,278528,null,0,d.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](3,{green:0,orange:1,red:2})],function(n,l){n(l,2,0,"fa fa-square",n(l,3,0,"y"===l.context.$implicit,"m"===l.context.$implicit,"n"===l.context.$implicit))},null)}function wn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,13,"div",[["class","panel panel-info"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,12,"div",[["class","panel-body panel-details"]],null,null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,11,"div",[["class","details"]],null,null,null,null,null)),(n()(),t["\u0275eld"](3,0,null,null,6,"div",[["class","main-details"]],null,null,null,null,null)),(n()(),t["\u0275eld"](4,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),t["\u0275ted"](5,null,["",": ",""])),(n()(),t["\u0275eld"](6,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),t["\u0275ted"](7,null,["",": ",""])),(n()(),t["\u0275eld"](8,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),t["\u0275ted"](9,null,["",": ",""])),(n()(),t["\u0275ted"](10,null,[" ",": "])),(n()(),t["\u0275eld"](11,0,null,null,2,"div",[["class","bullet-list"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,yn)),t["\u0275did"](13,802816,null,0,d.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,l){n(l,13,0,l.component.data.answers.split(""))},function(n,l){var e=l.component;n(l,5,0,e.text.SentencesRead,e.total),n(l,7,0,e.text.ChaptersCompleted,e.data.chapters),n(l,9,0,e.text.TranslationsSubmitted,e.data.translations),n(l,10,0,e.text.AllAnswers)})}function Cn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"span",[],null,null,null,null,null)),(n()(),t["\u0275eld"](1,16777216,null,null,1,"img",[["class","trophy"]],[[8,"src",4]],[[null,"focusin"],[null,"mouseenter"],[null,"focusout"],[null,"mouseleave"]],function(n,l,e){var u=!0;return"focusin"===l&&(u=!1!==t["\u0275nov"](n,2).show()&&u),"mouseenter"===l&&(u=!1!==t["\u0275nov"](n,2).show()&&u),"focusout"===l&&(u=!1!==t["\u0275nov"](n,2).hide()&&u),"mouseleave"===l&&(u=!1!==t["\u0275nov"](n,2).hide()&&u),u},null,null)),t["\u0275did"](2,16384,null,0,h.Tooltip,[t.ViewContainerRef,t.ComponentFactoryResolver],{content:[0,"content"],tooltipPlacement:[1,"tooltipPlacement"]},null)],function(n,l){n(l,2,0,l.component.text["trophy"+l.context.$implicit]||"","top")},function(n,l){n(l,1,0,t["\u0275inlineInterpolate"](1,"/assets/img/trophies/trophy",l.context.$implicit,".png"))})}function In(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,7,"div",[["class","col-xs-12 col-sm-8"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,6,"div",[["class","panel panel-info"]],null,null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,2,"div",[["class","panel-heading"]],null,null,null,null,null)),(n()(),t["\u0275eld"](3,0,null,null,1,"h3",[["class","panel-title "]],null,null,null,null,null)),(n()(),t["\u0275ted"](4,null,[" "," "])),(n()(),t["\u0275eld"](5,0,null,null,2,"div",[["class","panel-body trophies"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Cn)),t["\u0275did"](7,802816,null,0,d.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,l){n(l,7,0,l.component.newTrophies)},function(n,l){n(l,4,0,l.component.text.TrophiesEarned)})}function Rn(n){return t["\u0275vid"](0,[t["\u0275pid"](0,gn.a,[]),(n()(),t["\u0275and"](16777216,null,null,1,null,xn)),t["\u0275did"](2,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](3,0,null,null,40,"div",[["class","panel panel-info"]],null,null,null,null,null)),(n()(),t["\u0275eld"](4,0,null,null,2,"div",[["class","panel-heading"]],null,null,null,null,null)),(n()(),t["\u0275eld"](5,0,null,null,1,"h3",[["class","panel-title"]],null,null,null,null,null)),(n()(),t["\u0275ted"](6,null,[" "," "])),(n()(),t["\u0275eld"](7,0,null,null,36,"div",[["class","panel-body"]],null,null,null,null,null)),(n()(),t["\u0275eld"](8,0,null,null,27,"div",[["class","graph"]],null,null,null,null,null)),(n()(),t["\u0275eld"](9,0,null,null,8,"div",[["class","row"]],null,null,null,null,null)),(n()(),t["\u0275eld"](10,0,null,null,4,"div",[["class","col-xs-3 col-sm-2 result-label"]],null,null,null,null,null)),(n()(),t["\u0275eld"](11,0,null,null,1,"span",[["class","chart-label"]],null,null,null,null,null)),(n()(),t["\u0275ted"](12,null,["",": "])),(n()(),t["\u0275eld"](13,0,null,null,1,"span",[["class","total"]],null,null,null,null,null)),(n()(),t["\u0275ted"](14,null,["",""])),(n()(),t["\u0275eld"](15,0,null,null,2,"div",[["class","col-xs-9 col-sm-10"]],null,null,null,null,null)),(n()(),t["\u0275eld"](16,0,null,null,1,"div",[["class","bg-green bar"]],[[4,"width","%"]],null,null,null,null)),(n()(),t["\u0275ted"](17,null,["","%"])),(n()(),t["\u0275eld"](18,0,null,null,8,"div",[["class","row"]],null,null,null,null,null)),(n()(),t["\u0275eld"](19,0,null,null,4,"div",[["class","col-xs-3 col-sm-2 result-label"]],null,null,null,null,null)),(n()(),t["\u0275eld"](20,0,null,null,1,"span",[["class","chart-label"]],null,null,null,null,null)),(n()(),t["\u0275ted"](21,null,["",": "])),(n()(),t["\u0275eld"](22,0,null,null,1,"span",[["class","total"]],null,null,null,null,null)),(n()(),t["\u0275ted"](23,null,["",""])),(n()(),t["\u0275eld"](24,0,null,null,2,"div",[["class","col-xs-9 col-sm-10"]],null,null,null,null,null)),(n()(),t["\u0275eld"](25,0,null,null,1,"div",[["class","bg-orange bar"]],[[4,"width","%"]],null,null,null,null)),(n()(),t["\u0275ted"](26,null,["","%"])),(n()(),t["\u0275eld"](27,0,null,null,8,"div",[["class","row"]],null,null,null,null,null)),(n()(),t["\u0275eld"](28,0,null,null,4,"div",[["class","col-xs-3 col-sm-2 result-label"]],null,null,null,null,null)),(n()(),t["\u0275eld"](29,0,null,null,1,"span",[["class","chart-label"]],null,null,null,null,null)),(n()(),t["\u0275ted"](30,null,["",": "])),(n()(),t["\u0275eld"](31,0,null,null,1,"span",[["class","total"]],null,null,null,null,null)),(n()(),t["\u0275ted"](32,null,["",""])),(n()(),t["\u0275eld"](33,0,null,null,2,"div",[["class","col-xs-9 col-sm-10"]],null,null,null,null,null)),(n()(),t["\u0275eld"](34,0,null,null,1,"div",[["class","bg-red bar"]],[[4,"width","%"]],null,null,null,null)),(n()(),t["\u0275ted"](35,null,["","%"])),(n()(),t["\u0275eld"](36,0,null,null,4,"button",[["class","btn btn-info btn-xs"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0,u=n.component;return"click"===l&&(t=!1!==u.onShowDetails(!u.showDetails)&&t),t},null,null)),(n()(),t["\u0275eld"](37,0,null,null,2,"span",[["class","fa fa-eye"]],null,null,null,null,null)),t["\u0275did"](38,278528,null,0,d.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](39,{"fa-eye":0,"fa-eye-slash":1}),(n()(),t["\u0275ted"](40,null,[" "," "])),(n()(),t["\u0275eld"](41,0,null,null,0,"div",[["class","clearfix"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,wn)),t["\u0275did"](43,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](44,0,null,null,10,"div",[["class","row"]],null,null,null,null,null)),(n()(),t["\u0275eld"](45,0,null,null,7,"div",[["class","col-xs-12"]],[[2,"col-sm-4",null]],null,null,null,null)),(n()(),t["\u0275eld"](46,0,null,null,6,"div",[["class","panel panel-info"]],null,null,null,null,null)),(n()(),t["\u0275eld"](47,0,null,null,2,"div",[["class","panel-heading"]],null,null,null,null,null)),(n()(),t["\u0275eld"](48,0,null,null,1,"h3",[["class","panel-title "]],null,null,null,null,null)),(n()(),t["\u0275ted"](49,null,[" "," "])),(n()(),t["\u0275eld"](50,0,null,null,2,"div",[["class","panel-body points"]],null,null,null,null,null)),(n()(),t["\u0275ted"](51,null,[" "," "])),t["\u0275ppd"](52,1),(n()(),t["\u0275and"](16777216,null,null,1,null,In)),t["\u0275did"](54,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,2,0,e.isFinished),n(l,38,0,"fa fa-eye",n(l,39,0,e.showDetails,!e.showDetails)),n(l,43,0,e.showDetails),n(l,54,0,e.newTrophies.length)},function(n,l){var e=l.component;n(l,6,0,e.text.ReadingSessionResults),n(l,12,0,e.text.Yes),n(l,14,0,e.data.nrYes),n(l,16,0,e.percYes),n(l,17,0,e.percYes),n(l,21,0,e.text.Maybe),n(l,23,0,e.data.nrMaybe),n(l,25,0,e.percMaybe),n(l,26,0,e.percMaybe),n(l,30,0,e.text.No),n(l,32,0,e.data.nrNo),n(l,34,0,e.percNo),n(l,35,0,e.percNo),n(l,40,0,e.showDetails?e.text.HideDetails:e.text.MoreDetails),n(l,45,0,e.newTrophies.length),n(l,49,0,e.text.PointsEarned),n(l,51,0,t["\u0275unv"](l,51,0,n(l,52,0,t["\u0275nov"](l,0),e.points)))})}var Sn=e("IY2u"),On=e("PvaF"),Tn=function(){function n(n,l){this.readService=n,this.sharedService=l}return n.prototype.ngOnInit=function(){this.isStarted=!!this.userBook&&!!this.userBook.bookmark,this.difficultyPerc=this.sharedService.getBookDifficulty(this.book).difficultyPerc,this.tooltip=this.book.difficulty.weight>this.weight?this.text.MoreDifficult:this.text.LessDifficult},n.prototype.onStartNewBook=function(n){this.readService.startNewBook(n)},n}(),Mn=t["\u0275crt"]({encapsulation:0,styles:[[".fa-circle[_ngcontent-%COMP%]{font-size:1.4em}.title[_ngcontent-%COMP%]{font-size:1.2em;margin:0 6px}.tpe[_ngcontent-%COMP%]{font-size:1.2em;margin-left:6px}.details[_ngcontent-%COMP%]{font-style:italic}.list-group-item[_ngcontent-%COMP%]{margin-bottom:2px;padding-right:1px}.list-group-item[_ngcontent-%COMP%]:hover{background-color:#5bc0de}.start[_ngcontent-%COMP%]{position:relative;top:-5px}"]],data:{}});function Dn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,12,"li",[["class","list-group-item"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,16777216,null,null,3,"span",[["class","fa fa-circle"]],null,[[null,"focusin"],[null,"mouseenter"],[null,"focusout"],[null,"mouseleave"]],function(n,l,e){var u=!0;return"focusin"===l&&(u=!1!==t["\u0275nov"](n,4).show()&&u),"mouseenter"===l&&(u=!1!==t["\u0275nov"](n,4).show()&&u),"focusout"===l&&(u=!1!==t["\u0275nov"](n,4).hide()&&u),"mouseleave"===l&&(u=!1!==t["\u0275nov"](n,4).hide()&&u),u},null,null)),t["\u0275did"](2,278528,null,0,d.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](3,{green:0,red:1}),t["\u0275did"](4,16384,null,0,h.Tooltip,[t.ViewContainerRef,t.ComponentFactoryResolver],{content:[0,"content"],tooltipPlacement:[1,"tooltipPlacement"]},null),(n()(),t["\u0275eld"](5,0,null,null,1,"km-book-tpe",[["class","tpe"]],null,null,null,Sn.b,Sn.a)),t["\u0275did"](6,49152,null,0,On.a,[],{tpe:[0,"tpe"],text:[1,"text"]},null),(n()(),t["\u0275eld"](7,0,null,null,1,"button",[["class","btn btn-primary pull-right start"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0,u=n.component;return"click"===l&&(t=!1!==u.onStartNewBook(u.book)&&t),t},null,null)),(n()(),t["\u0275ted"](8,null,[" "," "])),(n()(),t["\u0275eld"](9,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(n()(),t["\u0275ted"](10,null,["",""])),(n()(),t["\u0275eld"](11,0,null,null,1,"span",[["class","details"]],null,null,null,null,null)),(n()(),t["\u0275ted"](12,null,[" ("," "," / "," ","%) "]))],function(n,l){var e=l.component;n(l,2,0,"fa fa-circle",n(l,3,0,e.book.difficulty.weight<=e.weight,e.book.difficulty.weight>e.weight)),n(l,4,0,e.tooltip,"top"),n(l,6,0,e.book.tpe,e.text)},function(n,l){var e=l.component;n(l,8,0,e.isStarted?e.text.ContinueReading:e.text.StartReading),n(l,10,0,e.book.title),n(l,12,0,e.book.difficulty.nrOfSentences,e.text.sentences,e.text.Difficulty,e.difficultyPerc)})}var Pn=function(){function n(n){this.readService=n,this.componentActive=!0,this.userBooks={},this.suggestedBooks=[],this.isResults=!1}return n.prototype.ngOnInit=function(){this.getBooks(),this.observe()},n.prototype.getBooks=function(){var n=this;Object(bn.a)(this.readService.fetchPublishedBooks(this.book.lanCode,"difficulty1"),this.readService.fetchUserBooks(this.userLanCode),this.readService.fetchPreviousAnswers(this.book._id,this.userLanCode)).pipe(Object(I.a)(function(){return n.componentActive})).subscribe(function(l){n.books=l[0],n.finishedBooks=n.removeFinishedBooks(l[1]),n.pastAnswers=n.processPastAnswers(l[2]);var e=l[1];n.userBooks={},e.forEach(function(l){n.userBooks[l.bookId]=l})})},n.prototype.observe=function(){var n=this;this.answersReceived.pipe(Object(I.a)(function(){return n.componentActive})).subscribe(function(l){l&&l.answers&&(n.processAnswers(l.answers),n.isResults=l.isResults)}),this.nextSentence.pipe(Object(I.a)(function(){return n.componentActive})).subscribe(function(l){l&&(n.suggestedBooks=[])})},n.prototype.removeFinishedBooks=function(n){return n.filter(function(n){return n.bookmark&&n.bookmark.isBookRead})},n.prototype.processPastAnswers=function(n){var l="";return n.forEach(function(n){l+=n}),l},n.prototype.processAnswers=function(n){var l=(this.pastAnswers+n).slice(-20);if(l.length>4){var e=l.split(""),t=e.filter(function(n){return"y"===n}),u=e.filter(function(n){return"n"===n});this.findSuggestions({nrYes:t?t.length:0,nrNo:u?u.length:0,total:e.length})}},n.prototype.findSuggestions=function(n){var l=this,e=this.getWeightCoefficient("harder",n),t=this.getWeightCoefficient("easier",n);if(this.finishedBooks){var u=[40,80],o=[0,40],i=this.book.difficulty.weight,s=[],a=[];if(this.finishedBooks.forEach(function(n){l.books=l.books.filter(function(l){return l._id!==n.bookId})}),this.books.length>0){s=this.books.filter(function(n){return n.difficulty.weight>i+u[0]*e&&n.difficulty.weight<i+u[1]*e}),a=this.books.filter(function(n){return n.difficulty.weight<i-u[0]*t&&n.difficulty.weight>i-u[1]*t}),s.length<1&&(s=this.books.filter(function(n){return n.difficulty.weight>i+o[0]&&n.difficulty.weight<i+o[1]*e})),a.length<1&&(a=this.books.filter(function(n){return n.difficulty.weight<i-o[0]&&n.difficulty.weight>i-o[1]*t})),a=this.readService.shuffle(a).slice(0,3),s=this.readService.shuffle(s).slice(0,3);var r=a.concat(s),c=this.checkIfHarderSuggestions(n,!!s.length);(r=this.checkIfEasierSuggestions(n,!!a.length)?c?a.concat(s):a:s)&&r.sort(function(n,l){return n.difficulty.weight>l.difficulty.weight?1:l.difficulty.weight>n.difficulty.weight?-1:0}),this.suggestedBooks=r}}},n.prototype.checkIfHarderSuggestions=function(n,l){return n.nrNo/n.total<.08&&n.nrYes/n.total>.7&&l},n.prototype.checkIfEasierSuggestions=function(n,l){return n.nrYes/n.total<.86&&n.nrNo/n.total>.2&&l},n.prototype.getWeightCoefficient=function(n,l){return"harder"===n?1+2.5*Math.max(0,l.nrYes/l.total-.7):1+Math.max(0,l.nrNo/l.total-.2)},n.prototype.ngOnDestroy=function(){this.componentActive=!1},n}(),Ln=t["\u0275crt"]({encapsulation:2,styles:[],data:{}});function _n(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-book-tab",[],null,null,null,Dn,Mn)),t["\u0275did"](1,114688,null,0,Tn,[w,c.a],{book:[0,"book"],userBook:[1,"userBook"],weight:[2,"weight"],text:[3,"text"]},null)],function(n,l){var e=l.component;n(l,1,0,l.context.$implicit,e.userBooks[l.context.$implicit._id],e.book.difficulty.weight,e.text)},null)}function Nn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,8,"div",[],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,7,"div",[["class","panel panel-info"]],null,null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,2,"div",[["class","panel-heading"]],null,null,null,null,null)),(n()(),t["\u0275eld"](3,0,null,null,1,"h3",[["class","panel-title"]],null,null,null,null,null)),(n()(),t["\u0275ted"](4,null,[" "," "])),(n()(),t["\u0275eld"](5,0,null,null,3,"div",[["class","panel-body"]],null,null,null,null,null)),(n()(),t["\u0275eld"](6,0,null,null,2,"ul",[["class","list-group"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,_n)),t["\u0275did"](8,802816,null,0,d.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,l){n(l,8,0,l.component.suggestedBooks)},function(n,l){var e=l.component;n(l,4,0,e.isResults?e.text.Recommendations:e.text.ReadingSuggestions)})}function Bn(n){return t["\u0275vid"](0,[(n()(),t["\u0275and"](16777216,null,null,1,null,Nn)),t["\u0275did"](1,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,1,0,!!e.suggestedBooks.length&&!!e.book)},null)}var En=e("M6Em"),An=e("rKNO"),Vn=e("9vc0"),Fn=e("26FU"),jn=e("VnD/"),Un=function(){function n(n,l,e,t,u,o,i,s,a){this.route=n,this.router=l,this.location=e,this.platformLocation=t,this.readService=u,this.sharedService=o,this.userService=i,this.utilsService=s,this.errorService=a,this.componentActive=!0,this.saveFrequency=3,this.text={},this.isCountDown=!1,this.currentStep=mn.Question,this.isBookRead=!1,this.readingStarted=!1,this.isLoading=!1,this.isError=!1,this.showReadMsg=!1,this.steps=mn,this.answersObservable=new x.a,this.nextSentenceObservable=new x.a}return n.prototype.ngOnInit=function(){this.userId=this.userService.user._id.toString(),this.settings=this.userService.user.jazyk.learn,this.chapterObservable=new Fn.a(null),this.sentenceNrObservable=new Fn.a(null),this.getBookId(),this.observe()},n.prototype.onExitReading=function(){this.exitReading()},n.prototype.onExitConfirmed=function(n){n&&(this.log("Reading aborted"),this.processResults(!1))},n.prototype.onBackToList=function(){this.router.navigate(["/read"])},n.prototype.onNextSentence=function(){this.nextSentence()},n.prototype.onAnswer=function(n){this.answer(n)},n.prototype.onTranslationAdded=function(n){this.sessionData.translations++,this.sessionData.points.translations+=Math.round(n*this.getScoreMultiplier())||0},n.prototype.onKeyPressed=function(n){switch(n){case"Escape":this.currentStep<mn.Results&&this.exitReading();break;case"Backspace":this.currentStep===mn.Question&&this.answer("no");break;case" ":this.currentStep===mn.Question&&this.answer("yes")}},n.prototype.onGoToNextSentence=function(){this.nextSentence()},n.prototype.onCountDownFinished=function(){this.isCountDown=!1},n.prototype.getBookReadMessage=function(n){return n?this.text.AlreadyReadBook.replace("%s",n):""},n.prototype.exitReading=function(){var n=!1;this.isCountDown?(this.log("Countdown aborted"),n=!0):this.sessionData.answers?this.confirm.showModal=!0:(this.log("Reading aborted"),n=!0),n&&(this.sharedService.changeExerciseMode(!1),this.router.navigate(["/read"]))},n.prototype.nextSentence=function(){this.getSentence(),this.sessionData.answers.length%this.saveFrequency!=0&&1!==this.sessionData.answers.length||(this.placeBookmark(!1),this.saveSessionData())},n.prototype.observe=function(){var n=this;this.readService.readAnotherBook.subscribe(function(l){n.currentStep===mn.Results?n.startAnotherBook(l):(n.placeBookmark(!1),n.saveSessionData(l))}),this.platformLocation.onPopState(function(){n.sharedService.changeExerciseMode(!1)})},n.prototype.startAnotherBook=function(n){this.bookId=n._id,this.book=n,this.userService.subscribeToBook(this.bookId,this.userLanCode),this.location.go("/read/book/"+this.bookId+"/"+this.userLanCode),this.log("Start reading '"+this.book.title+"'"),this.isCountDown=!1,this.currentChapter=null,this.currentSentence=null,this.currentSentenceNr=null,this.currentSentenceTotal=null,this.currentStep=null,this.currentAnswer=null,this.isBookRead=!1,this.readingStarted=!1,this.isLoading=!1,this.isError=!1,this.showReadMsg=!1,this.sessionData=null,this.msg=null,this.processNewBookId()},n.prototype.answer=function(n){switch(this.currentStep=mn.Answered,this.currentAnswer=n,this.sessionData.answers+=n.substr(0,1),this.sessionData.points.words+=this.getSentencePoints(this.currentSentence),n){case"yes":this.sessionData.nrYes++;break;case"no":this.sessionData.nrNo++;break;case"maybe":this.sessionData.nrMaybe++}this.currentStep=mn.Translations,this.answersObservable.next({answers:this.sessionData.answers,isResults:!1})},n.prototype.getSentencePoints=function(n){var l=n.split(" ");return l?Math.round(l.length*this.getScoreMultiplier()):0},n.prototype.getScoreMultiplier=function(){return 1.5+this.book.difficulty.avgWordScore/1e3},n.prototype.getBookId=function(){var n=this;this.route.params.pipe(Object(I.a)(function(){return n.componentActive}),Object(jn.a)(function(n){return n.id})).subscribe(function(l){n.bookId=l.id,n.userLanCode=l.lan,n.processNewBookId()})},n.prototype.processNewBookId=function(){var n=this;this.bookId&&(this.isLoading=!0,Object(bn.a)(this.readService.fetchUserBook(this.userLanCode,this.bookId),this.utilsService.fetchTranslations(this.userService.user.main.lan,"ReadComponent")).pipe(Object(I.a)(function(){return n.componentActive})).subscribe(function(l){n.text=n.utilsService.getTranslatedText(l[1]);var e=l[0];n.sessionData={bookId:n.bookId,lanCode:n.userLanCode,answers:"",chapters:0,translations:0,nrYes:0,nrNo:0,nrMaybe:0,points:{words:0,translations:0,finished:0},resultData:{isFinished:!1,totalBookSentences:null}},(!e||e&&!e.bookmark)&&(n.isCountDown=!0),n.findCurrentChapter(e)}))},n.prototype.findCurrentChapter=function(n){n?n.bookmark?n.bookmark.isBookRead?(this.isBookRead=!0,this.isError=!0,this.showReadMsg=!0):this.getBookAndChapter(n.bookId,n.bookmark,1):this.getBookAndChapter(n.bookId,null,1):(this.userService.subscribeToBook(this.bookId,this.userLanCode),this.getBookAndChapter(this.bookId,null,1))},n.prototype.getBookAndChapter=function(n,l,e){var t=this;Object(bn.a)(this.readService.fetchBook(n),this.readService.fetchChapter(n,l?l.chapterId:null,e)).pipe(Object(I.a)(function(){return t.componentActive})).subscribe(function(n){t.processBook(n[0]),t.processChapter(n[1],l),t.isLoading=!1})},n.prototype.processBook=function(n){n?(this.book=n,this.sessionData.resultData.totalBookSentences=this.book.difficulty.nrOfSentences,this.utilsService.setPageTitle(null,n.title)):(this.isError=!0,this.msg=this.text.ItemNotAvailable.replace("%s","'"+this.bookId+"'"))},n.prototype.processChapter=function(n,l){n?(this.currentChapter=n,this.emitChapter(n),this.currentSentenceTotal=n.sentences.length,this.currentSentenceNr=l?l.sentenceNrChapter:0,this.emitSentenceNr(this.currentSentenceNr),this.getSentence()):(this.sessionData.resultData.isFinished=!0,this.processResults(!0))},n.prototype.getChapter=function(n,l,e){var t=this;this.readService.fetchChapter(n,l?l.chapterId:null,e).pipe(Object(I.a)(function(){return t.componentActive})).subscribe(function(n){t.processChapter(n,l)})},n.prototype.getSentence=function(){var n=this.currentChapter,l=this.currentSentenceNr;if(n.sentences[l]){this.currentStep=mn.Question;var e=n.sentences[l].text.trim();e&&(this.currentSentence=e,this.currentSentenceNr++,this.emitSentenceNr(this.currentSentenceNr),this.nextSentenceObservable.next(e),this.checkReadingStarted(l))}else this.sessionData.chapters++,this.getChapter(this.bookId,null,this.currentChapter.sequence+1)},n.prototype.emitSentenceNr=function(n){this.sentenceNrObservable.next(n)},n.prototype.emitChapter=function(n){this.chapterObservable.next(n)},n.prototype.checkReadingStarted=function(n){if(0===this.sessionData.answers.length){var l=0===n?"Start":"Continue";this.book&&(this.readingStarted=!0,this.log(l+" reading '"+this.book.title+"'"),this.sharedService.changeExerciseMode(!0),this.errorService.clearError())}},n.prototype.placeBookmark=function(n){var l=this;if(this.sessionData.answers){var e=this.currentSentenceNr;this.currentStep<mn.Answered&&e--;var t=!1;e>=this.currentSentenceTotal&&(t=!0);var u={chapterId:this.currentChapter._id,sentenceNrChapter:e,isChapterRead:!!n||t,isBookRead:n};n&&(this.sessionData.points.finished=Math.round(this.book.difficulty.nrOfWords*Math.log(this.book.difficulty.nrOfWords)*this.getScoreMultiplier())||0),this.readService.placeBookmark(this.bookId,u,this.userLanCode).pipe(Object(I.a)(function(){return l.componentActive})).subscribe(function(n){})}},n.prototype.processResults=function(n){this.sharedService.changeExerciseMode(!1),this.placeBookmark(n),this.saveSessionData(),this.currentStep=mn.Results,this.answersObservable.next({answers:this.sessionData.answers,isResults:!0})},n.prototype.saveSessionData=function(n){var l=this;void 0===n&&(n=null),this.sessionData.answers&&this.readService.saveSessionData(this.sessionData).pipe(Object(I.a)(function(){return l.componentActive})).subscribe(function(e){!l.sessionData._id&&e._id&&(l.sessionData._id=e._id,l.sessionData.dt=e.dt),n&&l.startAnotherBook(n)})},n.prototype.log=function(n){this.sharedService.sendEventMessage({message:n,source:"ReadComponent"})},n.prototype.ngOnDestroy=function(){this.componentActive=!1},n}(),$n=t["\u0275crt"]({encapsulation:0,styles:[[".close-reading[_ngcontent-%COMP%]{font-size:36px;color:red;text-shadow:1px 1px 1px #333;cursor:pointer;margin-right:12px;margin-top:6px}.reading-header[_ngcontent-%COMP%]{height:36px}.book-header[_ngcontent-%COMP%]{padding:8px 12px;overflow:hidden}.book-title[_ngcontent-%COMP%]{margin:0}.book-chapter[_ngcontent-%COMP%]{display:block;margin-left:75px}.next[_ngcontent-%COMP%]{color:#999}.sentence[_ngcontent-%COMP%]{font-size:3rem;background-color:#000;color:#fff;border-radius:6px;padding:8px;margin-bottom:12px}.question[_ngcontent-%COMP%]{text-align:center;font-size:1.6rem;margin-bottom:6px;margin-top:24px}.btn-big[_ngcontent-%COMP%]{position:relative;width:100%;padding-top:100%;border-radius:10%}.btn-text-wrapper[_ngcontent-%COMP%]{position:absolute;top:40%;left:0;width:100%;font-size:2vw}.translations[_ngcontent-%COMP%]{clear:right}.next-sentence[_ngcontent-%COMP%]{margin-bottom:10px}.short-key[_ngcontent-%COMP%]{font-size:.8em;position:absolute;bottom:10px;left:0;width:100%}@media screen and (max-width:991px){.btn-text-wrapper[_ngcontent-%COMP%]{font-size:3vw}}@media screen and (max-width:767px){.btn-text-wrapper[_ngcontent-%COMP%]{font-size:4vw}}"]],data:{}});function zn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-book-bullets",[],null,null,null,$,F)),t["\u0275did"](1,49152,null,0,V,[],{data:[0,"data"]},null)],function(n,l){n(l,1,0,l.component.sessionData)},null)}function Kn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,0,"span",[["class","fa fa-times pull-right close-reading"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onExitReading()&&t),t},null,null))],null,null)}function Yn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-countdown",[],null,[[null,"countedDown"]],function(n,l,e){var t=!0;return"countedDown"===l&&(t=!1!==n.component.onCountDownFinished()&&t),t},z.b,z.a)),t["\u0275did"](1,245760,null,0,K.a,[],{counter:[0,"counter"],mute:[1,"mute"]},{countedDown:"countedDown"})],function(n,l){var e=l.component;n(l,1,0,e.settings.delay,e.settings.mute)},null)}function Hn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"div",[["class","question"]],null,null,null,null,null)),(n()(),t["\u0275ted"](1,null,[" "," "]))],null,function(n,l){n(l,1,0,l.component.text.DoYouUnderstand)})}function qn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,18,"div",[["class","row sentence-buttons"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,0,"div",[["class","col-md-3"]],null,null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,5,"div",[["class","col-md-2 col-xs-4"]],null,null,null,null,null)),(n()(),t["\u0275eld"](3,0,null,null,4,"button",[["class","btn btn-success btn-big"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onAnswer("yes")&&t),t},null,null)),(n()(),t["\u0275eld"](4,0,null,null,1,"div",[["class","btn-text-wrapper"]],null,null,null,null,null)),(n()(),t["\u0275ted"](5,null,[" "," "])),(n()(),t["\u0275eld"](6,0,null,null,1,"div",[["class","short-key"]],null,null,null,null,null)),(n()(),t["\u0275ted"](7,null,["[","]"])),(n()(),t["\u0275eld"](8,0,null,null,3,"div",[["class","col-md-2 col-xs-4"]],null,null,null,null,null)),(n()(),t["\u0275eld"](9,0,null,null,2,"button",[["class","btn btn-warning btn-big"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onAnswer("maybe")&&t),t},null,null)),(n()(),t["\u0275eld"](10,0,null,null,1,"div",[["class","btn-text-wrapper"]],null,null,null,null,null)),(n()(),t["\u0275ted"](11,null,[" "," "])),(n()(),t["\u0275eld"](12,0,null,null,5,"div",[["class","col-md-2 col-xs-4"]],null,null,null,null,null)),(n()(),t["\u0275eld"](13,0,null,null,4,"button",[["class","btn btn-danger btn-big"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onAnswer("no")&&t),t},null,null)),(n()(),t["\u0275eld"](14,0,null,null,1,"div",[["class","btn-text-wrapper"]],null,null,null,null,null)),(n()(),t["\u0275ted"](15,null,[" "," "])),(n()(),t["\u0275eld"](16,0,null,null,1,"div",[["class","short-key"]],null,null,null,null,null)),(n()(),t["\u0275ted"](17,null,["[","]"])),(n()(),t["\u0275eld"](18,0,null,null,0,"div",[["class","col-md-3"]],null,null,null,null,null))],null,function(n,l){var e=l.component;n(l,5,0,e.text.Yes),n(l,7,0,e.text.Space.toUpperCase()),n(l,11,0,e.text.Maybe),n(l,15,0,e.text.No),n(l,17,0,e.text.Backspace.toUpperCase())})}function Qn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"button",[["class","btn btn-success btn-lg pull-right next-sentence"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onNextSentence()&&t),t},null,null)),(n()(),t["\u0275ted"](1,null,[" "," "])),(n()(),t["\u0275eld"](2,0,null,null,0,"span",[["class","fa fa-chevron-right"]],null,null,null,null,null))],null,function(n,l){n(l,1,0,l.component.text.NextSentence)})}function Gn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","translations"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"km-sentence-translations",[],null,[[null,"translationAdded"],[null,"nextSentence"]],function(n,l,e){var t=!0,u=n.component;return"translationAdded"===l&&(t=!1!==u.onTranslationAdded(e)&&t),"nextSentence"===l&&(t=!1!==u.onGoToNextSentence()&&t),t},sn,q)),t["\u0275did"](2,245760,null,0,H,[w],{userId:[0,"userId"],userLanCode:[1,"userLanCode"],bookLanCode:[2,"bookLanCode"],text:[3,"text"],bookId:[4,"bookId"],sentence:[5,"sentence"],answersReceived:[6,"answersReceived"],newSentence:[7,"newSentence"]},{translationAdded:"translationAdded",nextSentence:"nextSentence"})],function(n,l){var e=l.component;n(l,2,0,e.userId,e.userLanCode,null==e.book?null:e.book.lanCode,e.text,null==e.book?null:e.book._id,e.currentSentence,e.answersObservable,e.nextSentenceObservable)},null)}function Wn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,15,"div",[],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"km-book-context",[],null,null,null,hn,rn)),t["\u0275did"](2,245760,null,0,an,[],{chapter:[0,"chapter"],sentenceNr:[1,"sentenceNr"]},null),(n()(),t["\u0275eld"](3,0,null,null,1,"div",[["class","sentence-count"]],null,null,null,null,null)),(n()(),t["\u0275ted"](4,null,[" "," ","/",": "])),(n()(),t["\u0275eld"](5,0,null,null,1,"div",[["class","sentence"]],null,null,null,null,null)),(n()(),t["\u0275ted"](6,null,[" "," "])),(n()(),t["\u0275and"](16777216,null,null,1,null,Hn)),t["\u0275did"](8,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,qn)),t["\u0275did"](10,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Qn)),t["\u0275did"](12,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](13,0,null,null,0,"div",[["class","clearfix"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Gn)),t["\u0275did"](15,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,2,0,e.chapterObservable,e.sentenceNrObservable),n(l,8,0,e.currentStep===e.steps.Question),n(l,10,0,e.currentStep===e.steps.Question),n(l,12,0,e.currentStep>e.steps.Question),n(l,15,0,e.userLanCode!==e.book.lanCode)},function(n,l){var e=l.component;n(l,4,0,e.text.Sentence,e.currentSentenceNr,e.currentSentenceTotal),n(l,6,0,e.currentSentence)})}function Jn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"div",[],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"km-sentences-results",[],null,null,null,Rn,kn)),t["\u0275did"](2,704512,null,0,vn,[w],{data:[0,"data"],text:[1,"text"]},null)],function(n,l){var e=l.component;n(l,2,0,e.sessionData,e.text)},null)}function Zn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"button",[["class","btn btn-primary"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onBackToList()&&t),t},null,null)),(n()(),t["\u0275ted"](1,null,[" "," "]))],null,function(n,l){n(l,1,0,l.component.text.BackReading)})}function Xn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,10,"div",[],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,9,"div",[["class","panel panel-default"]],null,null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,8,"div",[["class","panel-body"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Wn)),t["\u0275did"](4,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Jn)),t["\u0275did"](6,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](7,0,null,null,1,"km-book-suggestions",[],null,null,null,Bn,Ln)),t["\u0275did"](8,245760,null,0,Pn,[w],{book:[0,"book"],userLanCode:[1,"userLanCode"],answersReceived:[2,"answersReceived"],nextSentence:[3,"nextSentence"],text:[4,"text"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Zn)),t["\u0275did"](10,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,4,0,e.currentStep<e.steps.Results),n(l,6,0,e.currentStep===e.steps.Results),n(l,8,0,e.book,e.userLanCode,e.answersObservable,e.nextSentenceObservable,e.text),n(l,10,0,e.currentStep===e.steps.Results)},null)}function nl(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,16,"div",[],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,11,"div",[["class","exercise-header"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Kn)),t["\u0275did"](3,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](4,0,null,null,8,"div",[["class","panel panel-default"]],null,null,null,null,null)),(n()(),t["\u0275eld"](5,0,null,null,7,"div",[["class","panel-body book-header"]],null,null,null,null,null)),(n()(),t["\u0275eld"](6,0,null,null,6,"h1",[["class","book-title"]],null,null,null,null,null)),(n()(),t["\u0275eld"](7,0,null,null,0,"img",[["class","flag from"]],[[8,"src",4]],null,null,null,null)),(n()(),t["\u0275eld"](8,0,null,null,0,"span",[["class","fa fa-arrow-right flag-from"]],null,null,null,null,null)),(n()(),t["\u0275eld"](9,0,null,null,0,"img",[["class","flag"]],[[8,"src",4]],null,null,null,null)),(n()(),t["\u0275ted"](10,null,[" "," "])),(n()(),t["\u0275eld"](11,0,null,null,1,"small",[["class","book-chapter"]],null,null,null,null,null)),(n()(),t["\u0275ted"](12,null,[" "," "])),(n()(),t["\u0275and"](16777216,null,null,1,null,Yn)),t["\u0275did"](14,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Xn)),t["\u0275did"](16,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,3,0,e.currentStep<e.steps.Results),n(l,14,0,e.isCountDown),n(l,16,0,e.readingStarted&&!e.isError&&!e.isLoading&&!e.isCountDown)},function(n,l){var e=l.component;n(l,7,0,t["\u0275inlineInterpolate"](1,"/assets/img/flags/",null==e.book?null:e.book.lanCode,".png")),n(l,9,0,t["\u0275inlineInterpolate"](1,"/assets/img/flags/",e.userLanCode,".png")),n(l,10,0,null==e.book?null:e.book.title),n(l,12,0,e.currentChapter.title)})}function ll(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-info-msg",[],null,null,null,p.b,p.a)),t["\u0275did"](1,49152,null,0,f.a,[],{msg:[0,"msg"]},null)],function(n,l){var e=l.component;n(l,1,0,e.getBookReadMessage(null==e.book?null:e.book.title))},null)}function el(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-info-msg",[],null,null,null,p.b,p.a)),t["\u0275did"](1,49152,null,0,f.a,[],{msg:[0,"msg"]},null)],function(n,l){n(l,1,0,l.component.msg)},null)}function tl(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-loader",[],null,null,null,v.b,v.a)),t["\u0275did"](1,114688,null,0,k.a,[],{msg:[0,"msg"]},null)],function(n,l){n(l,1,0,l.component.text.LoadingSentence||"")},null)}function ul(n){return t["\u0275vid"](0,[t["\u0275qud"](402653184,1,{confirm:0}),(n()(),t["\u0275eld"](1,0,null,null,15,"section",[["kmPressed",""]],null,[[null,"hasKeyPressed"],["document","keydown"]],function(n,l,e){var u=!0,o=n.component;return"document:keydown"===l&&(u=!1!==t["\u0275nov"](n,2).keypress(e)&&u),"hasKeyPressed"===l&&(u=!1!==o.onKeyPressed(e)&&u),u},null,null)),t["\u0275did"](2,16384,null,0,Y.a,[],null,{hasKeyPressed:"hasKeyPressed"}),(n()(),t["\u0275and"](16777216,null,null,1,null,zn)),t["\u0275did"](4,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,nl)),t["\u0275did"](6,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,ll)),t["\u0275did"](8,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,el)),t["\u0275did"](10,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](11,0,null,null,5,"km-modal-confirm",[],null,[[null,"confirmed"]],function(n,l,e){var t=!0;return"confirmed"===l&&(t=!1!==n.component.onExitConfirmed(e)&&t),t},En.b,En.a)),t["\u0275did"](12,49152,[[1,4],["confirmexit",4]],0,An.a,[],{level:[0,"level"],text:[1,"text"]},{confirmed:"confirmed"}),(n()(),t["\u0275eld"](13,0,null,0,1,"div",[["title",""]],null,null,null,null,null)),(n()(),t["\u0275ted"](14,null,["",""])),(n()(),t["\u0275eld"](15,0,null,1,1,"div",[["message",""]],null,null,null,null,null)),(n()(),t["\u0275ted"](16,null,["",""])),(n()(),t["\u0275and"](0,[["loading",2]],null,0,null,tl))],function(n,l){var e=l.component;n(l,4,0,e.currentStep<e.steps.Results),n(l,6,0,e.readingStarted&&!e.isError&&!e.isLoading,t["\u0275nov"](l,17)),n(l,8,0,e.showReadMsg),n(l,10,0,e.msg&&!e.showReadMsg),n(l,12,0,"warning",e.text)},function(n,l){var e=l.component;n(l,14,0,e.text.Warning),n(l,16,0,e.text.ConfirmStopReading)})}var ol=t["\u0275ccf"]("ng-component",Un,function(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,ul,$n)),t["\u0275did"](1,245760,null,0,Un,[a.a,a.l,d.Location,d.PlatformLocation,w,c.a,r.a,C.a,Vn.a],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),il=e("t/Na"),sl=e("RDNO"),al=e("lGQG"),rl=e("ZYjt"),cl=e("7mek"),dl=e("d2mR"),pl=e("UTcu");e.d(l,"ReadModuleNgFactory",function(){return fl});var fl=t["\u0275cmf"](u,[],function(n){return t["\u0275mod"]([t["\u0275mpd"](512,t.ComponentFactoryResolver,t["\u0275CodegenComponentFactoryResolver"],[[8,[o.a,E,ol]],[3,t.ComponentFactoryResolver],t.NgModuleRef]),t["\u0275mpd"](4608,d.NgLocalization,d.NgLocaleLocalization,[t.LOCALE_ID,[2,d["\u0275angular_packages_common_common_a"]]]),t["\u0275mpd"](4608,il.j,il.p,[d.DOCUMENT,t.PLATFORM_ID,il.n]),t["\u0275mpd"](4608,il.q,il.q,[il.j,il.o]),t["\u0275mpd"](5120,il.a,function(n,l){return[n,new sl.a(l)]},[il.q,al.a]),t["\u0275mpd"](4608,il.m,il.m,[]),t["\u0275mpd"](6144,il.k,null,[il.m]),t["\u0275mpd"](4608,il.i,il.i,[il.k]),t["\u0275mpd"](6144,il.b,null,[il.i]),t["\u0275mpd"](4608,il.f,il.l,[il.b,t.Injector]),t["\u0275mpd"](4608,il.c,il.c,[il.f]),t["\u0275mpd"](4608,b.A,b.A,[]),t["\u0275mpd"](4608,C.a,C.a,[il.c,rl.h]),t["\u0275mpd"](4608,w,w,[il.c]),t["\u0275mpd"](1073742336,d.CommonModule,d.CommonModule,[]),t["\u0275mpd"](1073742336,il.e,il.e,[]),t["\u0275mpd"](1073742336,il.d,il.d,[]),t["\u0275mpd"](1073742336,b.y,b.y,[]),t["\u0275mpd"](1073742336,b.k,b.k,[]),t["\u0275mpd"](1073742336,cl.TooltipModule,cl.TooltipModule,[]),t["\u0275mpd"](1073742336,dl.a,dl.a,[]),t["\u0275mpd"](1073742336,a.o,a.o,[[2,a.t],[2,a.l]]),t["\u0275mpd"](1073742336,u,u,[]),t["\u0275mpd"](256,il.n,"XSRF-TOKEN",[]),t["\u0275mpd"](256,il.o,"X-XSRF-TOKEN",[]),t["\u0275mpd"](1024,a.j,function(){return[[{path:"",component:R,canActivate:[pl.a]},{path:"book/:id/:lan",component:Un,canActivate:[pl.a]}]]},[])])})},rKNO:function(n,l,e){"use strict";e.d(l,"a",function(){return u});var t=e("CcnG"),u=function(){function n(){this.level="danger",this.confirmed=new t.EventEmitter,this.showModal=!1}return n.prototype.onModalYes=function(){this.showModal=!1,this.confirmed.emit(!0)},n.prototype.onModalNo=function(){this.showModal=!1,this.confirmed.emit(!1)},n}()}}]);