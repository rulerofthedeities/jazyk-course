(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"38I2":function(n,l,e){"use strict";e.r(l);var t=e("CcnG"),u=function(){},i=e("z/Lv"),o=e("vSV7"),s=e("omCk"),r=e("xNK6"),a=e("ZYCi"),c=e("qfBg"),d=e("0AbP"),p=e("0ygI"),f=e("lGQG"),h=e("zuHl"),g=e("9vc0"),m=e("Ip0R"),v=e("HMtG"),x=e("d6iw"),C=e("U2BN"),w=e("vbDk"),y=e("QHbJ"),b=e("8nS+"),S=e("VtPn"),I=e("IFLc"),D=e("F/XL"),R=e("5tAl"),k=function(){function n(n,l,e){this.http=n,this.authService=l,this.previewService=e}return n.prototype.fetchPublishedCourses=function(n){return this.http.get("/api/courses/published/"+n).pipe(Object(R.a)(3))},n.prototype.fetchSubscribedCourses=function(){return this.authService.isLoggedIn()?this.http.get("/api/user/courses/learn").pipe(Object(R.a)(3)):this.http.get("/api/courses/demo").pipe(Object(R.a)(3))},n.prototype.fetchCourse=function(n){return this.http.get("/api/learn/course/"+n).pipe(Object(R.a)(3))},n.prototype.unSubscribeCourse=function(n){return this.http.post("/api/user/unsubscribe",JSON.stringify({courseId:n}))},n.prototype.fetchLesson=function(n){return this.http.get("/api/lesson/"+n).pipe(Object(R.a)(3))},n.prototype.fetchLessonHeaders=function(n){return this.http.get("/api/lessons/header/"+n).pipe(Object(R.a)(3))},n.prototype.fetchIntro=function(n){return this.http.get("/api/lesson/intro/"+n).pipe(Object(R.a)(3))},n.prototype.fetchLessonResults=function(n){return this.authService.isLoggedIn()?this.http.get("/api/user/results/lessons/"+n).pipe(Object(R.a)(3)):Object(D.a)(null)},n.prototype.fetchLessonCounts=function(n){return this.http.get("/api/lessons/count/"+n).pipe(Object(R.a)(3))},n.prototype.fetchDialogue=function(n){return this.http.get("/api/lesson/dialogue/"+n).pipe(Object(R.a)(3))},n.prototype.fetchCourseChoices=function(n,l){return this.http.get("/api/choices/course/"+n+"/"+l.from+"-"+l.to).pipe(Object(R.a)(3))},n.prototype.saveUserResults=function(n){return this.authService.isLoggedIn()?this.http.post("/api/user/results/add",n):Object(D.a)(null)},n.prototype.fetchLessonStepResults=function(n,l){return this.http.get("/api/user/results/lesson/"+l+"/"+n).pipe(Object(R.a)(3))},n.prototype.fetchMostRecentLesson=function(n){return this.http.get("/api/user/results/course/currentlesson/"+n).pipe(Object(R.a)(3))},n.prototype.fetchStepData=function(n,l){return this.http.get("/api/user/results/countbystep/"+n+"/"+l).pipe(Object(R.a)(3))},n.prototype.fetchToReview=function(n,l){var e={max:l.toString()};return this.http.get("/api/user/results/course/toreview/"+n,{params:e}).pipe(Object(R.a)(3))},n.prototype.fetchDifficult=function(n,l){var e={max:l.toString()};return this.http.get("/api/user/results/course/difficult/"+n,{params:e}).pipe(Object(R.a)(3))},n.prototype.fetchScoreTotal=function(){return this.http.get("/api/user/score/total").pipe(Object(R.a)(3))},n.prototype.getMaxExercises=function(n,l){var e=n.length,t=e%l,u=e%(l+1)==0?e/(l+1):Math.trunc((e-3)/l)+1;return e-l<3?e:t/u>=1&&e%(l+1)==0?l+1:t/u>=1&&e%(l-1)==0?l-1:l},n.prototype.getRandomExercises=function(n,l){var e,t,u,i=[];if(n.length>l){for(e=n.map(function(n){return n});i.length<l&&e;)u=Math.floor(Math.random()*e.length),t=e[u],e.splice(u,1),i.find(function(n){return n._id===t._id})||i.push(t);return i}return n},n.prototype.buildExerciseData=function(n,l,e,t,u){var i,o,s=this,r=[],a=0;return n&&n.forEach(function(n){i=null,l&&(i=l.filter(function(l){return!!l&&(l.exerciseUnid?l.exerciseUnid.exerciseId===n._id&&l.exerciseUnid.lessonId===n.lessonId:l.exerciseId===n._id)})[0]),o=t.isBidirectional?Math.random()>=.5?S.b.LocalToForeign:S.b.ForeignToLocal:t.direction,r[a]=s.buildData(t,u,i,e,n,o),a++}),r},n.prototype.buildData=function(n,l,e,t,u,i){var o={data:{isDone:!1,isCorrect:!1,answered:0,direction:i,isCaseSensitive:l?l.caseSensitive:null},exercise:u,result:e};return n.direction===S.b.ForeignToLocal&&this.previewService.buildForeignData(o,t,u),n.direction===S.b.LocalToForeign&&this.previewService.buildLocalData(o,t,u),o},n.prototype.isAlmostCorrect=function(n,l){var e=!1;return l&&(e=!(this.previewService.getDamerauLevenshteinDistance(n,l)/l.length*100>20)),e},n.prototype.filterPrefix=function(n){var l=n;if(l){var e=n.match(/\((.*?)\)/);e&&e.length>0&&(l=l.replace(e[0],"")),l&&(l=l.trim())}return l},n.prototype.getExamCount=function(n){var l=0;return n>=2e3?l=200:n>=1e3?l=100:n>=500&&(l=50),l},n.prototype.showFilteredWord=function(n,l){if(n){var e=n.split("|").map(function(n){return n.split(";")[0]});return l===S.c.Conjugations?e[0]:e.join(", ")}return""},n.prototype.fetchLanConfig=function(n){return this.http.get("/api/config/lan/"+n).pipe(Object(R.a)(3))},n}(),T=e("3lxF"),P=e("jvbL"),N=function(){function n(n,l,e,t,u){this.router=n,this.learnService=l,this.errorService=e,this.utilsService=t,this.userService=u,this.componentActive=!0,this.text={},this.userCourses={},this.listType=T.b,this.isLoading=!1,this.isError=!1,this.isReady=!1,this.allCoursesReady=!1,this.courseTpe="all"}return n.prototype.ngOnInit=function(){this.getDependables()},n.prototype.onLanguageSelected=function(n){this.errorService.clearError(),this.selectedLanguage=n,this.allCoursesReady=!1,this.getCourses()},n.prototype.onNewCourse=function(){this.router.navigate(["/build/course/new"])},n.prototype.onChangeCourseType=function(n){this.courseTpe=n},n.prototype.onUnsubscribe=function(n){this.unsubscribeCourse(n)},n.prototype.getCourses=function(){this.getAllCourses(),this.getSubscribedCourses()},n.prototype.getAllCourses=function(){var n=this;this.isLoading=!0,this.learnService.fetchPublishedCourses(this.selectedLanguage.code).pipe(Object(P.a)(function(){return n.componentActive})).subscribe(function(l){n.isLoading=!1,n.allCourses=l,n.allCoursesReady=!0})},n.prototype.getSubscribedCourses=function(){var n=this;this.learnService.fetchSubscribedCourses().pipe(Object(P.a)(function(){return n.componentActive})).subscribe(function(l){l&&l.data&&l.data.forEach(function(l){n.userCourses[l.courseId]=l})})},n.prototype.unsubscribeCourse=function(n){var l=this;this.learnService.unSubscribeCourse(n).pipe(Object(P.a)(function(){return l.componentActive})).subscribe(function(e){for(var t in l.userCourses)t===n&&(l.userCourses[t]=void 0)},function(n){return l.errorService.handleError(n)})},n.prototype.setActiveLanguages=function(n){this.languages=n;var l=this.utilsService.getAllLanguage();this.languages.unshift(l),this.selectedLanguage=this.userService.getUserLearnLanguage(this.languages)},n.prototype.getDependables=function(){var n=this;this.utilsService.fetchDependables({lan:this.userService.user.main.lan,component:"CoursesComponent",getTranslations:!0,getLanguages:!0}).pipe(Object(P.a)(function(){return n.componentActive})).subscribe(function(l){n.text=n.utilsService.getTranslatedText(l.translations),n.setActiveLanguages(l.courseLanguages),n.utilsService.setPageTitle(n.text,"Courses"),n.getCourses(),n.isReady=!0})},n.prototype.ngOnDestroy=function(){this.componentActive=!1},n}(),O=t["\u0275crt"]({encapsulation:0,styles:[o.a],data:{}});function L(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-course-summary",[],null,[[null,"unsubscribe"]],function(n,l,e){var t=!0;return"unsubscribe"===l&&(t=!1!==n.component.onUnsubscribe(e)&&t),t},s.b,s.a)),t["\u0275did"](1,245760,null,0,r.a,[a.l,c.a,d.a,p.a,f.a,h.a,g.a],{course:[0,"course"],text:[1,"text"],tpe:[2,"tpe"]},{unsubscribe:"unsubscribe"})],function(n,l){var e=l.component;n(l,1,0,l.parent.context.$implicit,e.text,null!=e.userCourses[l.parent.context.$implicit._id]&&e.userCourses[l.parent.context.$implicit._id].subscribed?e.listType.Learn:e.listType.All)},null)}function E(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"li",[],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,L)),t["\u0275did"](2,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,2,0,"all"===e.courseTpe||!(null==e.userCourses[l.context.$implicit._id]||!e.userCourses[l.context.$implicit._id].subscribed))},null)}function M(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,6,"div",[],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"km-info-msg",[],null,null,null,v.b,v.a)),t["\u0275did"](2,49152,null,0,x.a,[],{msg:[0,"msg"]},null),(n()(),t["\u0275eld"](3,0,null,null,3,"div",[["class","panel panel-default"]],null,null,null,null,null)),(n()(),t["\u0275eld"](4,0,null,null,2,"div",[["class","panel-body"]],null,null,null,null,null)),(n()(),t["\u0275eld"](5,0,null,null,1,"button",[["class","btn btn-primary"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onNewCourse()&&t),t},null,null)),(n()(),t["\u0275ted"](6,null,[" "," "]))],function(n,l){n(l,2,0,l.component.text.Nocourses)},function(n,l){n(l,6,0,l.component.text.Newcourselg)})}function A(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,5,"div",[],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,2,"ul",[["class","list-unstyled"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,E)),t["\u0275did"](3,802816,null,0,m.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,M)),t["\u0275did"](5,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,3,0,e.allCourses),n(l,5,0,!(null!=e.allCourses&&e.allCourses.length)&&"all"===e.courseTpe)},null)}function _(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-loader",[],null,null,null,C.b,C.a)),t["\u0275did"](1,114688,null,0,w.a,[],{msg:[0,"msg"]},null)],function(n,l){n(l,1,0,l.component.text.LoadingCourses)},null)}function V(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,16,"section",[],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,3,"div",[["class","form-group form-group-lg"]],null,null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,2,"div",[["class","col-xs-8 selector"]],null,null,null,null,null)),(n()(),t["\u0275eld"](3,0,null,null,1,"km-language-selector",[],null,[[null,"languageSelected"],["document","click"]],function(n,l,e){var u=!0,i=n.component;return"document:click"===l&&(u=!1!==t["\u0275nov"](n,4).clickout(e)&&u),"languageSelected"===l&&(u=!1!==i.onLanguageSelected(e)&&u),u},y.b,y.a)),t["\u0275did"](4,573440,null,0,b.a,[t.ElementRef],{languages:[0,"languages"],currentLanguage:[1,"currentLanguage"],text:[2,"text"]},{languageSelected:"languageSelected"}),(n()(),t["\u0275eld"](5,0,null,null,6,"div",[["class","form-group form-group-lg"]],null,null,null,null,null)),(n()(),t["\u0275eld"](6,0,null,null,5,"div",[["class","col-xs-4 selector tpe-selector"]],null,null,null,null,null)),(n()(),t["\u0275eld"](7,0,null,null,4,"select",[["class","form-control"]],null,[[null,"change"]],function(n,l,e){var t=!0;return"change"===l&&(t=!1!==n.component.onChangeCourseType(e.target.value)&&t),t},null,null)),(n()(),t["\u0275eld"](8,0,null,null,1,"option",[["value","all"]],null,null,null,null,null)),(n()(),t["\u0275ted"](9,null,["",""])),(n()(),t["\u0275eld"](10,0,null,null,1,"option",[["value","my"]],null,null,null,null,null)),(n()(),t["\u0275ted"](11,null,["",""])),(n()(),t["\u0275eld"](12,0,null,null,0,"div",[["class","clearfix"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,A)),t["\u0275did"](14,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,_)),t["\u0275did"](16,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,4,0,e.languages,e.selectedLanguage,e.text),n(l,14,0,e.allCoursesReady&&(null==e.allCourses?null:e.allCourses.length)),n(l,16,0,e.isLoading&&!e.isError)},function(n,l){var e=l.component;n(l,9,0,e.text.Courses),n(l,11,0,e.text.MyCourses)})}function q(n){return t["\u0275vid"](0,[(n()(),t["\u0275and"](16777216,null,null,1,null,V)),t["\u0275did"](1,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){n(l,1,0,l.component.isReady)},null)}var W=t["\u0275ccf"]("ng-component",N,function(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,q,O)),t["\u0275did"](1,245760,null,0,N,[a.l,k,g.a,p.a,c.a],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),j=function(){},F=t["\u0275crt"]({encapsulation:0,styles:[".signup[_ngcontent-%COMP%] {font-size: 22px;}"],data:{}});function $(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,5,"span",[["class","signup"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,3,"a",[["routerLink","/auth/signup"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(n,l,e){var u=!0;return"click"===l&&(u=!1!==t["\u0275nov"](n,2).onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)&&u),u},null,null)),t["\u0275did"](2,671744,null,0,a.n,[a.l,a.a,m.LocationStrategy],{queryParams:[0,"queryParams"],routerLink:[1,"routerLink"]},null),t["\u0275pod"](3,{courseId:0}),(n()(),t["\u0275ted"](4,null,[" ",""])),(n()(),t["\u0275ted"](5,null,[" ","! "]))],function(n,l){n(l,2,0,n(l,3,0,l.component.courseId),"/auth/signup")},function(n,l){var e=l.component;n(l,1,0,t["\u0275nov"](l,2).target,t["\u0275nov"](l,2).href),n(l,4,0,e.text.SignupAction),n(l,5,0,e.text.ToSeeResults)})}var K=["section[_ngcontent-%COMP%]{background-color:#fff}.panel[_ngcontent-%COMP%]{background-color:inherit}.centerpanel[_ngcontent-%COMP%]{margin:0 auto;width:100%;min-width:300px;padding-bottom:20px}.center[_ngcontent-%COMP%]{text-align:center}.card[_ngcontent-%COMP%]{border:1px solid #999;box-shadow:2px 2px 2px #ccc;border-radius:12px;padding:20px;margin:20px 0;background-color:#fff}.preview[_ngcontent-%COMP%]{background-color:#fbfaf1;border-color:#dcca53}.bullets[_ngcontent-%COMP%]{color:grey;font-size:18px;margin-top:8px;height:26px}.bullets[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 1px}.green[_ngcontent-%COMP%]{color:green}.red[_ngcontent-%COMP%]{color:red}.actions[_ngcontent-%COMP%]{margin-top:2px}.audio[_ngcontent-%COMP%]{margin-top:4px}.audio[_ngcontent-%COMP%] .fa{font-size:40px;color:#333}.wordinfo[_ngcontent-%COMP%]{margin-left:44px}.wordinfo[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:100%}.next.btn-default[_ngcontent-%COMP%]{color:#ccc}.image[_ngcontent-%COMP%]{float:left;margin-right:16px}.image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:1px solid #333;width:168px;height:140px;border-radius:16px}.btn[_ngcontent-%COMP%]{margin-top:2px}.case[_ngcontent-%COMP%], .new[_ngcontent-%COMP%]{border:1px solid #ff5b00;border-radius:4px;padding:0 4px;color:#fff;background-color:#f0ad4e;font-weight:700;font-size:16px}.new[_ngcontent-%COMP%]{border:1px solid #006400;background-color:#8fbc8f}.alts[_ngcontent-%COMP%]{font-size:20px;margin-left:42px}.nomore[_ngcontent-%COMP%]{margin-bottom:60px}.imagepadding[_ngcontent-%COMP%]{margin-left:184px}km-completed-list[_ngcontent-%COMP%]{display:block;margin-top:15px}.main-card[_ngcontent-%COMP%]{background:linear-gradient(90deg,#efefef ,#fff)}.intro-next-button[_ngcontent-%COMP%], .signup[_ngcontent-%COMP%]{margin-top:15px}"],B=e("wS7l"),U=e("Pc2u"),z=function(){function n(n,l,e){this.learnService=n,this.previewService=l,this.errorService=e,this.stepCompleted=new t.EventEmitter,this.componentActive=!0}return n.prototype.ngOnInit=function(){this.previewService.loadAudioButtonScript(),this.init(),this.checkLessonChanged()},n.prototype.onContinue=function(){this.stepCompleted.emit()},n.prototype.init=function(){this.checkNextStep(),this.loadIntro()},n.prototype.checkNextStep=function(){if(this.steps){var n=this.steps.filter(function(n){return n.level===T.c.Lesson});if("intro"===n[n.length-1].name)this.buttonText="ToNextLesson";else switch(this.steps[2].name){case"dialogue":this.buttonText="GoTo"+this.lesson.dialogue.tpe;break;case"study":this.buttonText="StartStudy";break;default:this.buttonText="GoToPractise"}}},n.prototype.checkLessonChanged=function(){var n=this;this.lessonChanged.pipe(Object(P.a)(function(){return n.componentActive})).subscribe(function(l){n.lesson=l,n.init(),window.scroll(0,0)})},n.prototype.loadIntro=function(){var n=this;this.learnService.fetchIntro(this.lesson._id).pipe(Object(P.a)(function(){return n.componentActive})).subscribe(function(l){return n.intro=l},function(l){return n.errorService.handleError(l)})},n.prototype.ngOnDestroy=function(){this.componentActive=!1},n}(),G=t["\u0275crt"]({encapsulation:0,styles:[K],data:{}});function Q(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function H(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function J(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"button",[["class","btn btn-success intro-next-button"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onContinue()&&t),t},null,null)),(n()(),t["\u0275eld"](1,0,null,null,0,"span",[["class","fa fa-arrow-right fa-spacing"]],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,[""," "]))],null,function(n,l){var e=l.component;n(l,2,0,e.text[e.buttonText])})}function X(n){return t["\u0275vid"](0,[(n()(),t["\u0275and"](16777216,null,null,1,null,J)),t["\u0275did"](1,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](0,null,null,0))],function(n,l){n(l,1,0,l.component.buttonText)},null)}function Z(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,6,"section",[["style","padding: 12px;"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Q)),t["\u0275did"](2,540672,null,0,m.NgTemplateOutlet,[t.ViewContainerRef],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(n()(),t["\u0275eld"](3,0,null,null,1,"km-intro",[],null,null,null,B.b,B.a)),t["\u0275did"](4,49152,null,0,U.a,[],{html:[0,"html"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,H)),t["\u0275did"](6,540672,null,0,m.NgTemplateOutlet,[t.ViewContainerRef],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(n()(),t["\u0275and"](0,[["buttonTemplate",2]],null,0,null,X))],function(n,l){var e=l.component;n(l,2,0,t["\u0275nov"](l,7)),n(l,4,0,null==e.intro?null:e.intro.html),n(l,6,0,t["\u0275nov"](l,7))},null)}var Y=e("2hG8"),nn=e("o9qV"),ln=function(){function n(n,l){this.learnService=n,this.errorService=l,this.stepCompleted=new t.EventEmitter,this.componentActive=!0,this.buttonText=""}return n.prototype.ngOnInit=function(){this.init(),this.checkLessonChanged()},n.prototype.onContinue=function(){this.stepCompleted.emit()},n.prototype.init=function(){this.checkNextStep()},n.prototype.checkNextStep=function(){if(this.steps){var n=this.steps.filter(function(n){return n.level===T.c.Lesson});this.buttonText="dialogue"===n[n.length-1].name?"ToNextLesson":"study"===this.steps[1+("dialogue"===this.steps[1].name?1:2)].name?"StartStudy":"GoToPractise"}},n.prototype.checkLessonChanged=function(){var n=this;this.lessonChanged.pipe(Object(P.a)(function(){return n.componentActive})).subscribe(function(l){n.lesson=l,n.init(),window.scroll(0,0)})},n.prototype.ngOnDestroy=function(){this.componentActive=!1},n}(),en=t["\u0275crt"]({encapsulation:0,styles:[K],data:{}});function tn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"button",[["class","btn btn-success"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onContinue()&&t),t},null,null)),(n()(),t["\u0275ted"](1,null,[" "," "]))],null,function(n,l){var e=l.component;n(l,1,0,e.text[e.buttonText])})}function un(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,4,"section",[["style","padding: 12px;"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"km-dialogue",[],null,null,null,Y.b,Y.a)),t["\u0275did"](2,49152,null,0,nn.a,[],{dialogue:[0,"dialogue"],languagePair:[1,"languagePair"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,tn)),t["\u0275did"](4,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,2,0,e.lesson.dialogue,e.lanPair),n(l,4,0,e.buttonText)},null)}var on=e("Fuuz"),sn=e("Wu/H"),rn=function(){function n(){this.exercises=[],this.slice=!0,this.componentActive=!0}return n.prototype.ngOnInit=function(){this.exerciseBullets=this.exercises,this.checkBulletsUpdated()},n.prototype.sliceExercises=function(n){this.slice&&this.exercises&&this.exercises.length>0&&(this.exerciseBullets=this.exercises.slice(0,n+1))},n.prototype.checkBulletsUpdated=function(){var n=this;this.onNextExercise.pipe(Object(P.a)(function(){return n.componentActive})).subscribe(function(l){n.sliceExercises(l),n.countDifferentExercises()})},n.prototype.countDifferentExercises=function(){this.exercises&&(this.toGo=this.exercises.filter(function(n){return!1===n.data.isDone}).length)},n.prototype.ngOnDestroy=function(){this.componentActive=!1},n}(),an=t["\u0275crt"]({encapsulation:0,styles:[[".bullets[_ngcontent-%COMP%]{color:grey;font-size:18px;margin-top:8px;height:26px}.bullets[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 1px}.bullets[_ngcontent-%COMP%]   span.fix[_ngcontent-%COMP%]{margin-left:-3px}.togo[_ngcontent-%COMP%]{font-size:16px;top:-1px;position:relative}"]],data:{}});function cn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"span",[["class","fa"]],null,null,null,null,null)),t["\u0275did"](1,278528,null,0,m.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](2,{"fa-square-o":0,"fa-square":1,green:2,yellow:3,orange:4,red:5})],function(n,l){n(l,1,0,"fa",n(l,2,0,!l.context.$implicit.data.isDone,l.context.$implicit.data.isDone,l.context.$implicit.result||l.context.$implicit.data.isDone&&l.context.$implicit.data.isCorrect&&!l.context.$implicit.data.isAlt,l.context.$implicit.data.isDone&&l.context.$implicit.data.isCorrect&&l.context.$implicit.data.isAlt,l.context.$implicit.data.isDone&&!l.context.$implicit.data.isCorrect&&l.context.$implicit.data.isAlmostCorrect,l.context.$implicit.data.isDone&&!l.context.$implicit.data.isCorrect&&!l.context.$implicit.data.isAlmostCorrect))},null)}function dn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),t["\u0275ted"](1,null,["",""]))],null,function(n,l){n(l,1,0,l.component.text.toGo)})}function pn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,6,"div",[["class","bullets"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,cn)),t["\u0275did"](2,802816,null,0,m.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),t["\u0275eld"](3,0,null,null,3,"span",[["class","togo"]],null,null,null,null,null)),(n()(),t["\u0275ted"](4,null,[" "," "])),(n()(),t["\u0275and"](16777216,null,null,1,null,dn)),t["\u0275did"](6,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,2,0,e.exerciseBullets),n(l,6,0,e.toGo>0)},function(n,l){n(l,4,0,l.component.toGo)})}var fn=e("io3w"),hn=e("wKLs"),gn=function(){function n(){this.total=0,this.points=0,this.correct=0}return n.prototype.ngOnInit=function(){var n=this;this.data.forEach(function(l){l.data&&l.data.points&&(n.points+=l.data.points.totalmincorrect(),n.correct+=l.data.points.correct)}),this.total=this.points+this.correct},n}(),mn=t["\u0275crt"]({encapsulation:0,styles:[[".points[_ngcontent-%COMP%]{font-size:20px;margin-left:-15px}.nr[_ngcontent-%COMP%]{background-color:#fff}.total[_ngcontent-%COMP%]{border:1px solid #000;margin:-8px;padding:7px}.table[_ngcontent-%COMP%]{margin-bottom:0}"]],data:{}});function vn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,23,"div",[["class","panel panel-info"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,2,"div",[["class","panel-heading"]],null,null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,1,"h3",[["class","panel-title "]],null,null,null,null,null)),(n()(),t["\u0275ted"](3,null,[" "," "])),(n()(),t["\u0275eld"](4,0,null,null,19,"div",[["class","panel-body"]],null,null,null,null,null)),(n()(),t["\u0275eld"](5,0,null,null,18,"div",[["class","points col-xs-6"]],null,null,null,null,null)),(n()(),t["\u0275eld"](6,0,null,null,17,"table",[["class","table table-bordered"]],null,null,null,null,null)),(n()(),t["\u0275eld"](7,0,null,null,16,"tbody",[],null,null,null,null,null)),(n()(),t["\u0275eld"](8,0,null,null,4,"tr",[],null,null,null,null,null)),(n()(),t["\u0275eld"](9,0,null,null,1,"td",[],null,null,null,null,null)),(n()(),t["\u0275ted"](10,null,["",""])),(n()(),t["\u0275eld"](11,0,null,null,1,"td",[["class","text-right nr"]],null,null,null,null,null)),(n()(),t["\u0275ted"](12,null,["",""])),(n()(),t["\u0275eld"](13,0,null,null,4,"tr",[],null,null,null,null,null)),(n()(),t["\u0275eld"](14,0,null,null,1,"td",[],null,null,null,null,null)),(n()(),t["\u0275ted"](15,null,["",""])),(n()(),t["\u0275eld"](16,0,null,null,1,"td",[["class","text-right nr"]],null,null,null,null,null)),(n()(),t["\u0275ted"](17,null,["",""])),(n()(),t["\u0275eld"](18,0,null,null,5,"tr",[["class","success"]],null,null,null,null,null)),(n()(),t["\u0275eld"](19,0,null,null,1,"td",[],null,null,null,null,null)),(n()(),t["\u0275ted"](20,null,["",""])),(n()(),t["\u0275eld"](21,0,null,null,2,"td",[["class","text-right nr"]],null,null,null,null,null)),(n()(),t["\u0275eld"](22,0,null,null,1,"div",[["class","total"]],null,null,null,null,null)),(n()(),t["\u0275ted"](23,null,[" "," "]))],null,function(n,l){var e=l.component;n(l,3,0,e.text.PointsEarned),n(l,10,0,e.text.Words),n(l,12,0,e.points),n(l,15,0,e.text.Bonus),n(l,17,0,e.correct),n(l,20,0,e.text.Total),n(l,23,0,e.total)})}var xn=["[_nghost-%COMP%]{font-size:16px!important}.local[_ngcontent-%COMP%]{padding-left:15px;font-size:16px;font-style:italic;color:#999}.item[_ngcontent-%COMP%]{border:1px dotted #999;border-top:none;padding:4px 0;margin:0}.header[_ngcontent-%COMP%]:hover{background-color:inherit}.header[_ngcontent-%COMP%]{font-weight:700;border-left:none;border-right:none}.icons[_ngcontent-%COMP%]{padding-left:6px;padding-right:0}.icons[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{width:18px}.fa-bookmark[_ngcontent-%COMP%], .fa-bookmark-o[_ngcontent-%COMP%], .fa-check[_ngcontent-%COMP%]{color:green}.fa-fire[_ngcontent-%COMP%], .fa-repeat[_ngcontent-%COMP%]{font-size:14px}.fa-fire[_ngcontent-%COMP%]{color:#f39c11}.fa-repeat[_ngcontent-%COMP%]{color:#efc10f}.fa-square[_ngcontent-%COMP%]{margin-right:1px}.learn-progress[_ngcontent-%COMP%]{font-size:12px;position:relative;top:-2px}.register[_ngcontent-%COMP%]{color:#999;font-style:italic}.index[_ngcontent-%COMP%]{font-size:12px;color:grey}.data-row[_ngcontent-%COMP%]:hover{background-color:#d8f8fd}"],Cn=e("4sBp"),wn=e("OwiE"),yn=e("I4iG"),bn=function(){function n(n){this.learnService=n,this.isRepeat=!1,this.results=[],this.noResults=!1,this.exType=S.c}return n.prototype.ngOnInit=function(){var n,l=this;this.data.forEach(function(e){e.data.isDone&&((n=l.results.find(function(n){return n.exercise.exercise._id===e.exercise._id&&n.exercise.exercise.lessonId===e.exercise.lessonId}))?(JSON.parse(JSON.stringify(n.exercise.data)),n.isCorrect=!!e.data.isCorrect&&n.isCorrect,n.isAlt=!!e.data.isAlt||n.isAlt,n.isAlmostCorrect=!(!e.data.isCorrect||!e.data.isAlmostCorrect&&!n.isAlmostCorrect),n.points+=e.data.points.totalmincorrect(),n.streak+=e.data.isCorrect?"1":e.data.isAlmostCorrect?"2":"0",n.tpe=e.exercise.tpe,n.isLearned=e.data.learnLevel>=h.d&&"Practise"===l.step||n.isLearned):(n={exercise:e,isCorrect:e.data.isCorrect,isAlt:e.data.isAlt,isAlmostCorrect:e.data.isAlmostCorrect,points:e.data.points.totalmincorrect(),streak:e.data.isCorrect?"1":e.data.isAlmostCorrect?"2":"0",tpe:e.exercise.tpe,isLearned:e.data.learnLevel>=h.d&&"Practise"===l.step},l.results.push(n)))}),0===this.results.length&&(this.noResults=!0)},n.prototype.showStep=function(){return"Study"===this.step?"":" - "+this.text[this.step]},n.prototype.getForeignWord=function(n){return this.learnService.showFilteredWord(n.exercise.exercise.foreign.word,n.tpe)},n}(),Sn=t["\u0275crt"]({encapsulation:0,styles:[xn,[".list[_ngcontent-%COMP%]{margin-left:12px;font-size:20px;line-height:32px}.studiedLocal[_ngcontent-%COMP%]{color:#999}.fa-check[_ngcontent-%COMP%]{color:green}"]],data:{}});function In(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),t["\u0275ted"](1,null,["(",")"]))],null,function(n,l){n(l,1,0,l.component.text.Repeat)})}function Dn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,16777216,null,null,1,"span",[["class","fa fa-check"]],null,[[null,"focusin"],[null,"mouseenter"],[null,"focusout"],[null,"mouseleave"]],function(n,l,e){var u=!0;return"focusin"===l&&(u=!1!==t["\u0275nov"](n,1).show()&&u),"mouseenter"===l&&(u=!1!==t["\u0275nov"](n,1).show()&&u),"focusout"===l&&(u=!1!==t["\u0275nov"](n,1).hide()&&u),"mouseleave"===l&&(u=!1!==t["\u0275nov"](n,1).hide()&&u),u},null,null)),t["\u0275did"](1,16384,null,0,Cn.Tooltip,[t.ViewContainerRef,t.ComponentFactoryResolver],{content:[0,"content"]},null),(n()(),t["\u0275and"](0,null,null,0))],function(n,l){n(l,1,0,l.component.text.iWordLearned)},null)}function Rn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,3,"span",[],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,2,"span",[["class","fa fa-square"]],[[4,"opacity",null]],null,null,null,null)),t["\u0275did"](2,278528,null,0,m.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](3,{green:0,red:1,orange:2})],function(n,l){n(l,2,0,"fa fa-square",n(l,3,0,"1"===l.context.$implicit,"0"===l.context.$implicit,"2"===l.context.$implicit))},function(n,l){n(l,1,0,1-((null==l.parent.context.$implicit.streak?null:l.parent.context.$implicit.streak.slice(-10).length)-l.context.index-1)/20)})}function kn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,19,"div",[["class","row item"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,5,"div",[["class","col-xs-1"]],null,null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,2,"span",[["class","fa fa-circle"]],null,null,null,null,null)),t["\u0275did"](3,278528,null,0,m.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](4,{green:0,yellow:1,orange:2,red:3}),(n()(),t["\u0275and"](16777216,null,null,1,null,Dn)),t["\u0275did"](6,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](7,0,null,null,2,"div",[["class","col-xs-1 icons"]],null,null,null,null,null)),(n()(),t["\u0275eld"](8,0,null,null,1,"km-type-icons",[],null,null,null,wn.b,wn.a)),t["\u0275did"](9,49152,null,0,yn.a,[],{tpe:[0,"tpe"],text:[1,"text"]},null),(n()(),t["\u0275eld"](10,0,null,null,4,"div",[["class","col-xs-6"]],null,null,null,null,null)),(n()(),t["\u0275eld"](11,0,null,null,1,"span",[["class","word"]],null,null,null,null,null)),(n()(),t["\u0275ted"](12,null,["",""])),(n()(),t["\u0275eld"](13,0,null,null,1,"span",[["class","word local"]],null,null,null,null,null)),(n()(),t["\u0275ted"](14,null,["",""])),(n()(),t["\u0275eld"](15,0,null,null,2,"div",[["class","col-xs-3"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Rn)),t["\u0275did"](17,802816,null,0,m.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),t["\u0275eld"](18,0,null,null,1,"div",[["class","col-xs-1 text-right"]],null,null,null,null,null)),(n()(),t["\u0275ted"](19,null,[" "," "]))],function(n,l){var e=l.component;n(l,3,0,"fa fa-circle",n(l,4,0,l.context.$implicit.isCorrect&&!l.context.$implicit.isAlt,l.context.$implicit.isCorrect&&l.context.$implicit.isAlt,!l.context.$implicit.isCorrect&&l.context.$implicit.isAlmostCorrect,!l.context.$implicit.isCorrect&&!l.context.$implicit.isAlmostCorrect)),n(l,6,0,l.context.$implicit.isLearned&&l.context.$implicit.tpe===e.exType.Word),n(l,9,0,l.context.$implicit.tpe,e.text),n(l,17,0,null==l.context.$implicit.streak?null:l.context.$implicit.streak.slice(-10).split(""))},function(n,l){n(l,12,0,l.component.getForeignWord(l.context.$implicit)),n(l,14,0,l.context.$implicit.exercise.exercise.local.word),n(l,19,0,l.context.$implicit.points)})}function Tn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,10,"div",[["class","list"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,7,"div",[["class","row header item"]],null,null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,0,"div",[["class","col-xs-2"]],null,null,null,null,null)),(n()(),t["\u0275eld"](3,0,null,null,1,"div",[["class","col-xs-6"]],null,null,null,null,null)),(n()(),t["\u0275ted"](4,null,[" "," "])),(n()(),t["\u0275eld"](5,0,null,null,1,"div",[["class","col-xs-3"]],null,null,null,null,null)),(n()(),t["\u0275ted"](6,null,[" "," "])),(n()(),t["\u0275eld"](7,0,null,null,1,"div",[["class","col-xs-1 text-right"]],null,null,null,null,null)),(n()(),t["\u0275ted"](8,null,[" "," "])),(n()(),t["\u0275and"](16777216,null,null,1,null,kn)),t["\u0275did"](10,802816,null,0,m.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,l){n(l,10,0,l.component.results)},function(n,l){var e=l.component;n(l,4,0,e.text.Exercise),n(l,6,0,e.text.Result),n(l,8,0,e.text.Points)})}function Pn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"div",[["class","list"]],null,null,null,null,null)),(n()(),t["\u0275ted"](1,null,[" ",". "]))],null,function(n,l){n(l,1,0,l.component.text.NoWordsLearned)})}function Nn(n){return t["\u0275vid"](0,[(n()(),t["\u0275and"](16777216,null,null,1,null,Pn)),t["\u0275did"](1,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](0,null,null,0))],function(n,l){n(l,1,0,l.component.noResults)},null)}function On(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,8,"div",[["class","panel panel-info"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,4,"div",[["class","panel-heading"]],null,null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,3,"h3",[["class","panel-title"]],null,null,null,null,null)),(n()(),t["\u0275ted"](3,null,[" "," "," "])),(n()(),t["\u0275and"](16777216,null,null,1,null,In)),t["\u0275did"](5,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](6,0,null,null,2,"div",[["class","panel-body"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Tn)),t["\u0275did"](8,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(n()(),t["\u0275and"](0,[["noresults",2]],null,0,null,Nn))],function(n,l){var e=l.component;n(l,5,0,e.isRepeat),n(l,8,0,!e.noResults,t["\u0275nov"](l,9))},function(n,l){var e=l.component;n(l,3,0,e.title,e.showStep())})}var Ln=function(){function n(){this.componentActive=!0,this.points=0}return n.prototype.ngOnInit=function(){var n=this;this.pointsEarned.pipe(Object(P.a)(function(){return n.componentActive})).subscribe(function(l){n.points=l})},n.prototype.ngOnDestroy=function(){this.componentActive=!1},n}(),En=t["\u0275crt"]({encapsulation:0,styles:[[".pointswrapper[_ngcontent-%COMP%]{margin:0 auto;width:180px}.points[_ngcontent-%COMP%]{font-size:48px;margin-right:20px;display:none;height:90px;width:90px;line-height:90px;border-radius:50%;background-color:green;color:#fff;text-align:center;float:right}.plus[_ngcontent-%COMP%]{background-color:inherit;color:green;font-size:48px;width:32px;margin-right:0}.added[_ngcontent-%COMP%]{display:block;-webkit-animation:.5s ease-out forwards bump;animation:.5s ease-out forwards bump}.addedplus[_ngcontent-%COMP%]{display:block;-webkit-animation:.5s ease-out forwards bumpplus;animation:.5s ease-out forwards bumpplus}@-webkit-keyframes bump{0%{font-size:24px;line-height:45px;height:45px;width:45px}90%{font-size:60px;line-height:110px;height:110px;width:110px}100%{font-size:48px;line-height:90px;height:90px;width:90px}}@keyframes bump{0%{font-size:24px;line-height:45px;height:45px;width:45px}90%{font-size:60px;line-height:110px;height:110px;width:110px}100%{font-size:48px;line-height:90px;height:90px;width:90px}}@-webkit-keyframes bumpplus{0%{font-size:24px}90%{font-size:60px}100%{font-size:48px}}@keyframes bumpplus{0%{font-size:24px}90%{font-size:60px}100%{font-size:48px}}"]],data:{}});function Mn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,4,"div",[["class","pointswrapper"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"div",[["class","points"]],[[2,"added",null]],null,null,null,null)),(n()(),t["\u0275ted"](2,null,[" "," "])),(n()(),t["\u0275eld"](3,0,null,null,1,"div",[["class","points plus"]],[[2,"addedplus",null]],null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["+"]))],null,function(n,l){var e=l.component;n(l,1,0,!!e.points),n(l,2,0,e.points),n(l,3,0,!!e.points)})}var An=function(){function n(){this.hasGenus=!1,this.isInput=!1,this.isActive=!0,this.updatedSettings=new t.EventEmitter}return n.prototype.onToggleAudio=function(){this.settings.mute=!this.settings.mute,this.settingsUpdated()},n.prototype.onToggleColor=function(){this.hasGenus&&(this.settings.color=!this.settings.color,this.settingsUpdated())},n.prototype.onToggleKeyboard=function(){this.isInput&&(this.settings.keyboard=!this.settings.keyboard,this.settingsUpdated())},n.prototype.onNextDelay=function(){this.settings.delay=(this.settings.delay+1)%11,4===this.settings.delay&&(this.settings.delay=5),this.settings.delay>5&&(this.settings.delay=10),this.settingsUpdated()},n.prototype.settingsUpdated=function(){this.updatedSettings.emit(this.settings)},n}(),_n=t["\u0275crt"]({encapsulation:0,styles:[['.settings[_ngcontent-%COMP%]{font-size:20px;margin-top:9px;height:26px;color:#666}.settings[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:24px;padding:0 2px;cursor:pointer;text-align:center}.settings[_ngcontent-%COMP%]   .on[_ngcontent-%COMP%]{color:#428bca}.settings[_ngcontent-%COMP%]   .inactive[_ngcontent-%COMP%]{color:#ccc;cursor:initial}.slashed[_ngcontent-%COMP%]{position:relative;top:-24px;left:7px;pointer-events:none}.slashed[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;width:24px}.slashed[_ngcontent-%COMP%]   .off[_ngcontent-%COMP%]:before{content:"\u2571";display:block;color:#333;font-weight:700}']],data:{}});function Vn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,16777216,null,null,2,"span",[],[[2,"on",null]],[[null,"click"],[null,"focusin"],[null,"mouseenter"],[null,"focusout"],[null,"mouseleave"]],function(n,l,e){var u=!0,i=n.component;return"focusin"===l&&(u=!1!==t["\u0275nov"](n,1).show()&&u),"mouseenter"===l&&(u=!1!==t["\u0275nov"](n,1).show()&&u),"focusout"===l&&(u=!1!==t["\u0275nov"](n,1).hide()&&u),"mouseleave"===l&&(u=!1!==t["\u0275nov"](n,1).hide()&&u),"click"===l&&(u=!1!==i.onNextDelay()&&u),u},null,null)),t["\u0275did"](1,16384,null,0,Cn.Tooltip,[t.ViewContainerRef,t.ComponentFactoryResolver],{content:[0,"content"]},null),(n()(),t["\u0275ted"](2,null,[" ","s "])),(n()(),t["\u0275and"](0,null,null,0))],function(n,l){n(l,1,0,l.component.text.iSecsTranslation)},function(n,l){var e=l.component;n(l,0,0,e.settings.delay),n(l,2,0,e.settings.delay)})}function qn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,10,"span",[],null,null,null,null,null)),(n()(),t["\u0275eld"](1,16777216,null,null,3,"span",[["class","fa "]],null,[[null,"click"],[null,"focusin"],[null,"mouseenter"],[null,"focusout"],[null,"mouseleave"]],function(n,l,e){var u=!0,i=n.component;return"focusin"===l&&(u=!1!==t["\u0275nov"](n,4).show()&&u),"mouseenter"===l&&(u=!1!==t["\u0275nov"](n,4).show()&&u),"focusout"===l&&(u=!1!==t["\u0275nov"](n,4).hide()&&u),"mouseleave"===l&&(u=!1!==t["\u0275nov"](n,4).hide()&&u),"click"===l&&(u=!1!==i.onToggleAudio()&&u),u},null,null)),t["\u0275did"](2,278528,null,0,m.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](3,{"fa-volume-up":0,"fa-volume-off":1,on:2}),t["\u0275did"](4,16384,null,0,Cn.Tooltip,[t.ViewContainerRef,t.ComponentFactoryResolver],{content:[0,"content"]},null),(n()(),t["\u0275eld"](5,16777216,null,null,1,"span",[["class","fa fa-tint"]],[[2,"on",null],[2,"inactive",null]],[[null,"click"],[null,"focusin"],[null,"mouseenter"],[null,"focusout"],[null,"mouseleave"]],function(n,l,e){var u=!0,i=n.component;return"focusin"===l&&(u=!1!==t["\u0275nov"](n,6).show()&&u),"mouseenter"===l&&(u=!1!==t["\u0275nov"](n,6).show()&&u),"focusout"===l&&(u=!1!==t["\u0275nov"](n,6).hide()&&u),"mouseleave"===l&&(u=!1!==t["\u0275nov"](n,6).hide()&&u),"click"===l&&(u=!1!==i.onToggleColor()&&u),u},null,null)),t["\u0275did"](6,16384,null,0,Cn.Tooltip,[t.ViewContainerRef,t.ComponentFactoryResolver],{content:[0,"content"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Vn)),t["\u0275did"](8,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](9,16777216,null,null,1,"span",[["class","fa fa-keyboard-o"]],[[2,"on",null],[2,"inactive",null]],[[null,"click"],[null,"focusin"],[null,"mouseenter"],[null,"focusout"],[null,"mouseleave"]],function(n,l,e){var u=!0,i=n.component;return"focusin"===l&&(u=!1!==t["\u0275nov"](n,10).show()&&u),"mouseenter"===l&&(u=!1!==t["\u0275nov"](n,10).show()&&u),"focusout"===l&&(u=!1!==t["\u0275nov"](n,10).hide()&&u),"mouseleave"===l&&(u=!1!==t["\u0275nov"](n,10).hide()&&u),"click"===l&&(u=!1!==i.onToggleKeyboard()&&u),u},null,null)),t["\u0275did"](10,16384,null,0,Cn.Tooltip,[t.ViewContainerRef,t.ComponentFactoryResolver],{content:[0,"content"]},null)],function(n,l){var e=l.component;n(l,2,0,"fa ",n(l,3,0,!e.settings.mute,e.settings.mute,!e.settings.mute)),n(l,4,0,e.text.iMute),n(l,6,0,e.text.iGenusColor),n(l,8,0,"study"===e.step),n(l,10,0,e.text.iVirtualKeyboard)},function(n,l){var e=l.component;n(l,5,0,e.settings.color,!e.hasGenus),n(l,9,0,e.settings.keyboard,!e.isInput)})}function Wn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","settings"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,qn)),t["\u0275did"](2,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](3,0,null,null,3,"div",[["class","slashed"]],null,null,null,null,null)),(n()(),t["\u0275eld"](4,0,null,null,0,"span",[],[[2,"off",null]],null,null,null,null)),(n()(),t["\u0275eld"](5,0,null,null,0,"span",[],[[2,"off",null]],null,null,null,null)),(n()(),t["\u0275eld"](6,0,null,null,0,"span",[],[[2,"off",null]],null,null,null,null))],function(n,l){n(l,2,0,l.component.isActive)},function(n,l){var e=l.component;n(l,4,0,e.settings.mute),n(l,5,0,!e.settings.color),n(l,6,0,!e.settings.delay)})}var jn=e("JU9P"),Fn=e("M6Em"),$n=e("rKNO"),Kn=e("gI3B"),Bn=e("26FU"),Un=e("K9Ia"),zn=function(){function n(n,l,e,u){this.learnService=n,this.previewService=l,this.errorService=e,this.sharedService=u,this.isDemo=!1,this.skipStep=new t.EventEmitter,this.stepCompleted=new t.EventEmitter,this.updatedSettings=new t.EventEmitter,this.componentActive=!0,this.dotLength=0,this.toStudy=0,this.current=-1,this.nextExercise=new Bn.a(0),this.isLoading=!1,this.isRehearsal=!1,this.isStudyDone=!1,this.hasMoreToStudy=!1,this.subscription=[],this.showLocal=!1,this.dotArr=[],this.pointsEarned=new Un.a,this.isReady=!1}return n.prototype.ngOnInit=function(){this.init(),this.checkExercisesInterrupted(),this.checkLessonChanged(),this.isMute=this.settings.mute},n.prototype.onCountDownFinished=function(){this.isCountDown=!1,this.finishCountDown()},n.prototype.onNextWord=function(n){this.nextWord(n)},n.prototype.onStudyNewWords=function(){this.current=-1,this.isStudyDone=!1,this.isReady=!1,this.getLessonResults()},n.prototype.onRehearseAll=function(){this.lesson.rehearseStep="study",this.rehearseAll()},n.prototype.onSkipConfirmed=function(n){n&&this.skip()},n.prototype.onToPractise=function(){this.skip()},n.prototype.onKeyPressed=function(n){"Enter"===n&&(this.isStudyDone?this.skip():this.nextWord(1))},n.prototype.onSettingsUpdated=function(n){this.settings=n,this.updatedSettings.emit(n)},n.prototype.getAlts=function(n,l){var e="";return l&&l[n]&&l[n].alt&&(e=l[n].alt.split("|").join(", ")),e},n.prototype.init=function(){this.courseId=this.lesson.courseId,this.isCountDown=!1,"study"===this.lesson.rehearseStep?this.rehearseAll():(this.isRehearsal=!1,this.getLessonResults())},n.prototype.finishCountDown=function(){this.sharedService.changeExerciseMode(!0),this.nextWord(1)},n.prototype.checkLessonChanged=function(){var n=this;this.lessonChanged.pipe(Object(P.a)(function(){return n.componentActive})).subscribe(function(l){n.lesson=l,n.init()})},n.prototype.nextWord=function(n){!this.showLocal&&this.current>-1?this.wordDone():this.isStudyDone||this.showNextWord(n)},n.prototype.showNextWord=function(n){this.pointsEarned.next(0),this.dotLength=1e3*this.settings.delay/200,this.dotArr=Array(this.dotLength).fill(0),this.current+=n,n>0?this.current>=this.exerciseData.length&&(this.studyDone(this.exerciseData.length),this.sharedService.changeExerciseMode(!1),this.stepCompleted.emit("study"===this.lesson.rehearseStep?null:this.exerciseData)):this.current<=-1&&(this.current=this.exerciseData.length-1),this.isStudyDone||(this.showLocal=!1,this.currentData=this.exerciseData[this.current],this.timeDelay())},n.prototype.wordDone=function(){if(!this.showLocal&&this.current>-1){this.showLocal=!0;var n=this.isRehearsal?0:2,l=this.exerciseData[this.current];l&&(l.data.isDone=!0,l.data.isCorrect=!0,l.data.points.base=0,l.result||(l.data.points.base=n,this.pointsEarned.next(n)))}this.nextExercise.next(this.current)},n.prototype.studyDone=function(n){this.hasMoreToStudy=this.toStudy-n>0,this.isStudyDone=!0},n.prototype.filterExercises=function(){return this.lesson.exercises.filter(function(n){return n.tpe===S.c.Word})},n.prototype.getRandomWordStart=function(n){var l,e=this.settings.nrOfWordsStudyRepeat||10;if(n.length>e){var t=Math.floor(Math.random()*n.length);return(l=(l=n.map(function(n){return n})).concat(l)).slice(t,t+e)}return n},n.prototype.getLessonResults=function(){this.isDemo?this.getNewQuestions(null):this.fetchLessonResults()},n.prototype.fetchLessonResults=function(){var n=this;this.isLoading=!0,this.learnService.fetchLessonStepResults(this.lesson._id,"study").pipe(Object(P.a)(function(){return n.componentActive})).subscribe(function(l){n.isLoading=!1,l&&n.getNewQuestions(l.count)},function(l){return n.errorService.handleError(l)})},n.prototype.getNewQuestions=function(n){var l=[],e=[];l=n?this.filterExercises().filter(function(l){return!n.find(function(n){return n.exerciseId===l._id})}):this.filterExercises();var t=this.learnService.getMaxExercises(l,this.settings.nrOfWordsStudy);this.toStudy=l.length,l.forEach(function(n){e.length<t&&e.push(n)}),e.length>0?this.buildExerciseData(e):this.isReady=!0},n.prototype.buildExerciseData=function(n){this.exerciseData=this.learnService.buildExerciseData(n,null,this.text,{isForeign:!0,isBidirectional:!1,direction:S.b.ForeignToLocal},this.lesson.options),this.lesson.exerciseSteps.study.ordered||(this.exerciseData=this.previewService.shuffle(this.exerciseData)),this.isCountDown=this.settings.countdown,this.isCountDown||this.finishCountDown(),this.isReady=!0},n.prototype.skip=function(){this.skipStep.emit()},n.prototype.rehearseAll=function(){this.current=-1,this.isStudyDone=!1,this.hasMoreToStudy=!1,this.isRehearsal=!0,this.isCountDown=!1;var n=this.filterExercises();n=this.lesson.exerciseSteps.study.ordered?this.getRandomWordStart(n):this.learnService.getRandomExercises(n,this.settings.nrOfWordsStudyRepeat||10),this.buildExerciseData(n),this.exerciseData.map(function(n){return n.data.isDone=!1})},n.prototype.timeDelay=function(){var n=this;if(this.settings.delay>0&&!this.showLocal){this.subscription.length>0&&this.subscription.forEach(function(n){return n.unsubscribe()});var l=Object(Kn.a)(1e3*this.settings.delay);this.subscription[0]=l.pipe(Object(P.a)(function(){return n.componentActive&&!n.showLocal})).subscribe(function(l){return n.wordDone()});var e=Object(Kn.a)(0,200);this.subscription[1]=e.pipe(Object(P.a)(function(){return n.componentActive&&n.dotLength>0})).subscribe(function(l){n.dotLength=n.dotLength-1,n.dotArr=n.dotArr.slice(0,n.dotLength)})}else this.wordDone()},n.prototype.checkExercisesInterrupted=function(){var n=this;this.exercisesInterrupted.pipe(Object(P.a)(function(){return n.componentActive})).subscribe(function(l){var e=0;n.isRehearsal||(e=n.current,n.currentData.data.isDone&&e++,n.studyDone(e)),e>0?(n.exerciseData=n.exerciseData.slice(0,e),n.stepCompleted.emit(n.exerciseData)):n.stepCompleted.emit(null)})},n.prototype.ngOnDestroy=function(){this.componentActive=!1},n}(),Gn=t["\u0275crt"]({encapsulation:0,styles:[K,[".suffix[_ngcontent-%COMP%]{font-size:20px}.lblue[_ngcontent-%COMP%]{color:#00bfff}.dblue[_ngcontent-%COMP%]{color:navy}.answer[_ngcontent-%COMP%]{min-height:100px}.answer[_ngcontent-%COMP%] > .word[_ngcontent-%COMP%]{margin-top:32px;height:78px}.loading[_ngcontent-%COMP%]{text-align:left;font-size:8px;color:#999;margin-top:50px;height:70px}.alts[_ngcontent-%COMP%]{font-size:20px;margin-left:42px}.frame[_ngcontent-%COMP%]{padding-bottom:20px}"]],data:{}});function Qn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-countdown",[],null,[[null,"countedDown"]],function(n,l,e){var t=!0;return"countedDown"===l&&(t=!1!==n.component.onCountDownFinished()&&t),t},on.b,on.a)),t["\u0275did"](1,245760,null,0,sn.a,[],{counter:[0,"counter"],mute:[1,"mute"]},{countedDown:"countedDown"})],function(n,l){var e=l.component;n(l,1,0,e.settings.delay,e.isMute)},null)}function Hn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-bullets",[],null,null,null,pn,an)),t["\u0275did"](1,245760,null,0,rn,[],{onNextExercise:[0,"onNextExercise"],exercises:[1,"exercises"],current:[2,"current"],text:[3,"text"],slice:[4,"slice"]},null)],function(n,l){var e=l.component;n(l,1,0,e.nextExercise,e.exerciseData,e.current,e.text,!1)},null)}function Jn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"div",[["class","image"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,function(n,l){n(l,1,0,t["\u0275inlineInterpolate"](1,"",l.component.currentData.exercise.image,""))})}function Xn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,3,"span",[],null,null,null,null,null)),(n()(),t["\u0275ted"](1,null,[" "," "])),(n()(),t["\u0275eld"](2,0,null,null,1,"div",[["class","alts"]],null,null,null,null,null)),(n()(),t["\u0275ted"](3,null,["",""]))],null,function(n,l){var e=l.component;n(l,1,0,null==e.currentData.exercise?null:null==e.currentData.exercise.local?null:e.currentData.exercise.local.word),n(l,3,0,e.getAlts("local",e.currentData.exercise))})}function Zn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,11,"div",[["class","card"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Jn)),t["\u0275did"](2,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](3,0,null,null,8,"div",[["class","qa"]],null,null,null,null,null)),(n()(),t["\u0275eld"](4,0,null,null,1,"km-question",[],null,null,null,fn.b,fn.a)),t["\u0275did"](5,245760,null,0,hn.a,[],{lanPair:[0,"lanPair"],text:[1,"text"],currentData:[2,"currentData"],dir:[3,"dir"],showAlt:[4,"showAlt"],showImage:[5,"showImage"],settings:[6,"settings"]},null),(n()(),t["\u0275eld"](6,0,null,null,5,"div",[["class","answer"]],null,null,null,null,null)),(n()(),t["\u0275eld"](7,0,null,null,4,"h1",[["class","word"]],null,null,null,null,null)),(n()(),t["\u0275eld"](8,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),t["\u0275eld"](9,0,null,null,0,"img",[["class","flag"]],[[8,"src",4]],null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Xn)),t["\u0275did"](11,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null)],function(n,l){var e=l.component;n(l,2,0,e.showLocal&&e.currentData.exercise.image),n(l,5,0,e.lanPair,e.text,e.currentData,"foreign",!0,!1,e.settings),n(l,11,0,e.showLocal,t["\u0275nov"](l.parent.parent.parent.parent,3))},function(n,l){n(l,9,0,t["\u0275inlineInterpolate"](1,"/assets/img/flags/",l.component.lanPair.from,".png"))})}function Yn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,5,"div",[],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Hn)),t["\u0275did"](2,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Zn)),t["\u0275did"](4,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](5,0,null,null,0,"div",[["class","clearfix"]],null,null,null,null,null))],function(n,l){var e=l.component;n(l,2,0,!e.isStudyDone),n(l,4,0,!e.isStudyDone)},null)}function nl(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,6,"div",[["class","frame"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,2,"div",[["class","msg-info"]],null,null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,0,"span",[["class","fa fa-info-circle"]],null,null,null,null,null)),(n()(),t["\u0275ted"](3,null,[""," "])),(n()(),t["\u0275eld"](4,0,null,null,2,"button",[["class","btn btn-success"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onRehearseAll()&&t),t},null,null)),(n()(),t["\u0275eld"](5,0,null,null,0,"span",[["class","fa fa-repeat"]],null,null,null,null,null)),(n()(),t["\u0275ted"](6,null,[" "," "]))],null,function(n,l){var e=l.component;n(l,3,0,e.text.NoMoreToStudy),n(l,6,0,e.text.RehearseStudy)})}function ll(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-points-completed",[],null,null,null,vn,mn)),t["\u0275did"](1,114688,null,0,gn,[],{data:[0,"data"],text:[1,"text"]},null)],function(n,l){var e=l.component;n(l,1,0,e.exerciseData,e.text)},null)}function el(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"button",[["class","btn btn-success"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onStudyNewWords()&&t),t},null,null)),(n()(),t["\u0275eld"](1,0,null,null,0,"span",[["class","fa fa-arrow-right fa-spacing"]],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,[" "," "]))],null,function(n,l){n(l,2,0,l.component.text.ContinueStudy)})}function tl(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"button",[["class","btn btn-warning"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onToPractise()&&t),t},null,null)),(n()(),t["\u0275eld"](1,0,null,null,0,"span",[["class","fa fa-fast-forward fa-spacing"]],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,[" "," "]))],null,function(n,l){var e=l.component;n(l,2,0,e.text[e.hasMoreToStudy?"GoToPractise":"PractiseStudy"])})}function ul(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"button",[["class","btn btn-success"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onRehearseAll()&&t),t},null,null)),(n()(),t["\u0275eld"](1,0,null,null,0,"span",[["class","fa fa-refresh fa-spacing"]],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,[" "," "]))],null,function(n,l){n(l,2,0,l.component.text.RehearseAgain)})}function il(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,6,"div",[],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,el)),t["\u0275did"](2,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,tl)),t["\u0275did"](4,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,ul)),t["\u0275did"](6,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,2,0,!e.isRehearsal&&e.hasMoreToStudy),n(l,4,0,!e.isRehearsal),n(l,6,0,e.isRehearsal)},null)}function ol(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","signup"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"km-signup",[],null,null,null,$,F)),t["\u0275did"](2,49152,null,0,j,[],{text:[0,"text"],courseId:[1,"courseId"]},null)],function(n,l){var e=l.component;n(l,2,0,e.text,e.courseId)},null)}function sl(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,8,"div",[["class","frame"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"km-completed-list",[],null,null,null,On,Sn)),t["\u0275did"](2,114688,null,0,bn,[k],{data:[0,"data"],text:[1,"text"],step:[2,"step"],title:[3,"title"],isRepeat:[4,"isRepeat"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,ll)),t["\u0275did"](4,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,il)),t["\u0275did"](6,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,ol)),t["\u0275did"](8,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,2,0,e.exerciseData,e.text,"Study",e.text.Wordslearned,e.isRehearsal),n(l,4,0,!e.isRehearsal),n(l,6,0,!e.isDemo),n(l,8,0,e.isDemo&&e.courseId)},null)}function rl(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,4,"button",[["class","btn btn-success btn-lg"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onNextWord(1)&&t),t},null,null)),(n()(),t["\u0275eld"](1,0,null,null,2,"span",[["class","fa"]],null,null,null,null,null)),t["\u0275did"](2,278528,null,0,m.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](3,{"fa-step-forward":0,"fa-refresh":1}),(n()(),t["\u0275ted"](4,null,[" "," "]))],function(n,l){var e=l.component;n(l,2,0,"fa",n(l,3,0,!e.isStudyDone,e.isStudyDone))},function(n,l){var e=l.component;n(l,4,0,e.showLocal?e.text.Next:e.text.ShowTranslation)})}function al(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-points-earned",[],null,null,null,Mn,En)),t["\u0275did"](1,245760,null,0,Ln,[],{pointsEarned:[0,"pointsEarned"]},null)],function(n,l){n(l,1,0,l.component.pointsEarned)},null)}function cl(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,7,"div",[["class","col-xs-4"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"km-learn-settings",[],null,[[null,"updatedSettings"]],function(n,l,e){var t=!0;return"updatedSettings"===l&&(t=!1!==n.component.onSettingsUpdated(e)&&t),t},Wn,_n)),t["\u0275did"](2,49152,null,0,An,[],{step:[0,"step"],text:[1,"text"],hasGenus:[2,"hasGenus"],settings:[3,"settings"]},{updatedSettings:"updatedSettings"}),(n()(),t["\u0275eld"](3,0,null,null,2,"div",[["class","actions"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,rl)),t["\u0275did"](5,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,al)),t["\u0275did"](7,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,2,0,"study",e.text,!(null==e.currentData||null==e.currentData.exercise||!e.currentData.exercise.genus),e.settings),n(l,5,0,(null==e.exerciseData?null:e.exerciseData.length)>0),n(l,7,0,!e.isStudyDone)},null)}function dl(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,12,"section",[["class","main-card"],["kmPressed",""]],null,[[null,"hasKeyPressed"],["document","keydown"]],function(n,l,e){var u=!0,i=n.component;return"document:keydown"===l&&(u=!1!==t["\u0275nov"](n,1).keypress(e)&&u),"hasKeyPressed"===l&&(u=!1!==i.onKeyPressed(e)&&u),u},null,null)),t["\u0275did"](1,16384,null,0,jn.a,[],null,{hasKeyPressed:"hasKeyPressed"}),(n()(),t["\u0275eld"](2,0,null,null,7,"div",[],null,null,null,null,null)),t["\u0275did"](3,278528,null,0,m.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{ngClass:[0,"ngClass"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Yn)),t["\u0275did"](5,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,nl)),t["\u0275did"](7,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,sl)),t["\u0275did"](9,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,cl)),t["\u0275did"](11,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](12,0,null,null,0,"div",[["class","clearfix"]],null,null,null,null,null))],function(n,l){var e=l.component;n(l,3,0,e.isStudyDone?"col-xs-12":"col-xs-8"),n(l,5,0,(null==e.exerciseData?null:e.exerciseData.length)>0),n(l,7,0,(null==e.exerciseData?null:e.exerciseData.length)<1),n(l,9,0,e.isStudyDone&&(null==e.exerciseData?null:e.exerciseData.length)>0),n(l,11,0,!e.isStudyDone&&(null==e.exerciseData?null:e.exerciseData.length)>0)},null)}function pl(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-loader",[],null,null,null,C.b,C.a)),t["\u0275did"](1,114688,null,0,w.a,[],{msg:[0,"msg"],showBackground:[1,"showBackground"]},null)],function(n,l){n(l,1,0,l.component.text.LoadingExercises,!1)},null)}function fl(n){return t["\u0275vid"](0,[(n()(),t["\u0275and"](16777216,null,null,1,null,dl)),t["\u0275did"](1,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,pl)),t["\u0275did"](3,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](0,null,null,0))],function(n,l){var e=l.component;n(l,1,0,e.isReady),n(l,3,0,e.isLoading&&!e.isError)},null)}function hl(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,0,"span",[["class","fa fa-circle"]],null,null,null,null,null))],null,null)}function gl(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"span",[["class","loading"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,hl)),t["\u0275did"](2,802816,null,0,m.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,l){n(l,2,0,l.component.dotArr)},null)}function ml(n){return t["\u0275vid"](0,[(n()(),t["\u0275and"](16777216,null,null,1,null,Qn)),t["\u0275did"](1,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(n()(),t["\u0275and"](0,[["study",2]],null,0,null,fl)),(n()(),t["\u0275and"](0,[["loadingword",2]],null,0,null,gl)),(n()(),t["\u0275eld"](4,0,null,null,5,"km-modal-confirm",[],null,[[null,"confirmed"]],function(n,l,e){var t=!0;return"confirmed"===l&&(t=!1!==n.component.onSkipConfirmed(e)&&t),t},Fn.b,Fn.a)),t["\u0275did"](5,49152,[["confirm",4]],0,$n.a,[],{level:[0,"level"],text:[1,"text"]},{confirmed:"confirmed"}),(n()(),t["\u0275eld"](6,0,null,0,1,"div",[["title",""]],null,null,null,null,null)),(n()(),t["\u0275ted"](7,null,["",""])),(n()(),t["\u0275eld"](8,0,null,1,1,"div",[["message",""]],null,null,null,null,null)),(n()(),t["\u0275ted"](9,null,["","?"]))],function(n,l){var e=l.component;n(l,1,0,e.isCountDown,t["\u0275nov"](l,2)),n(l,5,0,"warning",e.text)},function(n,l){var e=l.component;n(l,7,0,e.text.Warning),n(l,9,0,e.text.ConfirmExit)})}var vl=function(){function n(){this.componentActive=!0}return n.prototype.ngOnChanges=function(){this.barLength=100,this.color="green",this.isAnswered=!1,this.timers={},this.cutOffs=this.data.data.timeCutoffs,this.totalTimeMs=100*this.cutOffs.total(),this.currentTimeMs=this.totalTimeMs,this.startDate=new Date,this.changeColor(this.cutOffs.green,"orange"),this.changeBar()},n.prototype.getTimeDelta=function(){var n=new Date;return this.isAnswered=!0,clearTimeout(this.timers.orange),clearTimeout(this.timers.red),clearTimeout(this.timers.blue),(n.getTime()-this.startDate.getTime())/100},n.prototype.changeColor=function(n,l){var e=this;this.timers[l]=setTimeout(function(){switch(e.color=l,l){case"orange":e.changeColor(e.cutOffs.orange,"red");break;case"red":e.changeColor(e.cutOffs.red,"blue")}},100*n)},n.prototype.changeBar=function(){var n=this,l=0;Object(Kn.a)(0,50).pipe(Object(P.a)(function(){return n.componentActive&&n.barLength>0&&!1===n.isAnswered})).subscribe(function(e){n.currentTimeMs-=50,l=Math.trunc(n.currentTimeMs/n.totalTimeMs*1e3)/10,n.barLength=Math.max(0,l)})},n.prototype.ngOnDestroy=function(){this.componentActive=!1},n}(),xl=t["\u0275crt"]({encapsulation:0,styles:["[_nghost-%COMP%] {\n    display: block;\n  }\n  .line[_ngcontent-%COMP%] {\n    height: 2px;\n  }"],data:{}});function Cl(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,0,"div",[["class","line"]],[[4,"background-color",null],[4,"width","%"]],null,null,null,null))],null,function(n,l){var e=l.component;n(l,0,0,e.color,e.barLength)})}var wl=e("L7v4"),yl=e("bhnQ"),bl=function(){function n(n){this.learnService=n,this.selected=new t.EventEmitter}return n.prototype.ngOnChanges=function(){this.correct=this.data.data.isCorrect,this.lan=this.data.data.direction===S.b.LocalToForeign?this.lanPair.to:this.lanPair.from,this.flagWord=this.data.data.direction===S.b.LocalToForeign?this.data.exercise.foreign:this.data.exercise.local},n.prototype.onSelected=function(n){this.isSelected||this.selected.emit(n)},n.prototype.filter=function(n){return n},n}(),Sl=t["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;margin-top:32px;text-align:center;margin-left:-32px;margin-right:-32px}.choice[_ngcontent-%COMP%]{width:332px;margin:3px 6px;font-size:24px;text-align:left;white-space:normal;overflow:hidden}.done[_ngcontent-%COMP%]{background-color:#eee;border-color:#eee;cursor:default}.done.ok[_ngcontent-%COMP%]{background-color:green;color:#fff}.done.nok[_ngcontent-%COMP%]{background-color:red;color:#fff}.done.correction[_ngcontent-%COMP%]{border-color:green;color:green}.nr[_ngcontent-%COMP%]{color:#ccc}.answer-instruction[_ngcontent-%COMP%]{text-align:left;margin-left:16px;font-size:16px;font-style:italic;color:#bbb}.region-flag[_ngcontent-%COMP%]{margin-left:16px;margin-right:12px}.word[_ngcontent-%COMP%]{margin-left:2px}"]],data:{}});function Il(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,6,"div",[["class","btn btn-default btn-lg choice"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onSelected(n.context.index)&&t),t},null,null)),t["\u0275did"](1,278528,null,0,m.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](2,{done:0,ok:1,nok:2,correction:3}),(n()(),t["\u0275eld"](3,0,null,null,1,"span",[["class","nr"]],null,null,null,null,null)),(n()(),t["\u0275ted"](4,null,["","."])),(n()(),t["\u0275eld"](5,0,null,null,1,"span",[["class","word"]],null,null,null,null,null)),(n()(),t["\u0275ted"](6,null,["",""]))],function(n,l){var e=l.component;n(l,1,0,"btn btn-default btn-lg choice",n(l,2,0,e.isSelected,e.correct&&l.context.index===e.answered,!e.correct&&l.context.index===e.answered,!e.correct&&l.context.index===e.answer))},function(n,l){var e=l.component;n(l,4,0,l.context.index+1),n(l,6,0,e.filter(l.context.$implicit))})}function Dl(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,5,"div",[["class","answer-instruction"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"km-region-flag",[["class","region-flag"]],null,null,null,wl.b,wl.a)),t["\u0275did"](2,49152,null,0,yl.a,[],{lan:[0,"lan"],word:[1,"word"]},null),(n()(),t["\u0275eld"](3,0,null,null,2,"span",[],[[4,"visibility",null]],null,null,null,null)),(n()(),t["\u0275eld"](4,0,null,null,0,"span",[["class","fa fa-info-circle fa-spacing"]],null,null,null,null,null)),(n()(),t["\u0275ted"](5,null,[""," "])),(n()(),t["\u0275and"](16777216,null,null,1,null,Il)),t["\u0275did"](7,802816,null,0,m.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,l){var e=l.component;n(l,2,0,e.lan,e.flagWord),n(l,7,0,e.choices)},function(n,l){var e=l.component;n(l,3,0,e.answered?"hidden":"visible"),n(l,5,0,e.instruction)})}var Rl=e("0nmR"),kl=e("vGjl"),Tl=e("gHLZ"),Pl=function(){function n(n){this.utilsService=n}return n.prototype.ngOnChanges=function(){this.exData=this.data.data},n.prototype.ngAfterViewChecked=function(){this.answer.nativeElement.focus()},n.prototype.onKeySelected=function(n){this.utilsService.insertKey(this.answer.nativeElement,n)},n.prototype.getData=function(){return this.answer.nativeElement.value},n.prototype.clearData=function(){this.answer.nativeElement.value=""},n}(),Nl=t["\u0275crt"]({encapsulation:0,styles:[Rl.a,["[_nghost-%COMP%]{margin-top:32px;display:block}label[_ngcontent-%COMP%]{width:4.6%;padding-left:0;margin-top:18px}.answer-instruction[_ngcontent-%COMP%]{text-align:left;margin-left:48px;font-size:16px;font-style:italic;color:#bbb}"]],data:{}});function Ol(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"span",[["class","input-group-addon"]],null,null,null,null,null)),(n()(),t["\u0275ted"](1,null,[" "," "]))],null,function(n,l){n(l,1,0,l.component.prefix)})}function Ll(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,4,"div",[["class","solution"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"span",[["class","msg"]],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,[""," "])),(n()(),t["\u0275eld"](3,0,null,null,1,"span",[["class","answer"]],null,null,null,null,null)),(n()(),t["\u0275ted"](4,null,["",""]))],null,function(n,l){var e=l.component;n(l,2,0,e.solution.msg),n(l,4,0,e.solution.solution)})}function El(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-keyboard",[],null,[[null,"selectedKey"]],function(n,l,e){var t=!0;return"selectedKey"===l&&(t=!1!==n.component.onKeySelected(e)&&t),t},kl.b,kl.a)),t["\u0275did"](1,114688,null,0,Tl.a,[],{keys:[0,"keys"]},{selectedKey:"selectedKey"})],function(n,l){n(l,1,0,l.component.keyboard.keys)},null)}function Ml(n){return t["\u0275vid"](0,[t["\u0275qud"](402653184,1,{answer:0}),(n()(),t["\u0275eld"](1,0,null,null,2,"div",[["class","answer-instruction"]],[[4,"visibility",null]],null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,0,"span",[["class","fa fa-info-circle"]],null,null,null,null,null)),(n()(),t["\u0275ted"](3,null,[" ","\n"])),(n()(),t["\u0275eld"](4,0,null,null,10,"div",[["class","form-group"]],null,null,null,null,null)),(n()(),t["\u0275eld"](5,0,null,null,2,"label",[["class","control-label col-xs-1"],["for","answer"]],null,null,null,null,null)),(n()(),t["\u0275eld"](6,0,null,null,1,"km-region-flag",[],null,null,null,wl.b,wl.a)),t["\u0275did"](7,49152,null,0,yl.a,[],{lan:[0,"lan"],word:[1,"word"]},null),(n()(),t["\u0275eld"](8,0,null,null,6,"div",[["class","col-xs-11"]],null,null,null,null,null)),(n()(),t["\u0275eld"](9,0,null,null,5,"div",[["class","input-group input-lg"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Ol)),t["\u0275did"](11,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](12,0,[[1,0],["answer",1]],null,2,"input",[["autocomplete","off"],["autofocus",""],["class","form-control input-lg"],["id","answer"],["maxlength","100"],["spellcheck","false"]],[[1,"disabled",0]],null,null,null,null)),t["\u0275did"](13,278528,null,0,m.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](14,{correct:0,incorrect:1,isAlt:2,isAlmostCorrect:3}),(n()(),t["\u0275eld"](15,0,null,null,0,"div",[["class","clearfix"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Ll)),t["\u0275did"](17,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,El)),t["\u0275did"](19,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,7,0,e.lan,e.data.exercise.foreign),n(l,11,0,e.prefix),n(l,13,0,"form-control input-lg",n(l,14,0,e.disabled&&e.exData.isCorrect&&!e.exData.isAlt,e.disabled&&!e.data.data.isCorrect&&!e.exData.isAlmostCorrect,e.disabled&&e.exData.isCorrect&&e.exData.isAlt,e.disabled&&!e.exData.isCorrect&&e.exData.isAlmostCorrect)),n(l,17,0,e.disabled&&(!e.exData.isCorrect||e.exData.isAlt)),n(l,19,0,e.keyboard.showKeyboard&&!e.disabled)},function(n,l){var e=l.component;n(l,1,0,e.disabled?"hidden":"visible"),n(l,3,0,e.instruction),n(l,12,0,e.disabled?"":null)})}var Al=e("yPRg"),_l=e("oufz"),Vl=e("+ZHm"),ql=e("cy3S"),Wl=e("gqJ5"),jl=e("+gmn"),Fl=e("gIcY"),$l=function(){function n(n,l){this.utilsService=n,this.renderer=l,this.instruction="",this.isAnswered=!1,this.currentField=0,this.answers=[]}return n.prototype.ngOnChanges=function(){var n=this.data.exercise._id+(this.data.exercise.lessonId||"");this.currentExerciseUnid!==n&&(this.currentExerciseUnid=n,this.getConjugationsData(this.data.exercise))},n.prototype.ngAfterViewInit=function(){var n=this;this.conjugation.changes.subscribe(function(l){n.renderer.invokeElementMethod(l.first.nativeElement,"focus",[])})},n.prototype.onFocus=function(n){this.currentField=n},n.prototype.onKeySelected=function(n){var l=this,e=this.conjugation.find(function(n,e){return e===l.currentField});e&&(this.utilsService.insertKey(e.nativeElement,n),this.answers[this.currentField]=e.nativeElement.value)},n.prototype.getData=function(){var n=this.conjugations.map(function(n){return n.split(";")[1]});return{answers:this.answers,solutions:this.conjugations.map(function(n){return n.split(";")[0]}),alts:n.slice(1,this.conjugations.length)}},n.prototype.showResult=function(n){this.results=n,this.isAnswered=!0},n.prototype.clearData=function(){this.isAnswered=!1,this.answers=this.initAnswers(),this.currentField=0},n.prototype.getConjugationsData=function(n){this.questionData=JSON.parse(JSON.stringify(this.data)),this.instruction=n.local.info,this.answers=this.initAnswers(),this.conjugations=n.foreign.word.split("|")},n.prototype.initAnswers=function(){return["","","","","",""]},n}(),Kl=t["\u0275crt"]({encapsulation:0,styles:[Rl.a,[".answer-instruction[_ngcontent-%COMP%]{margin-bottom:8px;margin-left:0;font-size:16px;font-style:italic;color:#bbb}.solution[_ngcontent-%COMP%]{font-size:18px;margin-left:0}.buffer[_ngcontent-%COMP%]{margin-bottom:15px}input[_ngcontent-%COMP%]{width:50%}h1[_ngcontent-%COMP%]{display:inline;position:relative;top:6px}.form-group[_ngcontent-%COMP%]{margin-bottom:6px}"]],data:{}});function Bl(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","answer-instruction"]],[[4,"display",null]],null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,0,"span",[["class","fa fa-info-circle"]],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,[" ","\n"]))],null,function(n,l){var e=l.component;n(l,0,0,e.isAnswered?"none":"block"),n(l,2,0,e.instruction)})}function Ul(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function zl(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,3,"div",[],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,2,null,Ul)),t["\u0275did"](2,540672,null,0,m.NgTemplateOutlet,[t.ViewContainerRef],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),t["\u0275pod"](3,{pronoun:0,nr:1})],function(n,l){n(l,2,0,n(l,3,0,l.component.pronouns[l.context.index],l.context.index),t["\u0275nov"](l.parent,14))},null)}function Gl(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-question",[],null,null,null,fn.b,fn.a)),t["\u0275did"](1,245760,null,0,hn.a,[],{lanPair:[0,"lanPair"],text:[1,"text"],currentData:[2,"currentData"],dir:[3,"dir"],showAnnotations:[4,"showAnnotations"]},null)],function(n,l){var e=l.component;n(l,1,0,e.lanPair,e.text,e.questionData,"local",!1)},null)}function Ql(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-keyboard",[],null,[[null,"selectedKey"]],function(n,l,e){var t=!0;return"selectedKey"===l&&(t=!1!==n.component.onKeySelected(e)&&t),t},kl.b,kl.a)),t["\u0275did"](1,114688,null,0,Tl.a,[],{keys:[0,"keys"]},{selectedKey:"selectedKey"})],function(n,l){n(l,1,0,l.component.keyboard.keys)},null)}function Hl(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,4,"div",[["class","solution"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"span",[["class","msg"]],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,[""," "])),(n()(),t["\u0275eld"](3,0,null,null,1,"span",[["class","answer"]],null,null,null,null,null)),(n()(),t["\u0275ted"](4,null,["",""]))],null,function(n,l){var e=l.component;n(l,2,0,e.text.Expectedanswer),n(l,4,0,e.conjugations[l.parent.context.nr+1].split(";")[0])})}function Jl(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,16,"div",[["class","form-group row"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"label",[["class","control-label col-xs-2 col-xs-offset-1 text-right"]],[[8,"htmlFor",0]],null,null,null,null)),(n()(),t["\u0275ted"](2,null,[" "," "])),(n()(),t["\u0275eld"](3,0,null,null,13,"div",[["class","col-xs-9"]],null,null,null,null,null)),(n()(),t["\u0275eld"](4,0,[[1,0],["conjugation",1]],null,10,"input",[["autocomplete","off"],["class","form-control"],["maxlength","100"],["required",""],["spellcheck","false"]],[[8,"id",0],[8,"autofocus",0],[1,"disabled",0],[1,"required",0],[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"focus"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,l,e){var u=!0,i=n.component;return"input"===l&&(u=!1!==t["\u0275nov"](n,7)._handleInput(e.target.value)&&u),"blur"===l&&(u=!1!==t["\u0275nov"](n,7).onTouched()&&u),"compositionstart"===l&&(u=!1!==t["\u0275nov"](n,7)._compositionStart()&&u),"compositionend"===l&&(u=!1!==t["\u0275nov"](n,7)._compositionEnd(e.target.value)&&u),"focus"===l&&(u=!1!==i.onFocus(n.context.nr)&&u),"ngModelChange"===l&&(u=!1!==(i.answers[n.context.nr]=e)&&u),u},null,null)),t["\u0275did"](5,278528,null,0,m.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](6,{correct:0,incorrect:1}),t["\u0275did"](7,16384,null,0,Fl.d,[t.Renderer2,t.ElementRef,[2,Fl.a]],null,null),t["\u0275did"](8,16384,null,0,Fl.v,[],{required:[0,"required"]},null),t["\u0275did"](9,540672,null,0,Fl.l,[],{maxlength:[0,"maxlength"]},null),t["\u0275prd"](1024,null,Fl.n,function(n,l){return[n,l]},[Fl.v,Fl.l]),t["\u0275prd"](1024,null,Fl.o,function(n){return[n]},[Fl.d]),t["\u0275did"](12,671744,null,0,Fl.s,[[8,null],[6,Fl.n],[8,null],[6,Fl.o]],{model:[0,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,Fl.p,null,[Fl.s]),t["\u0275did"](14,16384,null,0,Fl.q,[[4,Fl.p]],null,null),(n()(),t["\u0275and"](16777216,null,null,1,null,Hl)),t["\u0275did"](16,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,5,0,"form-control",n(l,6,0,e.isAnswered&&e.results[l.context.nr],e.isAnswered&&!e.results[l.context.nr])),n(l,8,0,""),n(l,9,0,"100"),n(l,12,0,e.answers[l.context.nr]),n(l,16,0,e.isAnswered&&!e.results[l.context.nr])},function(n,l){var e=l.component;n(l,1,0,"conjugation"+l.context.nr),n(l,2,0,l.context.pronoun),n(l,4,1,["conjugation"+l.context.nr,0===l.context.nr,e.isAnswered?"":null,t["\u0275nov"](l,8).required?"":null,t["\u0275nov"](l,9).maxlength?t["\u0275nov"](l,9).maxlength:null,t["\u0275nov"](l,14).ngClassUntouched,t["\u0275nov"](l,14).ngClassTouched,t["\u0275nov"](l,14).ngClassPristine,t["\u0275nov"](l,14).ngClassDirty,t["\u0275nov"](l,14).ngClassValid,t["\u0275nov"](l,14).ngClassInvalid,t["\u0275nov"](l,14).ngClassPending])})}function Xl(n){return t["\u0275vid"](0,[t["\u0275qud"](671088640,1,{conjugation:1}),(n()(),t["\u0275and"](16777216,null,null,1,null,Bl)),t["\u0275did"](2,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](3,0,null,null,1,"km-question",[],null,null,null,fn.b,fn.a)),t["\u0275did"](4,245760,null,0,hn.a,[],{lanPair:[0,"lanPair"],text:[1,"text"],currentData:[2,"currentData"],dir:[3,"dir"]},null),(n()(),t["\u0275eld"](5,0,null,null,0,"div",[["class","clearfix"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,zl)),t["\u0275did"](7,802816,null,0,m.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Gl)),t["\u0275did"](9,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](10,0,null,null,0,"div",[["class","clearfix"]],null,null,null,null,null)),(n()(),t["\u0275eld"](11,0,null,null,0,"div",[["class","buffer"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Ql)),t["\u0275did"](13,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](0,[["conjugationTemplate",2]],null,0,null,Jl))],function(n,l){var e=l.component;n(l,2,0,e.instruction),n(l,4,0,e.lanPair,e.text,e.questionData,"foreign"),n(l,7,0,e.pronouns),n(l,9,0,e.isAnswered),n(l,13,0,e.keyboard.showKeyboard&&!e.isAnswered)},null)}var Zl=function(){function n(){this.componentActive=!0}return n.prototype.ngOnInit=function(){var n=this;this.maxLevel=h.d.toString(),this.levelUpdated.pipe(Object(P.a)(function(){return n.componentActive})).subscribe(function(l){n.updateLevel(l)})},n.prototype.updateLevel=function(n){var l=Math.max(0,Math.min(n,h.d));this.level=l.toString(),this.percentage=Math.round(l/h.d*100).toString()},n.prototype.ngOnDestroy=function(){this.componentActive=!1},n}(),Yl=t["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;margin-top:15px}.progress-bar-vertical[_ngcontent-%COMP%]{width:20px;min-height:90px;margin-right:20px;float:left;display:flex;align-items:flex-end;-webkit-align-items:flex-end}.progress-bar-vertical[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{width:100%;height:0;transition:height .6s ease}"]],data:{}});function ne(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,3,"div",[["class","progress progress-bar-vertical"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,2,"div",[["aria-valuemin","0"],["class","progress-bar progress-bar-success progress-bar-striped"],["role","progressbar"]],[[1,"aria-valuenow",0],[1,"aria-valuemax",0],[4,"height","%"]],null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,1,"span",[["class","sr-only"]],null,null,null,null,null)),(n()(),t["\u0275ted"](3,null,[" ","% Level "]))],null,function(n,l){var e=l.component;n(l,1,0,e.level,e.maxLevel,e.percentage),n(l,3,0,e.percentage)})}var le=e("mrSG"),ee=function(){function n(n,l,e,u){this.learnService=n,this.previewService=l,this.errorService=e,this.sharedService=u,this.stepCompleted=new t.EventEmitter,this.updatedSettings=new t.EventEmitter,this.componentActive=!0,this.dataByExerciseUnid={},this.pointsEarned=new Un.a,this.hasAnswered=new Un.a,this.gotoNextWord=new Un.a,this.nextExercise=new Bn.a(0),this.levelUpdated=new Bn.a(0),this.countPerStep={},this.isExercisesDone=!1,this.keys={lowercase:[],uppercase:[]},this.pronouns=[],this.currentChoices=[],this.isAnswered=!1,this.isCorrect=!1,this.current=-1,this.isQuestionReady=!1,this.noMoreExercises=!1,this.isReady=!1,this.maxRepeatWord=5,this.qType=S.d,this.exType=S.c}return n.prototype.onCountDownFinished=function(){this.isCountDown=!1,this.sharedService.changeExerciseMode(!0),this.log("Starting exercises ("+this.currentStep+")")},n.prototype.onSettingsUpdated=function(n){this.settings=n,this.updatedSettings.emit(n)},n.prototype.onKeyPressed=function(n){if(!this.isExercisesDone&&this.currentData)switch(this.currentData.data.questionType){case S.d.Choices:var l=void 0;switch(n){case"Enter":this.isAnswered&&(this.gotoNextWord.next(!0),this.nextWord());break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":this.isAnswered||(l=parseInt(n,10))>0&&l<=this.currentChoices.length&&(this.hasAnswered.next(!0),this.checkChoicesAnswer(l-1))}break;case S.d.Word:"Enter"===n&&this.checkIfWordAnswer();break;case S.d.Conjugations:"Enter"===n&&this.checkIfConjugationsAnswer();break;case S.d.FillIn:"Enter"===n&&this.checkIfFillInAnswer(!1)}},n.prototype.onSelected=function(n){this.isAnswered||(this.hasAnswered.next(!0),this.checkChoicesAnswer(n))},n.prototype.onAnsweredSelect=function(n){this.isAnswered||this.checkSelectAnswer(n)},n.prototype.onNextWord=function(n){switch(void 0===n&&(n=!1),n||this.gotoNextWord.next(!0),this.currentData.data.questionType){case S.d.Choices:n?this.checkChoicesAnswer(null):this.isAnswered&&this.nextWord();break;case S.d.Word:this.checkIfWordAnswer(n);break;case S.d.Select:n?(this.selectComponent.onSelected(null),this.checkSelectAnswer(!1)):this.nextWord();break;case S.d.FillIn:this.checkIfFillInAnswer(n);break;case S.d.Comparison:this.checkIfComparisonAnswer();break;case S.d.Conjugations:this.checkIfConjugationsAnswer();break;case S.d.Preview:this.previewDone()}},n.prototype.getQuestionDir=function(){var n="local";return this.currentData&&(this.currentData.data.questionType===S.d.Choices&&this.currentData.data.direction===S.b.ForeignToLocal||this.currentData.data.questionType===S.d.Preview)&&(n="foreign"),n},n.prototype.getAlts=function(n,l){var e="";return l&&l[n]&&l[n].alt&&(e=l[n].alt.split("|").join(", ")),e},n.prototype.isInput=function(){var n=!1;if(this.currentData)switch(this.currentData.data.questionType){case S.d.Word:case S.d.FillIn:case S.d.Comparison:case S.d.Conjugations:n=!0}return n},n.prototype.showDefaultQuestion=function(){var n=!0;if(this.currentData)switch(this.currentData.data.questionType){case S.d.Select:case S.d.FillIn:case S.d.Comparison:case S.d.Conjugations:n=!1}return n},n.prototype.isSelectionExercise=function(){var n=!1;return!this.currentData||this.currentData.data.questionType!==S.d.Choices&&this.currentData.data.questionType!==S.d.Select||(n=!0),n},n.prototype.init=function(){this.isCountDown=this.settings.countdown,this.isMute=this.settings.mute,this.checkExercisesInterrupted(),this.checkCountUpdated(),this.getConfig(this.lanPair.to),this.isCountDown||this.onCountDownFinished()},n.prototype.clearToContinue=function(){this.isReady=!1,this.current=-1,this.isQuestionReady=!1,this.isExercisesDone=!1,this.noMoreExercises=!1},n.prototype.getChoices=function(n,l){var e=this;void 0===l&&(l=!0),this.learnService.fetchCourseChoices(n,this.lanPair).pipe(Object(P.a)(function(){return e.componentActive})).subscribe(function(n){e.choices=n,e.nextWord()},function(n){return e.errorService.handleError(n)})},n.prototype.checkIfWordAnswer=function(n){void 0===n&&(n=!1),this.isAnswered?(this.gotoNextWord.next(!0),this.nextWord()):this.answerComponent&&(this.hasAnswered.next(!0),this.checkWordAnswer(this.answerComponent.getData(),n))},n.prototype.checkIfFillInAnswer=function(n){void 0===n&&(n=!1),!this.isAnswered||n?this.qaComponent&&(this.qaComponent.getData()||n)&&this.checkFillInAnswer(this.qaComponent.getData(),this.qaComponent.getCorrect(),S.d.FillIn,n):this.nextWord()},n.prototype.checkIfComparisonAnswer=function(){this.isAnswered?this.nextWord():this.comparisonComponent&&this.comparisonComponent.getData()&&this.checkComparisonAnswer(this.comparisonComponent.getData())},n.prototype.checkIfConjugationsAnswer=function(){this.isAnswered?this.nextWord():this.conjugationsComponent&&this.checkConjugationsAnswer(this.conjugationsComponent.getData())},n.prototype.previewDone=function(){},n.prototype.nextWord=function(){if(this.clearData(),this.current++,this.current>=this.exerciseData.length&&(this.practiseDone(this.exerciseData),this.stepCompleted.emit(this.exerciseData),this.sharedService.changeExerciseMode(!1)),!this.isExercisesDone){this.currentData=this.exerciseData[this.current];var n=this.getCurrentLearnLevel(this.currentData),l=this.determineQuestionType(this.currentData,n);this.levelUpdated.next(n),this.currentData.data.questionType=l,this.currentData.data.questionType===S.d.Choices&&this.setChoices(),this.currentData.data.timeCutoffs=this.setTimeCutOffs(l,this.currentData),this.currentData.data.questionType===S.d.Word&&(this.prefix=this.getPrefix(this.currentData.exercise.foreign.word)),this.isQuestionReady=!0}},n.prototype.clearData=function(){this.pointsEarned.next(0),this.solution="",this.isAnswered=!1,this.isCorrect=!1,this.answered=null,this.answer=null,this.answerComponent&&this.answerComponent.clearData(),this.selectComponent&&this.selectComponent.clearData(),this.qaComponent&&this.qaComponent.clearData(),this.comparisonComponent&&this.comparisonComponent.clearData(),this.conjugationsComponent&&this.conjugationsComponent.clearData(),this.nextWordTimer&&this.nextWordTimer.unsubscribe()},n.prototype.checkWordAnswer=function(n,l){void 0===l&&(l=!1);var e=this.filter(n);if(e||l){var t=this.currentData.exercise.foreign.word,u=this.filter(t);e===u?this.checkAnswer(S.a.Correct,S.d.Word,t):this.checkAltAnswers(this.currentData.exercise,e)?this.checkAnswer(S.a.Alt,S.d.Word,t):this.learnService.isAlmostCorrect(e,u)?this.checkAnswer(S.a.AlmostCorrect,S.d.Word,t):this.checkAnswer(S.a.Incorrect,S.d.Word,t)}},n.prototype.checkChoicesAnswer=function(n){var l=this;this.answered=n,this.answer=null;var e=this.currentData.data.direction===S.b.ForeignToLocal?this.currentData.exercise.local.word:this.currentData.exercise.foreign.word;this.currentChoices[n]===e?this.checkAnswer(S.a.Correct,S.d.Choices):(this.checkAnswer(S.a.Incorrect,S.d.Choices),this.currentChoices.forEach(function(n,t){n===e&&(l.answer=t)}))},n.prototype.checkSelectAnswer=function(n){this.checkAnswer(n?S.a.Correct:S.a.Incorrect,S.d.Select)},n.prototype.checkFillInAnswer=function(n,l,e,t){void 0===t&&(t=!1);var u=this.filter(n);if(u||t){var i=this.filter(l);u===i?this.checkAnswer(S.a.Correct,e,l):this.learnService.isAlmostCorrect(u,i)?this.checkAnswer(S.a.AlmostCorrect,e,l):this.checkAnswer(S.a.Incorrect,e,l)}},n.prototype.checkConjugationsAnswer=function(n){var l,e=this,t=[!1,!1,!1,!1,!1,!1],u=0;n.answers.forEach(function(i,o){((l=e.filter(i))===n.solutions[o+1]||l&&n.alts[o]===l)&&(t[o]=!0,u++)}),this.checkAnswer(6===u?S.a.Correct:5===u?S.a.AlmostCorrect:S.a.Incorrect,S.d.Conjugations,n.solutions.join("")),this.conjugationsComponent.showResult(t)},n.prototype.checkComparisonAnswer=function(n){var l,e=this,t=[!1,!1],u=0;n.answers.forEach(function(i,o){((l=e.filter(i))===n.solutions[o+1]||l&&n.alts[o]===l)&&(t[o]=!0,u++)}),this.checkAnswer(2===u?S.a.Correct:S.a.Incorrect,S.d.Comparison,n.solutions.join("")),this.comparisonComponent.showResult(t)},n.prototype.checkAnswer=function(n,l,e){void 0===e&&(e="");var t=this.timerComponent.getTimeDelta(),u=this.getCurrentLearnLevel(this.currentData);switch(this.isAnswered=!0,this.solution=e,this.currentData.data.isDone=!0,this.currentData.data.timeDelta=t,n){case S.a.Correct:this.isCorrect=!0,this.currentData.data.isCorrect=!0,this.currentData.data.isAlmostCorrect=!1,this.currentData.data.isAlt=!1,this.currentData.data.grade=this.calculateGrade(l,t,0,e),this.currentData.data.streak=this.setStreak(this.currentData,"1");break;case S.a.Alt:this.isCorrect=!0,this.currentData.data.isCorrect=!0,this.currentData.data.isAlmostCorrect=!1,this.currentData.data.isAlt=!1,this.currentData.data.grade=this.calculateGrade(l,t,1,e),this.currentData.data.streak=this.setStreak(this.currentData,"1");break;case S.a.AlmostCorrect:this.isCorrect=!1,this.currentData.data.isCorrect=!1,this.currentData.data.isAlmostCorrect=!0,this.currentData.data.isAlt=!1,this.currentData.data.grade=1,this.currentData.data.streak=this.setStreak(this.currentData,"2");break;case S.a.Incorrect:this.isCorrect=!1,this.currentData.data.isCorrect=!1,this.currentData.data.isAlmostCorrect=!1,this.currentData.data.isAlt=!1,this.currentData.data.grade=0,this.currentData.data.streak=this.setStreak(this.currentData,"0")}l===S.d.Word||l===S.d.Choices?u=this.calculateLearnLevel(l,{level:u,correct:this.currentData.data.isCorrect,alt:this.currentData.data.isAlmostCorrect,almostCorrect:this.currentData.data.isAlmostCorrect}):n===S.a.Correct&&(u=h.d);var i=this.currentData.exercise._id+(this.currentData.exercise.lessonId||"");this.currentData.data.learnLevel=u,this.dataByExerciseUnid[i].levels=u,this.addCount(this.isCorrect,i),this.currentData.data.points.base=this.calculateBasePoints(n,l);var o=this.currentData.exercise.foreign.word;n!==S.a.Correct||this.isRehearse()||(this.currentData.data.points.length=this.calculateLengthPoints(o),this.currentData.data.points.time=this.calculateTimePoints(t,this.currentData),this.currentData.data.points.streak=this.calculateStreakPoints(this.currentData.data),this.currentData.data.points.new=this.calculateNewPoints(this.currentData.result),this.currentData.data.points.age=this.calculateAgePoints(this.currentData)),this.doAddExercise(n,l,u)&&this.addExercise(this.currentData.data.isCorrect,this.currentData.data.isAlmostCorrect),this.sharedService.log("Points",this.currentData.data.points),this.levelUpdated.next(u),this.pointsEarned.next(this.currentData.data.points.total()),this.nextExercise.next(this.current)},n.prototype.doAddExercise=function(n,l,e){var t=!1;n!==S.a.Incorrect&&n!==S.a.AlmostCorrect||(t=!0);var u=this.dataByExerciseUnid[this.currentData.exercise._id+(this.currentData.exercise.lessonId||"")];return(u.countWrong?u.countWrong:0)>2&&(t=!1),t},n.prototype.addExercise=function(n,l){var e={data:JSON.parse(JSON.stringify(this.exerciseData[this.current].data)),exercise:this.exerciseData[this.current].exercise},t=this.lesson?this.lesson.exerciseSteps.practise:null,u="";e.data.isCorrect=!1,e.data.isDone=!1,e.data.isAlt=!1,e.data.isAlmostCorrect=!1,e.data.grade=0,e.data.points=this.previewService.setDefaultPoints(),e.data.answered=e.data.answered+1,t&&!t.bidirectional||(e.data.direction=Math.random()>=.5?S.b.LocalToForeign:S.b.ForeignToLocal),null!==n&&(u=this.exerciseData[this.current].result?this.exerciseData[this.current].result.streak:n?"1":l?"2":"0"),e.result={learnLevel:e.data.learnLevel,points:0,streak:u},this.exerciseData.push(e),t&&t.ordered||this.shuffleRemainingExercises()},n.prototype.shuffleRemainingExercises=function(){var n=this.exerciseData.length,l=this.exerciseData.slice(0,this.current+1),e=this.exerciseData.slice(this.current+1,n),t=this.previewService.shuffle(e);e.length>2&&(this.exerciseData=l.concat(t),this.exerciseData[this.current].exercise._id===this.exerciseData[this.current+1].exercise._id&&(t=this.previewService.shuffle(e),this.exerciseData=l.concat(t)))},n.prototype.setStreak=function(n,l){var e=n.result&&n.result.streak||"";return(e+=l).slice(-h.e)},n.prototype.filter=function(n){var l=n;return this.isCaseSensitive()||(l=n.toLowerCase()),(l=(l=this.learnService.filterPrefix(l)).replace(/ +(?= )/g,"")).replace(/[\.,\?;:!]/g,"")},n.prototype.getPrefix=function(n){var l="",e=n.match(/\((.*?)\)/);return e&&e.length>1&&(l=e[1]),l},n.prototype.checkAltAnswers=function(n,l){var e=this,t=!1;return n.foreign.alt&&n.foreign.alt.split("|").filter(function(n){return e.filter(n)===l}).length>0&&(t=!0),t},n.prototype.calculateBasePoints=function(n,l){var e=0;switch(l){case S.d.Word:case S.d.FillIn:this.currentData.data.isCorrect?e=50:this.currentData.data.isAlt?e=40:this.currentData.data.isAlmostCorrect&&(e=10);break;case S.d.Choices:this.currentData.data.isCorrect&&(e=2+3*this.currentChoices.length);break;case S.d.Select:this.currentData.data.isCorrect&&(e=2+Math.min(20,4*this.currentData.exercise.options.length));break;case S.d.Comparison:this.currentData.data.isCorrect&&(e=70);break;case S.d.Conjugations:this.currentData.data.isCorrect?e=110:this.currentData.data.isAlmostCorrect&&(e=15)}return this.lesson&&this.isRehearse()&&(e=Math.round(e/10)),e},n.prototype.calculateLengthPoints=function(n){return 2*n.length},n.prototype.calculateTimePoints=function(n,l){var e=l.data.timeCutoffs;return n>e.green+e.orange+e.red?0:n>e.green+e.orange?2:n>e.green?5:10},n.prototype.calculateStreakPoints=function(n){var l=0,e=0;if(n&&n.streak)for(var t=n.streak,u=t.length-1;u>Math.max(0,t.length-10);u--){if("1"!==t[u-1])return l>0&&(l/=1.3),Math.round(l);l+=e+=5,l*=1.3}return Math.round(l)},n.prototype.calculateNewPoints=function(n){return n&&n.streak?0:25},n.prototype.calculateAgePoints=function(n){var l=0;if(n&&!this.isRehearse()&&n.result&&n.result.dt){var e=this.sharedService.getDaysBetweenDates(new Date(n.result.dt),new Date),t=Math.min(e,365),u=this.getMultiplicator(n.exercise.tpe);l=t>2?Math.trunc(Math.log(t)*u):0}return l},n.prototype.getMultiplicator=function(n){var l=2;switch(n){case S.c.Word:l=20;break;case S.c.FillIn:case S.c.QA:case S.c.Comparison:case S.c.Conjugations:l=10}return l},n.prototype.setTimeCutOffs=function(n,l){var e={green:70,orange:60,red:50,total:function(){return this.green+this.orange+this.red}},t=0,u=1;switch(n){case S.d.Choices:t=5*-Math.max(0,8-this.currentChoices.length);break;case S.d.Word:t=5*l.exercise.foreign.word.length;break;case S.d.Select:var i=l.exercise.options.split("|").length;t=-Math.max(0,12-i),t+=Math.trunc(l.exercise.options.length/2);break;case S.d.FillIn:t=5*l.exercise.foreign.word.length;break;case S.d.Comparison:case S.d.Conjugations:t=l.exercise.foreign.word.length,u=1.2}return e.green=(e.green+t)*u,e.orange=(e.orange+t)*u,e.red=(e.red+t)*u,e},n.prototype.calculateGrade=function(n,l,e,t){var u;switch(void 0===e&&(e=0),void 0===t&&(t=""),n){case S.d.Choices:case S.d.Select:u=this.calculateChoicesGrade(l);break;case S.d.Word:case S.d.FillIn:case S.d.Comparison:case S.d.Conjugations:u=this.calculateWordGrade(l,e,t)}return u},n.prototype.calculateWordGrade=function(n,l,e){var t=3,u=e.length;return n<=18*u?t=5:n<36*u&&(t=4),t-l},n.prototype.calculateChoicesGrade=function(n){var l=3;return n<=30?l=5:n<60&&(l=4),l},n.prototype.calculateLearnLevel=function(n,l){var e;switch(n){case S.d.Choices:case S.d.Select:e=this.calculateChoicesLearnLevel(l);break;case S.d.Word:case S.d.FillIn:e=this.calculateWordLearnLevel(l)}return l.correct&&this.soundLearnedLevel(e),e},n.prototype.calculateWordLearnLevel=function(n){var l=n.level;return n.correct||n.alt?l+=5:l-=n.almostCorrect?2:3,Math.max(l,0)},n.prototype.calculateChoicesLearnLevel=function(n){var l=n.level;return n.correct?l+=l<9?3:h.d-l-1:l-=1,Math.max(l,0)},n.prototype.addCount=function(n,l){n?this.addRightCount(l):this.addWrongCount(l)},n.prototype.addWrongCount=function(n){var l=this.dataByExerciseUnid[n];l.countWrong=l.countWrong?++l.countWrong:1},n.prototype.addRightCount=function(n){var l=this.dataByExerciseUnid[n];l.countRight=l.countRight?++l.countRight:1},n.prototype.soundLearnedLevel=function(n){},n.prototype.setChoices=function(){var n,l,e=this.getCurrentLearnLevel(this.currentData),t=this.currentData.exercise,u=this.currentData.data.direction,i=[],o=this.getNrOfChoices(e),s=u===S.b.ForeignToLocal?t.local.word:t.foreign.word;for(l=this.choices.map(function(n){return n}),i.push(s);i.length<o&&l;)n=this.selectChoice(l,t,u),i.find(function(l){return l===n})||i.push(n);this.currentChoices=this.previewService.shuffle(i.filter(function(n){return!!n}))},n.prototype.selectChoice=function(n,l,e){var t,u;switch(Math.floor(3*Math.random())){case 0:t=Math.floor(Math.random()*n.length);break;case 1:t=this.getNearestChoice("foreign",n,l.foreign.word);break;case 2:t=this.getNearestChoice("local",n,l.local.word)}return n[t]&&(u=e===S.b.ForeignToLocal?this.addArticle(n[t].local,n[t].localArticle):this.addArticle(n[t].foreign,n[t].foreignArticle)),n.splice(t,1),u},n.prototype.getNearestChoice=function(n,l,e){var t,u,i=this;return l.forEach(function(l,o){e!==l[n]&&(t=i.previewService.getDamerauLevenshteinDistance(e,l[n]),(!u||t<u.dl)&&(u={index:o,dl:t}))}),u&&u.dl>9?Math.floor(Math.random()*l.length):u&&u.index||0},n.prototype.addArticle=function(n,l){return l&&this.isAddArticle()?l+" "+n:n},n.prototype.determineQuestionType=function(n,l){var e=S.d.Choices;switch(n.exercise.tpe||S.c.Word){case S.c.Word:n.result&&(l>5&&l<10&&(e=Math.random()>=.5?S.d.Choices:S.d.Word),l>9&&(e=S.d.Word));break;case S.c.Genus:case S.c.Article:case S.c.Select:e=S.d.Select;break;case S.c.QA:case S.c.FillIn:e=S.d.FillIn;break;case S.c.Comparison:e=S.d.Comparison;break;case S.c.Conjugations:e=S.d.Conjugations}return e},n.prototype.getNrOfChoices=function(n){return 8},n.prototype.getCurrentLearnLevel=function(n){var l=n&&n.result?n.result.learnLevel||0:1,e=this.dataByExerciseUnid[n.exercise._id+(n.exercise.lessonId||"")].levels;return null!==e&&(l=e),l},n.prototype.buildExerciseData=function(n,l,e){void 0===e&&(e=null),this.exerciseData=this.learnService.buildExerciseData(n,l,this.text,{isBidirectional:!0,direction:S.b.LocalToForeign},this.lesson?this.lesson.options:e),this.exerciseData=this.previewService.shuffle(this.exerciseData),this.getChoices(this.course._id,!0),this.setExerciseDataById()},n.prototype.setExerciseDataById=function(){var n=this;this.exerciseData.forEach(function(l){n.dataByExerciseUnid[l.exercise._id+(l.exercise.lessonId||"")]={countRight:0,countWrong:0,levels:null}})},n.prototype.practiseDone=function(n){this.isExercisesDone=!0},n.prototype.getConfig=function(n){var l=this;this.learnService.fetchLanConfig(n).pipe(Object(P.a)(function(){return l.componentActive})).subscribe(function(n){n&&(l.keys=n.keys,l.pronouns=n.subjectPronouns)},function(n){return l.errorService.handleError(n)})},n.prototype.checkExercisesInterrupted=function(){var n=this;this.exercisesInterrupted.pipe(Object(P.a)(function(){return n.componentActive})).subscribe(function(l){var e=n.current;n.currentData.data.isDone&&e++,e>0?(n.exerciseData=n.exerciseData.slice(0,e),n.practiseDone(n.exerciseData),n.stepCompleted.emit(n.exerciseData)):(n.practiseDone(null),n.stepCompleted.emit(null))})},n.prototype.checkCountUpdated=function(){var n=this;this.stepcountUpdated&&this.stepcountUpdated.pipe(Object(P.a)(function(){return n.componentActive})).subscribe(function(l){l&&(n.countPerStep=l)})},n.prototype.isCaseSensitive=function(){return"study"===this.currentStep||"practise"===this.currentStep?!!this.lesson&&this.lesson.options.caseSensitive:!!this.course&&this.course.defaults.caseSensitive},n.prototype.isAddArticle=function(){return"study"===this.currentStep||"practise"===this.currentStep?!!this.lesson&&this.lesson.options.addArticle:!!this.course&&this.course.defaults.addArticle},n.prototype.isRehearse=function(){return("study"===this.currentStep||"practise"===this.currentStep)&&!(!this.lesson||!this.lesson.rehearseStep)},n.prototype.log=function(n){this.sharedService.sendEventMessage({message:n,source:"Abstract class Step"})},n}(),te=function(){function n(){}return n.prototype.loadAudio=function(n){var l=new Audio;return l.src=n,l.load(),l.volume=.1,l},n.prototype.playSound=function(n,l){n||l.play()},n}(),ue=function(n){function l(l,e,u,i,o,s){var r=n.call(this,l,e,i,u)||this;return r.userService=o,r.audioService=s,r.isDemo=!1,r.lessonCompleted=new t.EventEmitter,r.stepBack=new t.EventEmitter,r.toPractise=0,r.isLoading=!1,r.isRehearsal=!1,r}return Object(le.__extends)(l,n),l.prototype.ngOnInit=function(){this.currentStep="practise",this.beep=this.audioService.loadAudio("/assets/audio/gluck.ogg"),this.checkLessonChanged(),this.getLessonResults()},l.prototype.onToStudy=function(){this.stepBack.emit()},l.prototype.onContinuePractise=function(){this.clearToContinue(),this.fetchLessonResults()},l.prototype.onToNextLesson=function(){this.lesson.rehearseStep||this.lessonCompleted.emit(this.lesson._id)},l.prototype.onRehearseAll=function(){this.rehearseAll()},l.prototype.isWordCorrect=function(){var n=!1;return this.current>=0&&(n=this.exerciseData[this.current].data.isCorrect),n},l.prototype.getAlts=function(n,l){var e="";return l&&l[n]&&l[n].alt&&(e=l[n].alt.split("|").join(", ")),e},l.prototype.nextWord=function(){n.prototype.nextWord.call(this)},l.prototype.doAddExercise=function(n,l,e){var t=this.exerciseData.length,u=!1;if(n===S.a.Correct||n===S.a.Alt)switch(l){case S.d.Choices:t<this.settings.nrOfWordsLearn*this.maxRepeatWord&&e<h.d&&(u=!0);break;case S.d.Word:(t<this.settings.nrOfWordsLearn*this.maxRepeatWord||e<3)&&e<h.d&&(u=!0);break;default:u=!1}else u=!0;var i=this.dataByExerciseUnid[this.currentData.exercise._id],o=n===S.a.Correct||n===S.a.Alt;return o&&(i.countRight?i.countRight:0)<=4||!o&&(i.countWrong?i.countWrong:0)<=3||(u=!1),u},l.prototype.shuffleRemainingExercises=function(){var n=this.lesson.exercises.length,l=this.exerciseData.length,e=this.current+1,t=this.exerciseData.slice(0,e),u=!1;if(this.exerciseData[this.current]&&(u=this.exerciseData[this.current].data.questionType===S.d.Preview),u||e>n&&l-e>2){var i=l>1?1:0,o=this.exerciseData.slice(-1),s=this.exerciseData.slice(e,l-i),r=this.previewService.shuffle(s);this.exerciseData=t.concat(r),1===i&&(this.exerciseData=this.exerciseData.concat(o))}},l.prototype.determineQuestionType=function(n,l){if(!this.hasStudyTab&&!n.result&&0===n.data.answered&&n.exercise.tpe===S.c.Word)return S.d.Preview;var e=S.d.Choices;switch(n.exercise.tpe||S.c.Word){case S.c.Word:n.result&&(l>5&&l<9&&(e=Math.random()>=.5?S.d.Choices:S.d.Word),l>8&&(e=S.d.Word));break;case S.c.Genus:case S.c.Article:case S.c.Select:e=S.d.Select;break;case S.c.QA:case S.c.FillIn:e=S.d.FillIn;break;case S.c.Comparison:e=S.d.Comparison;break;case S.c.Conjugations:e=S.d.Conjugations}return e},l.prototype.getNrOfChoices=function(n){var l;return l=n<=0?4:6,n>=3&&(l=8),l},l.prototype.getLessonResults=function(){"practise"===this.lesson.rehearseStep?this.rehearseAll():(this.isRehearsal=!1,this.isDemo?(this.userService.getDemoData("study",this.course._id),this.userService.getDemoData("practise",this.course._id)?(this.noMoreExercises=!0,this.isReady=!0):(this.noMoreExercises=!1,this.getDemoQuestions())):this.fetchLessonResults())},l.prototype.fetchLessonResults=function(){var l=this;this.isLoading=!0,this.learnService.fetchLessonStepResults(this.lesson._id,"practise").pipe(Object(P.a)(function(){return l.componentActive})).subscribe(function(e){l.isLoading=!1,e&&e.count&&l.getNewQuestions(e.count),l.isReady=!0,l.exerciseData.length>0?n.prototype.init.call(l):l.noMoreExercises=!0},function(n){return l.errorService.handleError(n)})},l.prototype.getNewQuestions=function(n){var l,e=this,t=0,u=[],i=[],o=[];u=this.lesson.exercises.filter(function(t){return(l=n&&n.find(function(n){return n.exerciseId===t._id}))&&!l.isLearned||!l&&(t.tpe!==S.c.Word||!e.hasStudyTab)}),this.toPractise=u.length;var s=this.learnService.getMaxExercises(u,this.settings.nrOfWordsLearn);return u.forEach(function(e){i.length<s?(i.push(e),l=n&&n.find(function(n){return n.exerciseId===e._id}),o.push(l)):t++}),this.buildExerciseData(i,o),t},l.prototype.getDemoQuestions=function(){var l=this.lesson.exercises.slice(0,this.settings.nrOfWordsLearn);this.buildExerciseData(l,null),this.current=-1,this.isQuestionReady=!1,this.isExercisesDone=!1,this.noMoreExercises=!1,this.isReady=!0,n.prototype.init.call(this)},l.prototype.rehearseAll=function(){this.current=-1,this.isRehearsal=!0,this.isExercisesDone=!1,this.getRepeatQuestions()},l.prototype.getRepeatQuestions=function(){var l=this.learnService.getRandomExercises(this.lesson.exercises,this.settings.nrOfWordsLearnRepeat||10);this.buildExerciseData(l,null),this.isReady=!0,n.prototype.init.call(this)},l.prototype.buildExerciseData=function(n,l){var e=this.lesson.exerciseSteps.practise;this.exerciseData=this.learnService.buildExerciseData(n,l,this.text,{isBidirectional:e.bidirectional,direction:S.b.LocalToForeign},this.lesson?this.lesson.options:null),e.ordered||(this.exerciseData=this.previewService.shuffle(this.exerciseData)),this.setExerciseDataById(),this.getChoices(this.course._id,e.bidirectional)},l.prototype.soundLearnedLevel=function(n){n>h.d&&this.audioService.playSound(this.settings.mute,this.beep)},l.prototype.previewDone=function(){var n=this.exerciseData[this.current];n&&(n.data.isDone=!0,n.data.isCorrect=!0,n.data.points.base=2,n.result||(n.data.points.base=2),this.pointsEarned.next(2),this.addExercise(null,null),this.nextWord())},l.prototype.checkLessonChanged=function(){var n=this;this.lessonChanged.pipe(Object(P.a)(function(){return n.componentActive})).subscribe(function(l){n.lesson=l,n.lesson.rehearseStep||(n.noMoreExercises=!1,n.isExercisesDone=!1,n.getLessonResults())})},l.prototype.calculateAgePoints=function(n){return 0},l.prototype.ngOnDestroy=function(){this.componentActive=!1},l}(ee),ie=t["\u0275crt"]({encapsulation:0,styles:[K],data:{}});function oe(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-countdown",[],null,[[null,"countedDown"]],function(n,l,e){var t=!0;return"countedDown"===l&&(t=!1!==n.component.onCountDownFinished()&&t),t},on.b,on.a)),t["\u0275did"](1,245760,null,0,sn.a,[],{counter:[0,"counter"],mute:[1,"mute"]},{countedDown:"countedDown"})],function(n,l){var e=l.component;n(l,1,0,e.settings.delay,e.isMute)},null)}function se(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-bullets",[],null,null,null,pn,an)),t["\u0275did"](1,245760,null,0,rn,[],{onNextExercise:[0,"onNextExercise"],exercises:[1,"exercises"],current:[2,"current"],text:[3,"text"]},null)],function(n,l){var e=l.component;n(l,1,0,e.nextExercise,e.exerciseData,e.current,e.text)},null)}function re(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-timer",[],null,null,null,Cl,xl)),t["\u0275did"](1,704512,[[6,4]],0,vl,[],{data:[0,"data"]},null)],function(n,l){n(l,1,0,l.component.currentData)},null)}function ae(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"span",[["class","new"]],null,null,null,null,null)),(n()(),t["\u0275ted"](1,null,["","!"]))],null,function(n,l){n(l,1,0,l.component.text.NewWord)})}function ce(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"span",[["class","case"]],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Aa"]))],null,null)}function de(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","clearfix"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"km-question",[],null,null,null,fn.b,fn.a)),t["\u0275did"](2,245760,null,0,hn.a,[],{lanPair:[0,"lanPair"],text:[1,"text"],currentData:[2,"currentData"],dir:[3,"dir"],showAlt:[4,"showAlt"],isStudy:[5,"isStudy"],settings:[6,"settings"],onHasAnswered:[7,"onHasAnswered"],onGotoNextWord:[8,"onGotoNextWord"]},null)],function(n,l){var e=l.component;n(l,2,0,e.lanPair,e.text,e.currentData,e.getQuestionDir(),!0,(null==e.currentData?null:null==e.currentData.data?null:e.currentData.data.questionType)===e.qType.Preview,e.settings,e.hasAnswered,e.gotoNextWord)},null)}function pe(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-word-choices",[],null,[[null,"selected"]],function(n,l,e){var t=!0;return"selected"===l&&(t=!1!==n.component.onSelected(e)&&t),t},Dl,Sl)),t["\u0275did"](1,573440,null,0,bl,[k],{lanPair:[0,"lanPair"],choices:[1,"choices"],data:[2,"data"],instruction:[3,"instruction"],answer:[4,"answer"],answered:[5,"answered"],isSelected:[6,"isSelected"]},{selected:"selected"})],function(n,l){var e=l.component;n(l,1,0,e.lanPair,e.currentChoices,e.currentData,e.text.instructionChoices,e.answer,e.answered,e.isAnswered)},null)}function fe(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,3,"km-word-field",[],null,null,null,Ml,Nl)),t["\u0275did"](1,8962048,[[1,4]],0,Pl,[p.a],{lan:[0,"lan"],prefix:[1,"prefix"],disabled:[2,"disabled"],data:[3,"data"],keyboard:[4,"keyboard"],solution:[5,"solution"],instruction:[6,"instruction"]},null),t["\u0275pod"](2,{showKeyboard:0,keys:1}),t["\u0275pod"](3,{solution:0,msg:1})],function(n,l){var e=l.component;n(l,1,0,e.lanPair.to,e.prefix,e.isAnswered,e.currentData,n(l,2,0,e.settings.keyboard,e.keys),n(l,3,0,e.solution,e.text.Expectedanswer),e.text.instructionWordfield)},null)}function he(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-select",[],null,[[null,"answered"]],function(n,l,e){var t=!0;return"answered"===l&&(t=!1!==n.component.onAnsweredSelect(e)&&t),t},Al.b,Al.a)),t["\u0275did"](1,573440,[[4,4]],0,_l.a,[I.a],{lanPair:[0,"lanPair"],text:[1,"text"],data:[2,"data"]},{answered:"answered"})],function(n,l){var e=l.component;n(l,1,0,e.lanPair,e.text,e.currentData)},null)}function ge(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"km-qa",[],null,null,null,Vl.b,Vl.a)),t["\u0275did"](1,8962048,[[5,4]],0,ql.a,[p.a],{lanPair:[0,"lanPair"],text:[1,"text"],data:[2,"data"],keyboard:[3,"keyboard"]},null),t["\u0275pod"](2,{showKeyboard:0,keys:1})],function(n,l){var e=l.component;n(l,1,0,e.lanPair,e.text,e.currentData,n(l,2,0,e.settings.keyboard,e.keys))},null)}function me(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"km-comparison",[],null,null,null,Wl.b,Wl.a)),t["\u0275did"](1,4833280,[[2,4]],0,jl.a,[p.a,t.Renderer],{lanPair:[0,"lanPair"],text:[1,"text"],data:[2,"data"],keyboard:[3,"keyboard"]},null),t["\u0275pod"](2,{showKeyboard:0,keys:1})],function(n,l){var e=l.component;n(l,1,0,e.lanPair,e.text,e.currentData,n(l,2,0,e.settings.keyboard,e.keys))},null)}function ve(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"km-conjugations",[],null,null,null,Xl,Kl)),t["\u0275did"](1,4767744,[[3,4]],0,$l,[p.a,t.Renderer],{lanPair:[0,"lanPair"],text:[1,"text"],data:[2,"data"],pronouns:[3,"pronouns"],keyboard:[4,"keyboard"]},null),t["\u0275pod"](2,{showKeyboard:0,keys:1})],function(n,l){var e=l.component;n(l,1,0,e.lanPair,e.text,e.currentData,e.pronouns,n(l,2,0,e.settings.keyboard,e.keys))},null)}function xe(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,7,"div",[["class","answer"]],[[2,"imagepadding",null]],null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,6,"h1",[["class","word"]],null,null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),t["\u0275eld"](3,0,null,null,0,"img",[["class","flag"]],[[8,"src",4]],null,null,null,null)),(n()(),t["\u0275eld"](4,0,null,null,3,"span",[],null,null,null,null,null)),(n()(),t["\u0275ted"](5,null,[" "," "])),(n()(),t["\u0275eld"](6,0,null,null,1,"div",[["class","alts"]],null,null,null,null,null)),(n()(),t["\u0275ted"](7,null,["",""]))],null,function(n,l){var e=l.component;n(l,0,0,!(null==e.currentData.exercise||!e.currentData.exercise.image)),n(l,3,0,t["\u0275inlineInterpolate"](1,"/assets/img/flags/",e.lanPair.from,".png")),n(l,5,0,null==e.currentData.exercise?null:null==e.currentData.exercise.local?null:e.currentData.exercise.local.word),n(l,7,0,e.getAlts("local",e.currentData.exercise))})}function Ce(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,23,"div",[["class","card"]],[[2,"preview",null]],null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,4,"div",[["class","pull-right"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,ae)),t["\u0275did"](3,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,ce)),t["\u0275did"](5,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,de)),t["\u0275did"](7,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](8,0,null,null,15,"div",[],null,null,null,null,null)),t["\u0275did"](9,16384,null,0,m.NgSwitch,[],{ngSwitch:[0,"ngSwitch"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,pe)),t["\u0275did"](11,278528,null,0,m.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,m.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,fe)),t["\u0275did"](13,278528,null,0,m.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,m.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,he)),t["\u0275did"](15,278528,null,0,m.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,m.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,ge)),t["\u0275did"](17,278528,null,0,m.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,m.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,me)),t["\u0275did"](19,278528,null,0,m.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,m.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,ve)),t["\u0275did"](21,278528,null,0,m.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,m.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,xe)),t["\u0275did"](23,278528,null,0,m.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,m.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null)],function(n,l){var e=l.component;n(l,3,0,(null==e.currentData?null:null==e.currentData.data?null:e.currentData.data.questionType)===e.qType.Preview),n(l,5,0,null==e.currentData?null:null==e.currentData.data?null:e.currentData.data.isCaseSensitive),n(l,7,0,e.showDefaultQuestion()),n(l,9,0,null==e.currentData?null:null==e.currentData.data?null:e.currentData.data.questionType),n(l,11,0,e.qType.Choices),n(l,13,0,e.qType.Word),n(l,15,0,e.qType.Select),n(l,17,0,e.qType.FillIn),n(l,19,0,e.qType.Comparison),n(l,21,0,e.qType.Conjugations),n(l,23,0,e.qType.Preview)},function(n,l){var e=l.component;n(l,0,0,(null==e.currentData?null:null==e.currentData.data?null:e.currentData.data.questionType)===e.qType.Preview)})}function we(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"button",[["class","btn btn-success"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onToStudy()&&t),t},null,null)),(n()(),t["\u0275ted"](1,null,[" "," "]))],null,function(n,l){n(l,1,0,l.component.text.LearnNewWords)})}function ye(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"button",[["class","btn btn-success"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onToNextLesson()&&t),t},null,null)),(n()(),t["\u0275ted"](1,null,[" "," "]))],null,function(n,l){n(l,1,0,l.component.text.ToNextLesson)})}function be(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,7,"div",[],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,2,"div",[["class","msg-info"]],null,null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,0,"span",[["class","fa fa-info-circle"]],null,null,null,null,null)),(n()(),t["\u0275ted"](3,null,[""," "])),(n()(),t["\u0275and"](16777216,null,null,1,null,we)),t["\u0275did"](5,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,ye)),t["\u0275did"](7,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,5,0,(null==e.countPerStep.study?null:e.countPerStep.study.nrRemaining)>0),n(l,7,0,e.countPerStep.study&&0===(null==e.countPerStep.study?null:e.countPerStep.study.nrRemaining)||!e.countPerStep.study)},function(n,l){n(l,3,0,l.component.text.NoMoreExercises)})}function Se(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"button",[["class","btn btn-success"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onContinuePractise()&&t),t},null,null)),(n()(),t["\u0275eld"](1,0,null,null,0,"span",[["class","fa fa-arrow-right fa-spacing"]],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,[" "," "]))],null,function(n,l){n(l,2,0,l.component.text.ContinuePractise)})}function Ie(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"button",[["class","btn btn-success"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onToStudy()&&t),t},null,null)),(n()(),t["\u0275eld"](1,0,null,null,0,"span",[["class","fa fa-arrow-right fa-spacing"]],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,[" "," "]))],null,function(n,l){n(l,2,0,l.component.text.ContinueStudy)})}function De(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"button",[["class","btn btn-warning"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onToNextLesson()&&t),t},null,null)),(n()(),t["\u0275eld"](1,0,null,null,0,"span",[["class","fa fa-fast-forward fa-spacing"]],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,[" "," "]))],null,function(n,l){n(l,2,0,l.component.text.ToNextLesson)})}function Re(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"button",[["class","btn btn-success"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onRehearseAll()&&t),t},null,null)),(n()(),t["\u0275eld"](1,0,null,null,0,"span",[["class","fa fa-refresh fa-spacing"]],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,[" "," "]))],null,function(n,l){n(l,2,0,l.component.text.RehearseAgain)})}function ke(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,8,"div",[],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Se)),t["\u0275did"](2,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Ie)),t["\u0275did"](4,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,De)),t["\u0275did"](6,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Re)),t["\u0275did"](8,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,2,0,!e.isRehearsal&&(null==e.countPerStep.practise?null:e.countPerStep.practise.nrRemaining)>0),n(l,4,0,!e.isRehearsal&&0===(null==e.countPerStep.practise?null:e.countPerStep.practise.nrRemaining)&&(null==e.countPerStep.study?null:e.countPerStep.study.nrRemaining)>0),n(l,6,0,!e.isRehearsal&&0===(null==e.countPerStep.practise?null:e.countPerStep.practise.nrRemaining)&&0===(null==e.countPerStep.study?null:e.countPerStep.study.nrRemaining)),n(l,8,0,e.isRehearsal)},null)}function Te(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"div",[],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"km-signup",[],null,null,null,$,F)),t["\u0275did"](2,49152,null,0,j,[],{text:[0,"text"],courseId:[1,"courseId"]},null)],function(n,l){var e=l.component;n(l,2,0,e.text,e.course._id)},null)}function Pe(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,8,"div",[],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"km-completed-list",[],null,null,null,On,Sn)),t["\u0275did"](2,114688,null,0,bn,[k],{data:[0,"data"],text:[1,"text"],step:[2,"step"],title:[3,"title"],isRepeat:[4,"isRepeat"]},null),(n()(),t["\u0275eld"](3,0,null,null,1,"km-points-completed",[],null,null,null,vn,mn)),t["\u0275did"](4,114688,null,0,gn,[],{data:[0,"data"],text:[1,"text"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,ke)),t["\u0275did"](6,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Te)),t["\u0275did"](8,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,2,0,e.exerciseData,e.text,"Practise",e.text.Results,e.isRehearsal),n(l,4,0,e.exerciseData,e.text),n(l,6,0,!e.isDemo),n(l,8,0,e.isDemo&&e.course)},null)}function Ne(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-learn-settings",[],null,[[null,"updatedSettings"]],function(n,l,e){var t=!0;return"updatedSettings"===l&&(t=!1!==n.component.onSettingsUpdated(e)&&t),t},Wn,_n)),t["\u0275did"](1,49152,null,0,An,[],{step:[0,"step"],text:[1,"text"],hasGenus:[2,"hasGenus"],isInput:[3,"isInput"],settings:[4,"settings"],isActive:[5,"isActive"]},{updatedSettings:"updatedSettings"})],function(n,l){var e=l.component;n(l,1,0,"practise",e.text,!(null==e.currentData||!e.currentData.exercise.genus),e.isInput(),e.settings,!e.isExercisesDone)},null)}function Oe(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"button",[["class","btn btn-lg btn-success next"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onNextWord(!1)&&t),t},null,null)),(n()(),t["\u0275eld"](1,0,null,null,0,"span",[["class","fa fa-step-forward"]],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,[" "," "]))],null,function(n,l){var e=l.component;n(l,0,0,!e.isAnswered&&e.isSelectionExercise()),n(l,2,0,!e.isAnswered&&e.isInput()?e.text.Check:e.text.Next)})}function Le(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","actions"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Oe)),t["\u0275did"](2,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){n(l,2,0,!l.component.isExercisesDone)},null)}function Ee(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-learnlevel-bar",[],null,null,null,ne,Yl)),t["\u0275did"](1,245760,null,0,Zl,[],{levelUpdated:[0,"levelUpdated"]},null)],function(n,l){n(l,1,0,l.component.levelUpdated)},null)}function Me(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,5,"div",[["class","score"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Ee)),t["\u0275did"](2,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](3,0,null,null,1,"km-points-earned",[],null,null,null,Mn,En)),t["\u0275did"](4,245760,null,0,Ln,[],{pointsEarned:[0,"pointsEarned"]},null),(n()(),t["\u0275eld"](5,0,null,null,0,"div",[["class","clearfix"]],null,null,null,null,null))],function(n,l){var e=l.component;n(l,2,0,!e.isRehearsal&&(null==e.currentData?null:null==e.currentData.exercise?null:e.currentData.exercise.tpe)===e.exType.Word&&(null==e.currentData?null:null==e.currentData.data?null:e.currentData.data.questionType)!==e.qType.Preview),n(l,4,0,e.pointsEarned)},null)}function Ae(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"button",[["class","btn btn-lg btn-warning next"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onNextWord(!0)&&t),t},null,null)),(n()(),t["\u0275eld"](1,0,null,null,0,"span",[["class","fa fa-step-forward"]],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,[" "," "]))],null,function(n,l){n(l,2,0,l.component.text.GiveAnswer)})}function _e(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","actions"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Ae)),t["\u0275did"](2,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){n(l,2,0,!l.component.isExercisesDone)},null)}function Ve(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,8,"div",[["class","col-xs-4"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Ne)),t["\u0275did"](2,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Le)),t["\u0275did"](4,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Me)),t["\u0275did"](6,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,_e)),t["\u0275did"](8,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,2,0,!e.noMoreExercises),n(l,4,0,!e.noMoreExercises),n(l,6,0,!e.isExercisesDone),n(l,8,0,!e.noMoreExercises&&!e.isAnswered)},null)}function qe(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,17,"section",[["class","main-card"],["kmPressed",""]],null,[[null,"hasKeyPressed"],["document","keydown"]],function(n,l,e){var u=!0,i=n.component;return"document:keydown"===l&&(u=!1!==t["\u0275nov"](n,1).keypress(e)&&u),"hasKeyPressed"===l&&(u=!1!==i.onKeyPressed(e)&&u),u},null,null)),t["\u0275did"](1,16384,null,0,jn.a,[],null,{hasKeyPressed:"hasKeyPressed"}),(n()(),t["\u0275eld"](2,0,null,null,12,"div",[],null,null,null,null,null)),t["\u0275did"](3,278528,null,0,m.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{ngClass:[0,"ngClass"]},null),(n()(),t["\u0275eld"](4,0,null,null,10,"div",[["class","panel centerpanel"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,se)),t["\u0275did"](6,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,re)),t["\u0275did"](8,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Ce)),t["\u0275did"](10,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,be)),t["\u0275did"](12,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Pe)),t["\u0275did"](14,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Ve)),t["\u0275did"](16,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](17,0,null,null,0,"div",[["class","clearfix"]],null,null,null,null,null))],function(n,l){var e=l.component;n(l,3,0,e.isExercisesDone?"col-xs-12":"col-xs-8"),n(l,6,0,!e.isExercisesDone),n(l,8,0,!e.isExercisesDone&&e.isQuestionReady),n(l,10,0,!e.isExercisesDone&&e.isQuestionReady),n(l,12,0,e.noMoreExercises&&!(null!=e.exerciseData&&e.exerciseData.length)),n(l,14,0,e.isExercisesDone&&(null==e.exerciseData?null:e.exerciseData.length)),n(l,16,0,!e.isExercisesDone)},null)}function We(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-loader",[],null,null,null,C.b,C.a)),t["\u0275did"](1,114688,null,0,w.a,[],{msg:[0,"msg"],showBackground:[1,"showBackground"]},null)],function(n,l){n(l,1,0,l.component.text.LoadingExercises,!1)},null)}function je(n){return t["\u0275vid"](0,[(n()(),t["\u0275and"](16777216,null,null,1,null,qe)),t["\u0275did"](1,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,We)),t["\u0275did"](3,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](0,null,null,0))],function(n,l){var e=l.component;n(l,1,0,e.isReady),n(l,3,0,e.isLoading&&!e.isError)},null)}function Fe(n){return t["\u0275vid"](0,[t["\u0275qud"](671088640,1,{answerComponent:0}),t["\u0275qud"](671088640,2,{comparisonComponent:0}),t["\u0275qud"](671088640,3,{conjugationsComponent:0}),t["\u0275qud"](671088640,4,{selectComponent:0}),t["\u0275qud"](671088640,5,{qaComponent:0}),t["\u0275qud"](671088640,6,{timerComponent:0}),(n()(),t["\u0275and"](16777216,null,null,1,null,oe)),t["\u0275did"](7,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(n()(),t["\u0275and"](0,[["exercise",2]],null,0,null,je))],function(n,l){n(l,7,0,l.component.isCountDown,t["\u0275nov"](l,8))},null)}var $e=function(n){function l(l,e,t,u){var i=n.call(this,l,e,u,t)||this;return i.isLoading=!1,i}return Object(le.__extends)(l,n),l.prototype.ngOnInit=function(){this.currentStep="review",this.getToReview(),this.checkToContinue()},l.prototype.onContinueReview=function(){this.continueReview()},l.prototype.continueReview=function(){this.clearToContinue(),this.getToReview()},l.prototype.getToReview=function(){var n=this;this.isLoading=!0,this.learnService.fetchToReview(this.course._id,this.settings.nrOfWordsReview).pipe(Object(P.a)(function(){return n.componentActive})).subscribe(function(l){return n.setExercises(l.toreview,l.results)},function(l){return n.errorService.handleError(l)})},l.prototype.setExercises=function(l,e){var t,u=l.map(function(n){return(t=n.exercise).lessonId=n.lessonId,t}),i=l.map(function(n){return n.options});this.isLoading=!1,u.length>0?(this.buildExerciseData(u,e,i[0]),this.noMoreExercises=!1,this.isReady=!0,n.prototype.init.call(this)):(this.exerciseData=[],this.noMoreExercises=!0,this.isExercisesDone=!0,this.isCountDown=!1,this.isReady=!0)},l.prototype.checkToContinue=function(){var n=this;this.continueCourseLevel.pipe(Object(P.a)(function(){return n.componentActive})).subscribe(function(l){n.continueReview()})},l.prototype.ngOnDestroy=function(){this.componentActive=!1},l}(ee),Ke=t["\u0275crt"]({encapsulation:0,styles:[K],data:{}});function Be(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-countdown",[],null,[[null,"countedDown"]],function(n,l,e){var t=!0;return"countedDown"===l&&(t=!1!==n.component.onCountDownFinished()&&t),t},on.b,on.a)),t["\u0275did"](1,245760,null,0,sn.a,[],{counter:[0,"counter"],mute:[1,"mute"]},{countedDown:"countedDown"})],function(n,l){var e=l.component;n(l,1,0,e.settings.delay,e.isMute)},null)}function Ue(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-bullets",[],null,null,null,pn,an)),t["\u0275did"](1,245760,null,0,rn,[],{onNextExercise:[0,"onNextExercise"],exercises:[1,"exercises"],current:[2,"current"],text:[3,"text"]},null)],function(n,l){var e=l.component;n(l,1,0,e.nextExercise,e.exerciseData,e.current,e.text)},null)}function ze(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-timer",[],null,null,null,Cl,xl)),t["\u0275did"](1,704512,[[6,4]],0,vl,[],{data:[0,"data"]},null)],function(n,l){n(l,1,0,l.component.currentData)},null)}function Ge(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"span",[["class","new"]],null,null,null,null,null)),(n()(),t["\u0275ted"](1,null,["","!"]))],null,function(n,l){n(l,1,0,l.component.text.NewWord)})}function Qe(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"span",[["class","case"]],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Aa"]))],null,null)}function He(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","clearfix"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"km-question",[],null,null,null,fn.b,fn.a)),t["\u0275did"](2,245760,null,0,hn.a,[],{lanPair:[0,"lanPair"],text:[1,"text"],currentData:[2,"currentData"],dir:[3,"dir"],showAlt:[4,"showAlt"],settings:[5,"settings"],onHasAnswered:[6,"onHasAnswered"],onGotoNextWord:[7,"onGotoNextWord"]},null)],function(n,l){var e=l.component;n(l,2,0,e.lanPair,e.text,e.currentData,e.getQuestionDir(),!0,e.settings,e.hasAnswered,e.gotoNextWord)},null)}function Je(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-word-choices",[],null,[[null,"selected"]],function(n,l,e){var t=!0;return"selected"===l&&(t=!1!==n.component.onSelected(e)&&t),t},Dl,Sl)),t["\u0275did"](1,573440,null,0,bl,[k],{lanPair:[0,"lanPair"],choices:[1,"choices"],data:[2,"data"],instruction:[3,"instruction"],answer:[4,"answer"],answered:[5,"answered"],isSelected:[6,"isSelected"]},{selected:"selected"})],function(n,l){var e=l.component;n(l,1,0,e.lanPair,e.currentChoices,e.currentData,e.text.instructionChoices,e.answer,e.answered,e.isAnswered)},null)}function Xe(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,3,"km-word-field",[],null,null,null,Ml,Nl)),t["\u0275did"](1,8962048,[[1,4]],0,Pl,[p.a],{lan:[0,"lan"],prefix:[1,"prefix"],disabled:[2,"disabled"],data:[3,"data"],keyboard:[4,"keyboard"],solution:[5,"solution"],instruction:[6,"instruction"]},null),t["\u0275pod"](2,{showKeyboard:0,keys:1}),t["\u0275pod"](3,{solution:0,msg:1})],function(n,l){var e=l.component;n(l,1,0,e.lanPair.to,e.prefix,e.isAnswered,e.currentData,n(l,2,0,e.settings.keyboard,e.keys),n(l,3,0,e.solution,e.text.Expectedanswer),e.text.instructionWordfield)},null)}function Ze(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-select",[],null,[[null,"answered"]],function(n,l,e){var t=!0;return"answered"===l&&(t=!1!==n.component.onAnsweredSelect(e)&&t),t},Al.b,Al.a)),t["\u0275did"](1,573440,[[4,4]],0,_l.a,[I.a],{lanPair:[0,"lanPair"],text:[1,"text"],data:[2,"data"]},{answered:"answered"})],function(n,l){var e=l.component;n(l,1,0,e.lanPair,e.text,e.currentData)},null)}function Ye(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"km-qa",[],null,null,null,Vl.b,Vl.a)),t["\u0275did"](1,8962048,[[5,4]],0,ql.a,[p.a],{lanPair:[0,"lanPair"],text:[1,"text"],data:[2,"data"],keyboard:[3,"keyboard"]},null),t["\u0275pod"](2,{showKeyboard:0,keys:1})],function(n,l){var e=l.component;n(l,1,0,e.lanPair,e.text,e.currentData,n(l,2,0,e.settings.keyboard,e.keys))},null)}function nt(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"km-comparison",[],null,null,null,Wl.b,Wl.a)),t["\u0275did"](1,4833280,[[2,4]],0,jl.a,[p.a,t.Renderer],{lanPair:[0,"lanPair"],text:[1,"text"],data:[2,"data"],keyboard:[3,"keyboard"]},null),t["\u0275pod"](2,{showKeyboard:0,keys:1})],function(n,l){var e=l.component;n(l,1,0,e.lanPair,e.text,e.currentData,n(l,2,0,e.settings.keyboard,e.keys))},null)}function lt(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"km-conjugations",[],null,null,null,Xl,Kl)),t["\u0275did"](1,4767744,[[3,4]],0,$l,[p.a,t.Renderer],{lanPair:[0,"lanPair"],text:[1,"text"],data:[2,"data"],pronouns:[3,"pronouns"],keyboard:[4,"keyboard"]},null),t["\u0275pod"](2,{showKeyboard:0,keys:1})],function(n,l){var e=l.component;n(l,1,0,e.lanPair,e.text,e.currentData,e.pronouns,n(l,2,0,e.settings.keyboard,e.keys))},null)}function et(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,7,"div",[["class","answer"]],[[2,"imagepadding",null]],null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,6,"h1",[["class","word"]],null,null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),t["\u0275eld"](3,0,null,null,0,"img",[["class","flag"]],[[8,"src",4]],null,null,null,null)),(n()(),t["\u0275eld"](4,0,null,null,3,"span",[],null,null,null,null,null)),(n()(),t["\u0275ted"](5,null,[" "," "])),(n()(),t["\u0275eld"](6,0,null,null,1,"div",[["class","alts"]],null,null,null,null,null)),(n()(),t["\u0275ted"](7,null,["",""]))],null,function(n,l){var e=l.component;n(l,0,0,!(null==e.currentData.exercise||!e.currentData.exercise.image)),n(l,3,0,t["\u0275inlineInterpolate"](1,"/assets/img/flags/",e.lanPair.from,".png")),n(l,5,0,null==e.currentData.exercise?null:null==e.currentData.exercise.local?null:e.currentData.exercise.local.word),n(l,7,0,e.getAlts("local",e.currentData.exercise))})}function tt(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,23,"div",[["class","card"]],[[2,"preview",null]],null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,4,"div",[["class","pull-right"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Ge)),t["\u0275did"](3,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Qe)),t["\u0275did"](5,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,He)),t["\u0275did"](7,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](8,0,null,null,15,"div",[],null,null,null,null,null)),t["\u0275did"](9,16384,null,0,m.NgSwitch,[],{ngSwitch:[0,"ngSwitch"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Je)),t["\u0275did"](11,278528,null,0,m.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,m.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Xe)),t["\u0275did"](13,278528,null,0,m.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,m.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Ze)),t["\u0275did"](15,278528,null,0,m.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,m.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Ye)),t["\u0275did"](17,278528,null,0,m.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,m.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,nt)),t["\u0275did"](19,278528,null,0,m.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,m.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,lt)),t["\u0275did"](21,278528,null,0,m.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,m.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,et)),t["\u0275did"](23,278528,null,0,m.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,m.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null)],function(n,l){var e=l.component;n(l,3,0,(null==e.currentData?null:null==e.currentData.data?null:e.currentData.data.questionType)===e.qType.Preview),n(l,5,0,null==e.currentData?null:null==e.currentData.data?null:e.currentData.data.isCaseSensitive),n(l,7,0,e.showDefaultQuestion()),n(l,9,0,null==e.currentData?null:null==e.currentData.data?null:e.currentData.data.questionType),n(l,11,0,e.qType.Choices),n(l,13,0,e.qType.Word),n(l,15,0,e.qType.Select),n(l,17,0,e.qType.FillIn),n(l,19,0,e.qType.Comparison),n(l,21,0,e.qType.Conjugations),n(l,23,0,e.qType.Preview)},function(n,l){var e=l.component;n(l,0,0,(null==e.currentData?null:null==e.currentData.data?null:e.currentData.data.questionType)===e.qType.Preview)})}function ut(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,3,"div",[],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,2,"div",[["class","msg-info"]],null,null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,0,"span",[["class","fa fa-info-circle"]],null,null,null,null,null)),(n()(),t["\u0275ted"](3,null,[""," "]))],null,function(n,l){n(l,3,0,l.component.text.NoMoreReviewExercises)})}function it(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"button",[["class","btn btn-success"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onContinueReview()&&t),t},null,null)),(n()(),t["\u0275eld"](1,0,null,null,0,"span",[["class","fa fa-arrow-right fa-spacing"]],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,[" "," "]))],null,function(n,l){n(l,2,0,l.component.text.ContinueReview)})}function ot(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,6,"div",[],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"km-completed-list",[],null,null,null,On,Sn)),t["\u0275did"](2,114688,null,0,bn,[k],{data:[0,"data"],text:[1,"text"],step:[2,"step"],title:[3,"title"]},null),(n()(),t["\u0275eld"](3,0,null,null,1,"km-points-completed",[],null,null,null,vn,mn)),t["\u0275did"](4,114688,null,0,gn,[],{data:[0,"data"],text:[1,"text"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,it)),t["\u0275did"](6,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,2,0,e.exerciseData,e.text,"Review",e.text.Results),n(l,4,0,e.exerciseData,e.text),n(l,6,0,(null==e.countPerStep.review?null:e.countPerStep.review.nrRemaining)>0)},null)}function st(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-learn-settings",[],null,[[null,"updatedSettings"]],function(n,l,e){var t=!0;return"updatedSettings"===l&&(t=!1!==n.component.onSettingsUpdated(e)&&t),t},Wn,_n)),t["\u0275did"](1,49152,null,0,An,[],{step:[0,"step"],text:[1,"text"],hasGenus:[2,"hasGenus"],isInput:[3,"isInput"],settings:[4,"settings"],isActive:[5,"isActive"]},{updatedSettings:"updatedSettings"})],function(n,l){var e=l.component;n(l,1,0,"review",e.text,!(null==e.currentData||!e.currentData.exercise.genus),e.isInput(),e.settings,!e.isExercisesDone)},null)}function rt(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"button",[["class","btn btn-lg btn-success next"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onNextWord()&&t),t},null,null)),(n()(),t["\u0275eld"](1,0,null,null,0,"span",[["class","fa fa-step-forward"]],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,[" "," "]))],null,function(n,l){var e=l.component;n(l,0,0,!e.isAnswered&&e.isSelectionExercise()),n(l,2,0,!e.isAnswered&&e.isInput()?e.text.Check:e.text.Next)})}function at(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","actions"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,rt)),t["\u0275did"](2,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){n(l,2,0,!l.component.isExercisesDone)},null)}function ct(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-learnlevel-bar",[],null,null,null,ne,Yl)),t["\u0275did"](1,245760,null,0,Zl,[],{levelUpdated:[0,"levelUpdated"]},null)],function(n,l){n(l,1,0,l.component.levelUpdated)},null)}function dt(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,5,"div",[["class","score"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,ct)),t["\u0275did"](2,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](3,0,null,null,1,"km-points-earned",[],null,null,null,Mn,En)),t["\u0275did"](4,245760,null,0,Ln,[],{pointsEarned:[0,"pointsEarned"]},null),(n()(),t["\u0275eld"](5,0,null,null,0,"div",[["class","clearfix"]],null,null,null,null,null))],function(n,l){var e=l.component;n(l,2,0,(null==e.currentData?null:null==e.currentData.exercise?null:e.currentData.exercise.tpe)===e.exType.Word&&(null==e.currentData?null:null==e.currentData.data?null:e.currentData.data.questionType)!==e.qType.Preview),n(l,4,0,e.pointsEarned)},null)}function pt(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"button",[["class","btn btn-lg btn-warning next"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onNextWord(!0)&&t),t},null,null)),(n()(),t["\u0275eld"](1,0,null,null,0,"span",[["class","fa fa-step-forward"]],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,[" "," "]))],null,function(n,l){n(l,2,0,l.component.text.GiveAnswer)})}function ft(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","actions"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,pt)),t["\u0275did"](2,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){n(l,2,0,!l.component.isExercisesDone)},null)}function ht(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,8,"div",[["class","col-xs-4"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,st)),t["\u0275did"](2,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,at)),t["\u0275did"](4,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,dt)),t["\u0275did"](6,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,ft)),t["\u0275did"](8,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,2,0,!e.noMoreExercises),n(l,4,0,!e.noMoreExercises),n(l,6,0,!e.isExercisesDone),n(l,8,0,!e.noMoreExercises&&!e.isAnswered)},null)}function gt(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,17,"section",[["class","main-card"],["kmPressed",""]],null,[[null,"hasKeyPressed"],["document","keydown"]],function(n,l,e){var u=!0,i=n.component;return"document:keydown"===l&&(u=!1!==t["\u0275nov"](n,1).keypress(e)&&u),"hasKeyPressed"===l&&(u=!1!==i.onKeyPressed(e)&&u),u},null,null)),t["\u0275did"](1,16384,null,0,jn.a,[],null,{hasKeyPressed:"hasKeyPressed"}),(n()(),t["\u0275eld"](2,0,null,null,12,"div",[],null,null,null,null,null)),t["\u0275did"](3,278528,null,0,m.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{ngClass:[0,"ngClass"]},null),(n()(),t["\u0275eld"](4,0,null,null,10,"div",[["class","panel centerpanel"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Ue)),t["\u0275did"](6,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,ze)),t["\u0275did"](8,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,tt)),t["\u0275did"](10,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,ut)),t["\u0275did"](12,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,ot)),t["\u0275did"](14,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,ht)),t["\u0275did"](16,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](17,0,null,null,0,"div",[["class","clearfix"]],null,null,null,null,null))],function(n,l){var e=l.component;n(l,3,0,e.isExercisesDone||e.noMoreExercises&&(null==e.exerciseData||!e.exerciseData.length)?"col-xs-12":"col-xs-8"),n(l,6,0,!e.isExercisesDone),n(l,8,0,!e.isExercisesDone&&e.isQuestionReady),n(l,10,0,!e.isExercisesDone&&e.isQuestionReady),n(l,12,0,e.noMoreExercises&&!(null!=e.exerciseData&&e.exerciseData.length)),n(l,14,0,e.isExercisesDone&&(null==e.exerciseData?null:e.exerciseData.length)),n(l,16,0,!e.isExercisesDone)},null)}function mt(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-loader",[],null,null,null,C.b,C.a)),t["\u0275did"](1,114688,null,0,w.a,[],{msg:[0,"msg"],showBackground:[1,"showBackground"]},null)],function(n,l){n(l,1,0,l.component.text.LoadingExercises,!1)},null)}function vt(n){return t["\u0275vid"](0,[(n()(),t["\u0275and"](16777216,null,null,1,null,gt)),t["\u0275did"](1,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,mt)),t["\u0275did"](3,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](0,null,null,0))],function(n,l){var e=l.component;n(l,1,0,e.isReady),n(l,3,0,e.isLoading&&!e.isError)},null)}function xt(n){return t["\u0275vid"](0,[t["\u0275qud"](671088640,1,{answerComponent:0}),t["\u0275qud"](671088640,2,{comparisonComponent:0}),t["\u0275qud"](671088640,3,{conjugationsComponent:0}),t["\u0275qud"](671088640,4,{selectComponent:0}),t["\u0275qud"](671088640,5,{qaComponent:0}),t["\u0275qud"](671088640,6,{timerComponent:0}),(n()(),t["\u0275and"](16777216,null,null,1,null,Be)),t["\u0275did"](7,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(n()(),t["\u0275and"](0,[["exercise",2]],null,0,null,vt))],function(n,l){n(l,7,0,l.component.isCountDown,t["\u0275nov"](l,8))},null)}var Ct=function(n){function l(l,e,t,u){var i=n.call(this,l,e,u,t)||this;return i.isLoading=!1,i}return Object(le.__extends)(l,n),l.prototype.ngOnInit=function(){this.currentStep="difficult",this.getDifficult(),this.checkToContinue()},l.prototype.onContinueDifficult=function(){this.continueDifficult()},l.prototype.continueDifficult=function(){this.clearToContinue(),this.getDifficult()},l.prototype.getDifficult=function(){var n=this;this.isLoading=!0,this.learnService.fetchDifficult(this.course._id,this.settings.nrOfWordsReview).pipe(Object(P.a)(function(){return n.componentActive})).subscribe(function(l){return n.setExercises(l.difficult,l.results)},function(l){return n.errorService.handleError(l)})},l.prototype.setExercises=function(l,e){var t,u=l.map(function(n){return(t=n.exercise).lessonId=n.lessonId,t}),i=l.map(function(n){return n.options});this.isLoading=!1,u.length>0?(this.buildExerciseData(u,e,i[0]),this.noMoreExercises=!1,this.isReady=!0,n.prototype.init.call(this)):(this.exerciseData=[],this.noMoreExercises=!0,this.isExercisesDone=!0,this.isCountDown=!1,this.isReady=!0)},l.prototype.checkToContinue=function(){var n=this;this.continueCourseLevel.pipe(Object(P.a)(function(){return n.componentActive})).subscribe(function(l){n.continueDifficult()})},l.prototype.ngOnDestroy=function(){this.componentActive=!1},l}(ee),wt=t["\u0275crt"]({encapsulation:0,styles:[K],data:{}});function yt(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-countdown",[],null,[[null,"countedDown"]],function(n,l,e){var t=!0;return"countedDown"===l&&(t=!1!==n.component.onCountDownFinished()&&t),t},on.b,on.a)),t["\u0275did"](1,245760,null,0,sn.a,[],{counter:[0,"counter"],mute:[1,"mute"]},{countedDown:"countedDown"})],function(n,l){var e=l.component;n(l,1,0,e.settings.delay,e.isMute)},null)}function bt(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-bullets",[],null,null,null,pn,an)),t["\u0275did"](1,245760,null,0,rn,[],{onNextExercise:[0,"onNextExercise"],exercises:[1,"exercises"],current:[2,"current"],text:[3,"text"]},null)],function(n,l){var e=l.component;n(l,1,0,e.nextExercise,e.exerciseData,e.current,e.text)},null)}function St(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-timer",[],null,null,null,Cl,xl)),t["\u0275did"](1,704512,[[6,4]],0,vl,[],{data:[0,"data"]},null)],function(n,l){n(l,1,0,l.component.currentData)},null)}function It(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"span",[["class","new"]],null,null,null,null,null)),(n()(),t["\u0275ted"](1,null,["","!"]))],null,function(n,l){n(l,1,0,l.component.text.NewWord)})}function Dt(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"span",[["class","case"]],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Aa"]))],null,null)}function Rt(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","clearfix"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"km-question",[],null,null,null,fn.b,fn.a)),t["\u0275did"](2,245760,null,0,hn.a,[],{lanPair:[0,"lanPair"],text:[1,"text"],currentData:[2,"currentData"],dir:[3,"dir"],showAlt:[4,"showAlt"],settings:[5,"settings"],onHasAnswered:[6,"onHasAnswered"],onGotoNextWord:[7,"onGotoNextWord"]},null)],function(n,l){var e=l.component;n(l,2,0,e.lanPair,e.text,e.currentData,e.getQuestionDir(),!0,e.settings,e.hasAnswered,e.gotoNextWord)},null)}function kt(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-word-choices",[],null,[[null,"selected"]],function(n,l,e){var t=!0;return"selected"===l&&(t=!1!==n.component.onSelected(e)&&t),t},Dl,Sl)),t["\u0275did"](1,573440,null,0,bl,[k],{lanPair:[0,"lanPair"],choices:[1,"choices"],data:[2,"data"],instruction:[3,"instruction"],answer:[4,"answer"],answered:[5,"answered"],isSelected:[6,"isSelected"]},{selected:"selected"})],function(n,l){var e=l.component;n(l,1,0,e.lanPair,e.currentChoices,e.currentData,e.text.instructionChoices,e.answer,e.answered,e.isAnswered)},null)}function Tt(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,3,"km-word-field",[],null,null,null,Ml,Nl)),t["\u0275did"](1,8962048,[[1,4]],0,Pl,[p.a],{lan:[0,"lan"],prefix:[1,"prefix"],disabled:[2,"disabled"],data:[3,"data"],keyboard:[4,"keyboard"],solution:[5,"solution"],instruction:[6,"instruction"]},null),t["\u0275pod"](2,{showKeyboard:0,keys:1}),t["\u0275pod"](3,{solution:0,msg:1})],function(n,l){var e=l.component;n(l,1,0,e.lanPair.to,e.prefix,e.isAnswered,e.currentData,n(l,2,0,e.settings.keyboard,e.keys),n(l,3,0,e.solution,e.text.Expectedanswer),e.text.instructionWordfield)},null)}function Pt(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-select",[],null,[[null,"answered"]],function(n,l,e){var t=!0;return"answered"===l&&(t=!1!==n.component.onAnsweredSelect(e)&&t),t},Al.b,Al.a)),t["\u0275did"](1,573440,[[4,4]],0,_l.a,[I.a],{lanPair:[0,"lanPair"],text:[1,"text"],data:[2,"data"]},{answered:"answered"})],function(n,l){var e=l.component;n(l,1,0,e.lanPair,e.text,e.currentData)},null)}function Nt(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"km-qa",[],null,null,null,Vl.b,Vl.a)),t["\u0275did"](1,8962048,[[5,4]],0,ql.a,[p.a],{lanPair:[0,"lanPair"],text:[1,"text"],data:[2,"data"],keyboard:[3,"keyboard"]},null),t["\u0275pod"](2,{showKeyboard:0,keys:1})],function(n,l){var e=l.component;n(l,1,0,e.lanPair,e.text,e.currentData,n(l,2,0,e.settings.keyboard,e.keys))},null)}function Ot(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"km-comparison",[],null,null,null,Wl.b,Wl.a)),t["\u0275did"](1,4833280,[[2,4]],0,jl.a,[p.a,t.Renderer],{lanPair:[0,"lanPair"],text:[1,"text"],data:[2,"data"],keyboard:[3,"keyboard"]},null),t["\u0275pod"](2,{showKeyboard:0,keys:1})],function(n,l){var e=l.component;n(l,1,0,e.lanPair,e.text,e.currentData,n(l,2,0,e.settings.keyboard,e.keys))},null)}function Lt(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"km-conjugations",[],null,null,null,Xl,Kl)),t["\u0275did"](1,4767744,[[3,4]],0,$l,[p.a,t.Renderer],{lanPair:[0,"lanPair"],text:[1,"text"],data:[2,"data"],pronouns:[3,"pronouns"],keyboard:[4,"keyboard"]},null),t["\u0275pod"](2,{showKeyboard:0,keys:1})],function(n,l){var e=l.component;n(l,1,0,e.lanPair,e.text,e.currentData,e.pronouns,n(l,2,0,e.settings.keyboard,e.keys))},null)}function Et(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,7,"div",[["class","answer"]],[[2,"imagepadding",null]],null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,6,"h1",[["class","word"]],null,null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),t["\u0275eld"](3,0,null,null,0,"img",[["class","flag"]],[[8,"src",4]],null,null,null,null)),(n()(),t["\u0275eld"](4,0,null,null,3,"span",[],null,null,null,null,null)),(n()(),t["\u0275ted"](5,null,[" "," "])),(n()(),t["\u0275eld"](6,0,null,null,1,"div",[["class","alts"]],null,null,null,null,null)),(n()(),t["\u0275ted"](7,null,["",""]))],null,function(n,l){var e=l.component;n(l,0,0,!(null==e.currentData.exercise||!e.currentData.exercise.image)),n(l,3,0,t["\u0275inlineInterpolate"](1,"/assets/img/flags/",e.lanPair.from,".png")),n(l,5,0,null==e.currentData.exercise?null:null==e.currentData.exercise.local?null:e.currentData.exercise.local.word),n(l,7,0,e.getAlts("local",e.currentData.exercise))})}function Mt(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,23,"div",[["class","card"]],[[2,"preview",null]],null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,4,"div",[["class","pull-right"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,It)),t["\u0275did"](3,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Dt)),t["\u0275did"](5,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Rt)),t["\u0275did"](7,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](8,0,null,null,15,"div",[],null,null,null,null,null)),t["\u0275did"](9,16384,null,0,m.NgSwitch,[],{ngSwitch:[0,"ngSwitch"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,kt)),t["\u0275did"](11,278528,null,0,m.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,m.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Tt)),t["\u0275did"](13,278528,null,0,m.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,m.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Pt)),t["\u0275did"](15,278528,null,0,m.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,m.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Nt)),t["\u0275did"](17,278528,null,0,m.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,m.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Ot)),t["\u0275did"](19,278528,null,0,m.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,m.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Lt)),t["\u0275did"](21,278528,null,0,m.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,m.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Et)),t["\u0275did"](23,278528,null,0,m.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,m.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null)],function(n,l){var e=l.component;n(l,3,0,(null==e.currentData?null:null==e.currentData.data?null:e.currentData.data.questionType)===e.qType.Preview),n(l,5,0,null==e.currentData?null:null==e.currentData.data?null:e.currentData.data.isCaseSensitive),n(l,7,0,e.showDefaultQuestion()),n(l,9,0,null==e.currentData?null:null==e.currentData.data?null:e.currentData.data.questionType),n(l,11,0,e.qType.Choices),n(l,13,0,e.qType.Word),n(l,15,0,e.qType.Select),n(l,17,0,e.qType.FillIn),n(l,19,0,e.qType.Comparison),n(l,21,0,e.qType.Conjugations),n(l,23,0,e.qType.Preview)},function(n,l){var e=l.component;n(l,0,0,(null==e.currentData?null:null==e.currentData.data?null:e.currentData.data.questionType)===e.qType.Preview)})}function At(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,3,"div",[],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,2,"div",[["class","msg-info"]],null,null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,0,"span",[["class","fa fa-info-circle"]],null,null,null,null,null)),(n()(),t["\u0275ted"](3,null,[""," "]))],null,function(n,l){n(l,3,0,l.component.text.NoMoreDifficultExercises)})}function _t(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"button",[["class","btn btn-success"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onContinueDifficult()&&t),t},null,null)),(n()(),t["\u0275eld"](1,0,null,null,0,"span",[["class","fa fa-arrow-right fa-spacing"]],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,[" "," "]))],null,function(n,l){n(l,2,0,l.component.text.ContinueDifficult)})}function Vt(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,6,"div",[],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"km-completed-list",[],null,null,null,On,Sn)),t["\u0275did"](2,114688,null,0,bn,[k],{data:[0,"data"],text:[1,"text"],step:[2,"step"],title:[3,"title"]},null),(n()(),t["\u0275eld"](3,0,null,null,1,"km-points-completed",[],null,null,null,vn,mn)),t["\u0275did"](4,114688,null,0,gn,[],{data:[0,"data"],text:[1,"text"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,_t)),t["\u0275did"](6,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,2,0,e.exerciseData,e.text,"Difficult",e.text.Results),n(l,4,0,e.exerciseData,e.text),n(l,6,0,(null==e.countPerStep.difficult?null:e.countPerStep.difficult.nrRemaining)>0)},null)}function qt(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-learn-settings",[],null,[[null,"updatedSettings"]],function(n,l,e){var t=!0;return"updatedSettings"===l&&(t=!1!==n.component.onSettingsUpdated(e)&&t),t},Wn,_n)),t["\u0275did"](1,49152,null,0,An,[],{step:[0,"step"],text:[1,"text"],hasGenus:[2,"hasGenus"],isInput:[3,"isInput"],settings:[4,"settings"],isActive:[5,"isActive"]},{updatedSettings:"updatedSettings"})],function(n,l){var e=l.component;n(l,1,0,"difficult",e.text,!(null==e.currentData||!e.currentData.exercise.genus),e.isInput(),e.settings,!e.isExercisesDone)},null)}function Wt(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"button",[["class","btn btn-lg btn-success next"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onNextWord()&&t),t},null,null)),(n()(),t["\u0275eld"](1,0,null,null,0,"span",[["class","fa fa-step-forward"]],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,[" "," "]))],null,function(n,l){var e=l.component;n(l,0,0,!e.isAnswered&&e.isSelectionExercise()),n(l,2,0,!e.isAnswered&&e.isInput()?e.text.Check:e.text.Next)})}function jt(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","actions"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Wt)),t["\u0275did"](2,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){n(l,2,0,!l.component.isExercisesDone)},null)}function Ft(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-learnlevel-bar",[],null,null,null,ne,Yl)),t["\u0275did"](1,245760,null,0,Zl,[],{levelUpdated:[0,"levelUpdated"]},null)],function(n,l){n(l,1,0,l.component.levelUpdated)},null)}function $t(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,5,"div",[["class","score"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Ft)),t["\u0275did"](2,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](3,0,null,null,1,"km-points-earned",[],null,null,null,Mn,En)),t["\u0275did"](4,245760,null,0,Ln,[],{pointsEarned:[0,"pointsEarned"]},null),(n()(),t["\u0275eld"](5,0,null,null,0,"div",[["class","clearfix"]],null,null,null,null,null))],function(n,l){var e=l.component;n(l,2,0,(null==e.currentData?null:null==e.currentData.exercise?null:e.currentData.exercise.tpe)===e.exType.Word&&(null==e.currentData?null:null==e.currentData.data?null:e.currentData.data.questionType)!==e.qType.Preview),n(l,4,0,e.pointsEarned)},null)}function Kt(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"button",[["class","btn btn-lg btn-warning next"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onNextWord(!0)&&t),t},null,null)),(n()(),t["\u0275eld"](1,0,null,null,0,"span",[["class","fa fa-step-forward"]],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,[" "," "]))],null,function(n,l){n(l,2,0,l.component.text.GiveAnswer)})}function Bt(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","actions"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Kt)),t["\u0275did"](2,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){n(l,2,0,!l.component.isExercisesDone)},null)}function Ut(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,8,"div",[["class","col-xs-4"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,qt)),t["\u0275did"](2,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,jt)),t["\u0275did"](4,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,$t)),t["\u0275did"](6,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Bt)),t["\u0275did"](8,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,2,0,!e.noMoreExercises),n(l,4,0,!e.noMoreExercises),n(l,6,0,!e.isExercisesDone),n(l,8,0,!e.noMoreExercises&&!e.isAnswered)},null)}function zt(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,17,"section",[["class","main-card"],["kmPressed",""]],null,[[null,"hasKeyPressed"],["document","keydown"]],function(n,l,e){var u=!0,i=n.component;return"document:keydown"===l&&(u=!1!==t["\u0275nov"](n,1).keypress(e)&&u),"hasKeyPressed"===l&&(u=!1!==i.onKeyPressed(e)&&u),u},null,null)),t["\u0275did"](1,16384,null,0,jn.a,[],null,{hasKeyPressed:"hasKeyPressed"}),(n()(),t["\u0275eld"](2,0,null,null,12,"div",[],null,null,null,null,null)),t["\u0275did"](3,278528,null,0,m.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{ngClass:[0,"ngClass"]},null),(n()(),t["\u0275eld"](4,0,null,null,10,"div",[["class","panel centerpanel"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,bt)),t["\u0275did"](6,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,St)),t["\u0275did"](8,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Mt)),t["\u0275did"](10,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,At)),t["\u0275did"](12,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Vt)),t["\u0275did"](14,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Ut)),t["\u0275did"](16,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](17,0,null,null,0,"div",[["class","clearfix"]],null,null,null,null,null))],function(n,l){var e=l.component;n(l,3,0,e.isExercisesDone||e.noMoreExercises&&(null==e.exerciseData||!e.exerciseData.length)?"col-xs-12":"col-xs-8"),n(l,6,0,!e.isExercisesDone),n(l,8,0,!e.isExercisesDone&&e.isQuestionReady),n(l,10,0,!e.isExercisesDone&&e.isQuestionReady),n(l,12,0,e.noMoreExercises&&!(null!=e.exerciseData&&e.exerciseData.length)),n(l,14,0,e.isExercisesDone&&(null==e.exerciseData?null:e.exerciseData.length)),n(l,16,0,!e.isExercisesDone)},null)}function Gt(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-loader",[],null,null,null,C.b,C.a)),t["\u0275did"](1,114688,null,0,w.a,[],{msg:[0,"msg"],showBackground:[1,"showBackground"]},null)],function(n,l){n(l,1,0,l.component.text.LoadingExercises,!1)},null)}function Qt(n){return t["\u0275vid"](0,[(n()(),t["\u0275and"](16777216,null,null,1,null,zt)),t["\u0275did"](1,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Gt)),t["\u0275did"](3,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](0,null,null,0))],function(n,l){var e=l.component;n(l,1,0,e.isReady),n(l,3,0,e.isLoading&&!e.isError)},null)}function Ht(n){return t["\u0275vid"](0,[t["\u0275qud"](671088640,1,{answerComponent:0}),t["\u0275qud"](671088640,2,{comparisonComponent:0}),t["\u0275qud"](671088640,3,{conjugationsComponent:0}),t["\u0275qud"](671088640,4,{selectComponent:0}),t["\u0275qud"](671088640,5,{qaComponent:0}),t["\u0275qud"](671088640,6,{timerComponent:0}),(n()(),t["\u0275and"](16777216,null,null,1,null,yt)),t["\u0275did"](7,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(n()(),t["\u0275and"](0,[["exercise",2]],null,0,null,Qt))],function(n,l){n(l,7,0,l.component.isCountDown,t["\u0275nov"](l,8))},null)}var Jt=function(n){function l(l,e,t,u){var i=n.call(this,l,e,u,t)||this;return i.isLoading=!1,i}return Object(le.__extends)(l,n),l.prototype.ngOnInit=function(){this.currentStep="exam",this.isCountDown=!1,this.noMoreExercises=!0,this.isExercisesDone=!0,this.isReady=!0},l.prototype.onContinueExam=function(){},l.prototype.ngOnDestroy=function(){this.componentActive=!1},l}(ee),Xt=t["\u0275crt"]({encapsulation:0,styles:[K],data:{}});function Zt(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-countdown",[],null,[[null,"countedDown"]],function(n,l,e){var t=!0;return"countedDown"===l&&(t=!1!==n.component.onCountDownFinished()&&t),t},on.b,on.a)),t["\u0275did"](1,245760,null,0,sn.a,[],{counter:[0,"counter"],mute:[1,"mute"]},{countedDown:"countedDown"})],function(n,l){var e=l.component;n(l,1,0,e.settings.delay,e.isMute)},null)}function Yt(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-bullets",[],null,null,null,pn,an)),t["\u0275did"](1,245760,null,0,rn,[],{onNextExercise:[0,"onNextExercise"],exercises:[1,"exercises"],current:[2,"current"],text:[3,"text"]},null)],function(n,l){var e=l.component;n(l,1,0,e.nextExercise,e.exerciseData,e.current,e.text)},null)}function nu(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-timer",[],null,null,null,Cl,xl)),t["\u0275did"](1,704512,[[6,4]],0,vl,[],{data:[0,"data"]},null)],function(n,l){n(l,1,0,l.component.currentData)},null)}function lu(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"span",[["class","new"]],null,null,null,null,null)),(n()(),t["\u0275ted"](1,null,["","!"]))],null,function(n,l){n(l,1,0,l.component.text.NewWord)})}function eu(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"span",[["class","case"]],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Aa"]))],null,null)}function tu(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"div",[["class","image"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,function(n,l){n(l,1,0,t["\u0275inlineInterpolate"](1,"",l.component.currentData.exercise.image,""))})}function uu(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,4,"div",[["class","clearfix"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,tu)),t["\u0275did"](2,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](3,0,null,null,1,"km-question",[],null,null,null,fn.b,fn.a)),t["\u0275did"](4,245760,null,0,hn.a,[],{lanPair:[0,"lanPair"],text:[1,"text"],currentData:[2,"currentData"],dir:[3,"dir"],showAlt:[4,"showAlt"],settings:[5,"settings"]},null)],function(n,l){var e=l.component;n(l,2,0,e.currentData.exercise.image),n(l,4,0,e.lanPair,e.text,e.currentData,e.getQuestionDir(),!0,e.settings)},null)}function iu(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-word-choices",[],null,[[null,"selected"]],function(n,l,e){var t=!0;return"selected"===l&&(t=!1!==n.component.onSelected(e)&&t),t},Dl,Sl)),t["\u0275did"](1,573440,null,0,bl,[k],{lanPair:[0,"lanPair"],choices:[1,"choices"],data:[2,"data"],instruction:[3,"instruction"],answer:[4,"answer"],answered:[5,"answered"],isSelected:[6,"isSelected"]},{selected:"selected"})],function(n,l){var e=l.component;n(l,1,0,e.lanPair,e.currentChoices,e.currentData,e.text.instructionChoices,e.answer,e.answered,e.isAnswered)},null)}function ou(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,3,"km-word-field",[],null,null,null,Ml,Nl)),t["\u0275did"](1,8962048,[[1,4]],0,Pl,[p.a],{lan:[0,"lan"],prefix:[1,"prefix"],disabled:[2,"disabled"],data:[3,"data"],keyboard:[4,"keyboard"],solution:[5,"solution"],instruction:[6,"instruction"]},null),t["\u0275pod"](2,{showKeyboard:0,keys:1}),t["\u0275pod"](3,{solution:0,msg:1})],function(n,l){var e=l.component;n(l,1,0,e.lanPair.to,e.prefix,e.isAnswered,e.currentData,n(l,2,0,e.settings.keyboard,e.keys),n(l,3,0,e.solution,e.text.Expectedanswer),e.text.instructionWordfield)},null)}function su(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-select",[],null,[[null,"answered"]],function(n,l,e){var t=!0;return"answered"===l&&(t=!1!==n.component.onAnsweredSelect(e)&&t),t},Al.b,Al.a)),t["\u0275did"](1,573440,[[4,4]],0,_l.a,[I.a],{lanPair:[0,"lanPair"],text:[1,"text"],data:[2,"data"]},{answered:"answered"})],function(n,l){var e=l.component;n(l,1,0,e.lanPair,e.text,e.currentData)},null)}function ru(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"km-qa",[],null,null,null,Vl.b,Vl.a)),t["\u0275did"](1,8962048,[[5,4]],0,ql.a,[p.a],{lanPair:[0,"lanPair"],text:[1,"text"],data:[2,"data"],keyboard:[3,"keyboard"]},null),t["\u0275pod"](2,{showKeyboard:0,keys:1})],function(n,l){var e=l.component;n(l,1,0,e.lanPair,e.text,e.currentData,n(l,2,0,e.settings.keyboard,e.keys))},null)}function au(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"km-comparison",[],null,null,null,Wl.b,Wl.a)),t["\u0275did"](1,4833280,[[2,4]],0,jl.a,[p.a,t.Renderer],{lanPair:[0,"lanPair"],text:[1,"text"],data:[2,"data"],keyboard:[3,"keyboard"]},null),t["\u0275pod"](2,{showKeyboard:0,keys:1})],function(n,l){var e=l.component;n(l,1,0,e.lanPair,e.text,e.currentData,n(l,2,0,e.settings.keyboard,e.keys))},null)}function cu(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"km-conjugations",[],null,null,null,Xl,Kl)),t["\u0275did"](1,4767744,[[3,4]],0,$l,[p.a,t.Renderer],{lanPair:[0,"lanPair"],text:[1,"text"],data:[2,"data"],pronouns:[3,"pronouns"],keyboard:[4,"keyboard"]},null),t["\u0275pod"](2,{showKeyboard:0,keys:1})],function(n,l){var e=l.component;n(l,1,0,e.lanPair,e.text,e.currentData,e.pronouns,n(l,2,0,e.settings.keyboard,e.keys))},null)}function du(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,7,"div",[["class","answer"]],[[2,"imagepadding",null]],null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,6,"h1",[["class","word"]],null,null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),t["\u0275eld"](3,0,null,null,0,"img",[["class","flag"]],[[8,"src",4]],null,null,null,null)),(n()(),t["\u0275eld"](4,0,null,null,3,"span",[],null,null,null,null,null)),(n()(),t["\u0275ted"](5,null,[" "," "])),(n()(),t["\u0275eld"](6,0,null,null,1,"div",[["class","alts"]],null,null,null,null,null)),(n()(),t["\u0275ted"](7,null,["",""]))],null,function(n,l){var e=l.component;n(l,0,0,!(null==e.currentData.exercise||!e.currentData.exercise.image)),n(l,3,0,t["\u0275inlineInterpolate"](1,"/assets/img/flags/",e.lanPair.from,".png")),n(l,5,0,null==e.currentData.exercise?null:null==e.currentData.exercise.local?null:e.currentData.exercise.local.word),n(l,7,0,e.getAlts("local",e.currentData.exercise))})}function pu(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,23,"div",[["class","card"]],[[2,"preview",null]],null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,4,"div",[["class","pull-right"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,lu)),t["\u0275did"](3,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,eu)),t["\u0275did"](5,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,uu)),t["\u0275did"](7,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](8,0,null,null,15,"div",[],null,null,null,null,null)),t["\u0275did"](9,16384,null,0,m.NgSwitch,[],{ngSwitch:[0,"ngSwitch"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,iu)),t["\u0275did"](11,278528,null,0,m.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,m.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,ou)),t["\u0275did"](13,278528,null,0,m.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,m.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,su)),t["\u0275did"](15,278528,null,0,m.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,m.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,ru)),t["\u0275did"](17,278528,null,0,m.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,m.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,au)),t["\u0275did"](19,278528,null,0,m.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,m.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,cu)),t["\u0275did"](21,278528,null,0,m.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,m.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,du)),t["\u0275did"](23,278528,null,0,m.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,m.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null)],function(n,l){var e=l.component;n(l,3,0,(null==e.currentData?null:null==e.currentData.data?null:e.currentData.data.questionType)===e.qType.Preview),n(l,5,0,null==e.currentData?null:null==e.currentData.data?null:e.currentData.data.isCaseSensitive),n(l,7,0,e.showDefaultQuestion()),n(l,9,0,null==e.currentData?null:null==e.currentData.data?null:e.currentData.data.questionType),n(l,11,0,e.qType.Choices),n(l,13,0,e.qType.Word),n(l,15,0,e.qType.Select),n(l,17,0,e.qType.FillIn),n(l,19,0,e.qType.Comparison),n(l,21,0,e.qType.Conjugations),n(l,23,0,e.qType.Preview)},function(n,l){var e=l.component;n(l,0,0,(null==e.currentData?null:null==e.currentData.data?null:e.currentData.data.questionType)===e.qType.Preview)})}function fu(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,3,"div",[],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,2,"div",[["class","msg-info"]],null,null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,0,"span",[["class","fa fa-info-circle"]],null,null,null,null,null)),(n()(),t["\u0275ted"](3,null,[""," "]))],null,function(n,l){n(l,3,0,l.component.text.NoExam)})}function hu(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-learn-settings",[],null,[[null,"updatedSettings"]],function(n,l,e){var t=!0;return"updatedSettings"===l&&(t=!1!==n.component.onSettingsUpdated(e)&&t),t},Wn,_n)),t["\u0275did"](1,49152,null,0,An,[],{step:[0,"step"],text:[1,"text"],hasGenus:[2,"hasGenus"],isInput:[3,"isInput"],settings:[4,"settings"],isActive:[5,"isActive"]},{updatedSettings:"updatedSettings"})],function(n,l){var e=l.component;n(l,1,0,"difficult",e.text,!(null==e.currentData||!e.currentData.exercise.genus),e.isInput(),e.settings,!e.isExercisesDone)},null)}function gu(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"button",[["class","btn btn-lg btn-success next"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onNextWord()&&t),t},null,null)),(n()(),t["\u0275eld"](1,0,null,null,0,"span",[["class","fa fa-step-forward"]],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,[" "," "]))],null,function(n,l){var e=l.component;n(l,0,0,!e.isAnswered&&e.isSelectionExercise()),n(l,2,0,!e.isAnswered&&e.isInput()?e.text.Check:e.text.Next)})}function mu(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","actions"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,gu)),t["\u0275did"](2,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){n(l,2,0,!l.component.isExercisesDone)},null)}function vu(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-learnlevel-bar",[],null,null,null,ne,Yl)),t["\u0275did"](1,245760,null,0,Zl,[],{levelUpdated:[0,"levelUpdated"]},null)],function(n,l){n(l,1,0,l.component.levelUpdated)},null)}function xu(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,5,"div",[["class","score"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,vu)),t["\u0275did"](2,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](3,0,null,null,1,"km-points-earned",[],null,null,null,Mn,En)),t["\u0275did"](4,245760,null,0,Ln,[],{pointsEarned:[0,"pointsEarned"]},null),(n()(),t["\u0275eld"](5,0,null,null,0,"div",[["class","clearfix"]],null,null,null,null,null))],function(n,l){var e=l.component;n(l,2,0,(null==e.currentData?null:null==e.currentData.exercise?null:e.currentData.exercise.tpe)===e.exType.Word&&(null==e.currentData?null:null==e.currentData.data?null:e.currentData.data.questionType)!==e.qType.Preview),n(l,4,0,e.pointsEarned)},null)}function Cu(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"button",[["class","btn btn-lg btn-warning next"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onNextWord(!0)&&t),t},null,null)),(n()(),t["\u0275eld"](1,0,null,null,0,"span",[["class","fa fa-step-forward"]],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,[" "," "]))],null,function(n,l){n(l,2,0,l.component.text.GiveAnswer)})}function wu(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","actions"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Cu)),t["\u0275did"](2,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){n(l,2,0,!l.component.isExercisesDone)},null)}function yu(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,8,"div",[["class","col-xs-4"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,hu)),t["\u0275did"](2,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,mu)),t["\u0275did"](4,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,xu)),t["\u0275did"](6,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,wu)),t["\u0275did"](8,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,2,0,!e.noMoreExercises),n(l,4,0,!e.noMoreExercises),n(l,6,0,!e.isExercisesDone),n(l,8,0,!e.noMoreExercises&&!e.isAnswered)},null)}function bu(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,15,"section",[["class","main-card"],["kmPressed",""]],null,[[null,"hasKeyPressed"],["document","keydown"]],function(n,l,e){var u=!0,i=n.component;return"document:keydown"===l&&(u=!1!==t["\u0275nov"](n,1).keypress(e)&&u),"hasKeyPressed"===l&&(u=!1!==i.onKeyPressed(e)&&u),u},null,null)),t["\u0275did"](1,16384,null,0,jn.a,[],null,{hasKeyPressed:"hasKeyPressed"}),(n()(),t["\u0275eld"](2,0,null,null,10,"div",[],null,null,null,null,null)),t["\u0275did"](3,278528,null,0,m.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{ngClass:[0,"ngClass"]},null),(n()(),t["\u0275eld"](4,0,null,null,8,"div",[["class","panel centerpanel"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Yt)),t["\u0275did"](6,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,nu)),t["\u0275did"](8,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,pu)),t["\u0275did"](10,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,fu)),t["\u0275did"](12,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,yu)),t["\u0275did"](14,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](15,0,null,null,0,"div",[["class","clearfix"]],null,null,null,null,null))],function(n,l){var e=l.component;n(l,3,0,e.isExercisesDone||e.noMoreExercises&&(null==e.exerciseData||!e.exerciseData.length)?"col-xs-12":"col-xs-8"),n(l,6,0,!e.isExercisesDone),n(l,8,0,!e.isExercisesDone&&e.isQuestionReady),n(l,10,0,!e.isExercisesDone&&e.isQuestionReady),n(l,12,0,e.noMoreExercises&&!(null!=e.exerciseData&&e.exerciseData.length)),n(l,14,0,!e.isExercisesDone)},null)}function Su(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-loader",[],null,null,null,C.b,C.a)),t["\u0275did"](1,114688,null,0,w.a,[],{msg:[0,"msg"],showBackground:[1,"showBackground"]},null)],function(n,l){n(l,1,0,l.component.text.LoadingExercises,!1)},null)}function Iu(n){return t["\u0275vid"](0,[(n()(),t["\u0275and"](16777216,null,null,1,null,bu)),t["\u0275did"](1,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Su)),t["\u0275did"](3,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](0,null,null,0))],function(n,l){var e=l.component;n(l,1,0,e.isReady),n(l,3,0,e.isLoading&&!e.isError)},null)}function Du(n){return t["\u0275vid"](0,[t["\u0275qud"](671088640,1,{answerComponent:0}),t["\u0275qud"](671088640,2,{comparisonComponent:0}),t["\u0275qud"](671088640,3,{conjugationsComponent:0}),t["\u0275qud"](671088640,4,{selectComponent:0}),t["\u0275qud"](671088640,5,{qaComponent:0}),t["\u0275qud"](671088640,6,{timerComponent:0}),(n()(),t["\u0275and"](16777216,null,null,1,null,Zt)),t["\u0275did"](7,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(n()(),t["\u0275and"](0,[["exam",2]],null,0,null,Iu))],function(n,l){n(l,7,0,l.component.isCountDown,t["\u0275nov"](l,8))},null)}var Ru=function(){function n(n,l){this.learnService=n,this.errorService=l,this.isDemo=!1,this.currentLesson=new t.EventEmitter,this.componentActive=!0,this.exerciseData=[],this.exType=S.c,this.isLoading=!1,this.isError=!1}return n.prototype.ngOnInit=function(){this.isLearnedLevel=h.d,this.fetchLesson()},n.prototype.showWord=function(n,l){return this.learnService.showFilteredWord(n,l)},n.prototype.isToReview=function(n){var l=!1;return n&&n.dtToReview&&new Date(n.dtToReview)<new Date&&(l=!0),l},n.prototype.getLessonResults=function(){this.isDemo?this.buildExerciseData(null):this.fetchLessonResults()},n.prototype.fetchLessonResults=function(){var n=this;this.learnService.fetchLessonStepResults(this.lessonId,"overview").pipe(Object(P.a)(function(){return n.componentActive})).subscribe(function(l){return n.combineResults(l)},function(l){return n.errorService.handleError(l)})},n.prototype.combineResults=function(n){var l,e=n.count,t=n.last;e.forEach(function(n){l=t.find(function(l){return l.exerciseId===n.exerciseId}),Object.assign(n,l)}),this.buildExerciseData(e)},n.prototype.buildExerciseData=function(n){var l,e=this;this.lesson.exercises.forEach(function(t){l=n&&n.find(function(n){return n.exerciseId===t._id}),e.exerciseData.push({exercise:t,data:{},result:l})})},n.prototype.fetchLesson=function(){var n=this;this.isLoading=!0,this.learnService.fetchLesson(this.lessonId).pipe(Object(P.a)(function(){return n.componentActive})).subscribe(function(l){n.isLoading=!1,n.lesson=l,n.currentLesson.emit(l),n.getLessonResults()},function(l){return n.errorService.handleError(l)})},n.prototype.ngOnDestroy=function(){this.componentActive=!1},n}(),ku=t["\u0275crt"]({encapsulation:0,styles:[xn],data:{}});function Tu(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,9,"div",[["class","row header item"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,0,"div",[["class","col-xs-1"]],null,null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,1,"div",[["class","col-xs-6"]],null,null,null,null,null)),(n()(),t["\u0275ted"](3,null,[" "," "])),(n()(),t["\u0275eld"](4,0,null,null,1,"div",[["class","col-xs-3"]],null,null,null,null,null)),(n()(),t["\u0275ted"](5,null,[" "," "])),(n()(),t["\u0275eld"](6,0,null,null,1,"div",[["class","col-xs-1 text-center"]],null,null,null,null,null)),(n()(),t["\u0275ted"](7,null,[" "," "])),(n()(),t["\u0275eld"](8,0,null,null,1,"div",[["class","col-xs-1 text-center"]],null,null,null,null,null)),(n()(),t["\u0275ted"](9,null,[" "," "]))],null,function(n,l){var e=l.component;n(l,3,0,e.text.Word),n(l,5,0,e.text.Last10),n(l,7,0,e.text.Correct),n(l,9,0,e.text.Progress)})}function Pu(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,16777216,null,null,1,"span",[["class","fa fa-fire fa-spacing"]],null,[[null,"focusin"],[null,"mouseenter"],[null,"focusout"],[null,"mouseleave"]],function(n,l,e){var u=!0;return"focusin"===l&&(u=!1!==t["\u0275nov"](n,1).show()&&u),"mouseenter"===l&&(u=!1!==t["\u0275nov"](n,1).show()&&u),"focusout"===l&&(u=!1!==t["\u0275nov"](n,1).hide()&&u),"mouseleave"===l&&(u=!1!==t["\u0275nov"](n,1).hide()&&u),u},null,null)),t["\u0275did"](1,16384,null,0,Cn.Tooltip,[t.ViewContainerRef,t.ComponentFactoryResolver],{content:[0,"content"]},null),(n()(),t["\u0275and"](0,null,null,0))],function(n,l){n(l,1,0,l.component.text.iIsDifficult)},null)}function Nu(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,16777216,null,null,1,"span",[["class","fa fa-repeat"]],null,[[null,"focusin"],[null,"mouseenter"],[null,"focusout"],[null,"mouseleave"]],function(n,l,e){var u=!0;return"focusin"===l&&(u=!1!==t["\u0275nov"](n,1).show()&&u),"mouseenter"===l&&(u=!1!==t["\u0275nov"](n,1).show()&&u),"focusout"===l&&(u=!1!==t["\u0275nov"](n,1).hide()&&u),"mouseleave"===l&&(u=!1!==t["\u0275nov"](n,1).hide()&&u),u},null,null)),t["\u0275did"](1,16384,null,0,Cn.Tooltip,[t.ViewContainerRef,t.ComponentFactoryResolver],{content:[0,"content"]},null),(n()(),t["\u0275and"](0,null,null,0))],function(n,l){n(l,1,0,l.component.text.iIsToReview)},null)}function Ou(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,3,"span",[],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,2,"span",[["class","fa fa-square"]],[[4,"opacity",null]],null,null,null,null)),t["\u0275did"](2,278528,null,0,m.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](3,{green:0,red:1,orange:2})],function(n,l){n(l,2,0,"fa fa-square",n(l,3,0,"1"===l.context.$implicit,"0"===l.context.$implicit,"2"===l.context.$implicit))},function(n,l){n(l,1,0,1-((null==l.parent.parent.context.$implicit.result?null:null==l.parent.parent.context.$implicit.result.streak?null:l.parent.parent.context.$implicit.result.streak.slice(-10).length)-l.context.index-1)/20)})}function Lu(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","col-xs-3"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Ou)),t["\u0275did"](2,802816,null,0,m.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,l){n(l,2,0,null==l.parent.context.$implicit.result?null:null==l.parent.context.$implicit.result.streak?null:l.parent.context.$implicit.result.streak.slice(-10).split(""))},null)}function Eu(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),t["\u0275ted"](1,null,[" "," / "," "]))],null,function(n,l){n(l,1,0,null==l.parent.parent.context.$implicit.result?null:l.parent.parent.context.$implicit.result.timesCorrect,null==l.parent.parent.context.$implicit.result?null:l.parent.parent.context.$implicit.result.timesDone)})}function Mu(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","col-xs-1 text-center"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Eu)),t["\u0275did"](2,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){n(l,2,0,null==l.parent.context.$implicit.result?null:l.parent.context.$implicit.result.timesDone)},null)}function Au(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,16777216,null,null,1,"span",[["class","fa fa-bookmark fa-spacing"]],null,[[null,"focusin"],[null,"mouseenter"],[null,"focusout"],[null,"mouseleave"]],function(n,l,e){var u=!0;return"focusin"===l&&(u=!1!==t["\u0275nov"](n,1).show()&&u),"mouseenter"===l&&(u=!1!==t["\u0275nov"](n,1).show()&&u),"focusout"===l&&(u=!1!==t["\u0275nov"](n,1).hide()&&u),"mouseleave"===l&&(u=!1!==t["\u0275nov"](n,1).hide()&&u),u},null,null)),t["\u0275did"](1,16384,null,0,Cn.Tooltip,[t.ViewContainerRef,t.ComponentFactoryResolver],{content:[0,"content"]},null),(n()(),t["\u0275and"](0,null,null,0))],function(n,l){n(l,1,0,l.component.text.iWordStudied)},null)}function _u(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,0,"span",[["class","fa fa-bookmark-o fa-spacing"]],null,null,null,null,null))],null,null)}function Vu(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,16777216,null,null,1,"span",[["class","fa fa-check"]],null,[[null,"focusin"],[null,"mouseenter"],[null,"focusout"],[null,"mouseleave"]],function(n,l,e){var u=!0;return"focusin"===l&&(u=!1!==t["\u0275nov"](n,1).show()&&u),"mouseenter"===l&&(u=!1!==t["\u0275nov"](n,1).show()&&u),"focusout"===l&&(u=!1!==t["\u0275nov"](n,1).hide()&&u),"mouseleave"===l&&(u=!1!==t["\u0275nov"](n,1).hide()&&u),u},null,null)),t["\u0275did"](1,16384,null,0,Cn.Tooltip,[t.ViewContainerRef,t.ComponentFactoryResolver],{content:[0,"content"]},null),(n()(),t["\u0275and"](0,null,null,0))],function(n,l){n(l,1,0,l.component.text.iWordLearned)},null)}function qu(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"span",[],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Vu)),t["\u0275did"](2,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){n(l,2,0,null==l.parent.parent.parent.context.$implicit.result?null:l.parent.parent.parent.context.$implicit.result.isLearned)},null)}function Wu(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"span",[["class","learn-progress"]],null,null,null,null,null)),(n()(),t["\u0275ted"](1,null,[" "," / "," "]))],null,function(n,l){n(l,1,0,l.parent.parent.parent.context.$implicit.result.learnLevel,l.component.isLearnedLevel)})}function ju(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,9,"div",[],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,4,"span",[],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Au)),t["\u0275did"](3,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,_u)),t["\u0275did"](5,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,qu)),t["\u0275did"](7,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Wu)),t["\u0275did"](9,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,3,0,l.parent.parent.context.$implicit.result&&l.parent.parent.context.$implicit.exercise.tpe===e.exType.Word),n(l,5,0,l.parent.parent.context.$implicit.exercise.tpe!==e.exType.Word),n(l,7,0,l.parent.parent.context.$implicit.result.isLearned),n(l,9,0,!l.parent.parent.context.$implicit.result.isLearned&&null!==l.parent.parent.context.$implicit.result.learnLevel)},null)}function Fu(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","col-xs-1 text-center"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,ju)),t["\u0275did"](2,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){n(l,2,0,l.parent.context.$implicit.result)},null)}function $u(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","register"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"km-signup",[],null,null,null,$,F)),t["\u0275did"](2,49152,null,0,j,[],{text:[0,"text"],courseId:[1,"courseId"]},null)],function(n,l){var e=l.component;n(l,2,0,e.text,e.courseId)},null)}function Ku(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","col-xs-6"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,$u)),t["\u0275did"](2,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){n(l,2,0,0===l.parent.context.index)},null)}function Bu(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,23,"div",[["class","row item data-row"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,9,"div",[["class","col-xs-1 icons"]],null,null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,1,"span",[["class","index"]],null,null,null,null,null)),(n()(),t["\u0275ted"](3,null,["","."])),(n()(),t["\u0275eld"](4,0,null,null,1,"km-type-icons",[],null,null,null,wn.b,wn.a)),t["\u0275did"](5,49152,null,0,yn.a,[],{tpe:[0,"tpe"],text:[1,"text"]},null),(n()(),t["\u0275eld"](6,0,null,null,4,"span",[],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Pu)),t["\u0275did"](8,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Nu)),t["\u0275did"](10,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](11,0,null,null,4,"div",[["class","col-xs-6"]],null,null,null,null,null)),(n()(),t["\u0275eld"](12,0,null,null,1,"span",[["class","word"]],null,null,null,null,null)),(n()(),t["\u0275ted"](13,null,["",""])),(n()(),t["\u0275eld"](14,0,null,null,1,"span",[["class","word local"]],null,null,null,null,null)),(n()(),t["\u0275ted"](15,null,["",""])),(n()(),t["\u0275and"](16777216,null,null,1,null,Lu)),t["\u0275did"](17,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Mu)),t["\u0275did"](19,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Fu)),t["\u0275did"](21,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Ku)),t["\u0275did"](23,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,5,0,l.context.$implicit.exercise.tpe,e.text),n(l,8,0,null==l.context.$implicit.result?null:l.context.$implicit.result.isDifficult),n(l,10,0,e.isToReview(l.context.$implicit.result)),n(l,17,0,!e.isDemo),n(l,19,0,!e.isDemo),n(l,21,0,!e.isDemo),n(l,23,0,e.isDemo)},function(n,l){var e=l.component;n(l,3,0,l.context.index+1),n(l,13,0,e.showWord(null==l.context.$implicit.exercise.foreign?null:l.context.$implicit.exercise.foreign.word,l.context.$implicit.exercise.tpe)),n(l,15,0,null==l.context.$implicit.exercise.local?null:l.context.$implicit.exercise.local.word)})}function Uu(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-loader",[],null,null,null,C.b,C.a)),t["\u0275did"](1,114688,null,0,w.a,[],{msg:[0,"msg"],showBackground:[1,"showBackground"]},null)],function(n,l){n(l,1,0,l.component.text.LoadingLesson,!1)},null)}function zu(n){return t["\u0275vid"](0,[(n()(),t["\u0275and"](16777216,null,null,1,null,Tu)),t["\u0275did"](1,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Bu)),t["\u0275did"](3,802816,null,0,m.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Uu)),t["\u0275did"](5,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,1,0,!e.isLoading),n(l,3,0,e.exerciseData),n(l,5,0,e.isLoading&&!e.isError)},null)}var Gu=function(){function n(n){this.elRef=n}return n.prototype.ngAfterViewInit=function(){this.elRef.nativeElement.scrollIntoView({behavior:"smooth"})},n}(),Qu=e("T1DM"),Hu=e("FFOo"),Ju=e("60iU"),Xu=function(){function n(n,l){this.delay=n,this.scheduler=l}return n.prototype.call=function(n,l){return l.subscribe(new Zu(n,this.delay,this.scheduler))},n}(),Zu=function(n){function l(l,e,t){var u=n.call(this,l)||this;return u.delay=e,u.scheduler=t,u.queue=[],u.active=!1,u.errored=!1,u}return le.__extends(l,n),l.dispatch=function(n){for(var l=n.source,e=l.queue,t=n.scheduler,u=n.destination;e.length>0&&e[0].time-t.now()<=0;)e.shift().notification.observe(u);if(e.length>0){var i=Math.max(0,e[0].time-t.now());this.schedule(n,i)}else this.unsubscribe(),l.active=!1},l.prototype._schedule=function(n){this.active=!0,this.add(n.schedule(l.dispatch,this.delay,{source:this,destination:this.destination,scheduler:n}))},l.prototype.scheduleNotification=function(n){if(!0!==this.errored){var l=this.scheduler,e=new Yu(l.now()+this.delay,n);this.queue.push(e),!1===this.active&&this._schedule(l)}},l.prototype._next=function(n){this.scheduleNotification(Ju.a.createNext(n))},l.prototype._error=function(n){this.errored=!0,this.queue=[],this.destination.error(n)},l.prototype._complete=function(){this.scheduleNotification(Ju.a.createComplete())},l}(Hu.a),Yu=function(n,l){this.time=n,this.notification=l},ni=function(){function n(n,l){this.learnService=n,this.errorService=l,this.isDemo=!1,this.currentLesson=new t.EventEmitter,this.rehearseLesson=new t.EventEmitter,this.courseCompleted=new t.EventEmitter,this.goToIntro=new t.EventEmitter,this.componentActive=!0,this.lessonHeaders=[],this.courseChapters=[],this.chapterLessons={},this.resultsByLesson={},this.resultsByChapter={},this.isLessonsReady=!1,this.isCourseComplete=!1}return n.prototype.ngOnInit=function(){this.getCourseChapters(),this.getLessonHeaders(),this.getLessonResults()},n.prototype.onSelectLesson=function(n){this.currentLessonId=n!==this.currentLessonId?n:null},n.prototype.onSelectChapter=function(n){n!==this.currentChapter?this.currentChapter=n:(this.currentChapter=null,this.currentLessonId=null)},n.prototype.onLessonDataLoaded=function(n){this.lessonData=n},n.prototype.onContinueLesson=function(n,l){n.stopPropagation(),n.preventDefault(),this.lessonData&&this.lessonData._id===l?this.currentLesson.emit(this.lessonData):this.fetchLesson(l)},n.prototype.onRehearseLesson=function(n,l,e,t){n.stopPropagation(),n.preventDefault(),t>0&&(this.lessonData&&this.lessonData._id===l?(this.lessonData.rehearseStep=e,this.rehearseLesson.emit(this.lessonData)):this.fetchLesson(l,e))},n.prototype.onGoToStep=function(n,l,e){n.stopPropagation(),n.preventDefault(),this.fetchLesson(l,null,e)},n.prototype.onOpenDropDown=function(n){this.dropDown=n},n.prototype.onCloseDropDown=function(){this.dropDown=null},n.prototype.getChapterName=function(n){return"NoChapter"===n?this.text.NoChapter:n},n.prototype.getCourseId=function(){return this.course._id},n.prototype.hasStep=function(n,l){var e=!1,t=this.lessonHeaders.find(function(n){return n._id.toString()===l});return t&&t.exerciseSteps[n]&&t.exerciseSteps[n].active&&(e=!0),e},n.prototype.getCourseChapters=function(){this.courseChapters=this.course.chapters.slice(),this.hasChapters=!!this.courseChapters.length,this.course.lessons.find(function(n){return""===n.chapter})&&!this.hasChapters&&this.courseChapters.push("NoChapter")},n.prototype.getLessonHeaders=function(){var n=this;this.learnService.fetchLessonHeaders(this.course._id).pipe(Object(P.a)(function(){return n.componentActive})).subscribe(function(l){n.getChapterLessons(l),n.setDefaultResultData(l)},function(l){return n.errorService.handleError(l)}),this.isLessonsReady=!0},n.prototype.getChapterLessons=function(n){var l=this;this.lessonHeaders=n,this.courseChapters.forEach(function(e){l.chapterLessons[e]=l.sortChapterLessons(n,e)});var e=n.find(function(n){return n._id===l.currentLessonId});e&&(this.currentChapter=e.chapterName)},n.prototype.sortChapterLessons=function(n,l){var e,t="NoChapter"===l?"":l,u=[],i=n.filter(function(n){return n.chapterName===t}),o=this.course.lessons.find(function(n){return n.chapter===t});return o&&o.lessonIds&&o.lessonIds.forEach(function(l){(e=n.find(function(n){return n._id===l}))&&u.push(e)}),u.length?u:i},n.prototype.setDefaultResultData=function(n){var l=this;n.forEach(function(n){l.resultsByLesson[n._id]={_id:n._id,studied:0,learned:0,total:null,totalwords:null,hasStarted:!1,hasCompleted:!1,introOnly:!l.hasStudyOrPractise(n)}}),this.courseChapters.forEach(function(n){l.resultsByChapter[n]={_id:null,studied:0,learned:0,total:null,totalwords:null,hasStarted:!1,hasCompleted:!1}})},n.prototype.getLessonResults=function(){var n=this;this.isDemo?this.learnService.fetchLessonCounts(this.course._id).pipe(Object(P.a)(function(){return n.componentActive})).subscribe(function(l){l&&n.countTotals(l)},function(l){return n.errorService.handleError(l)}):this.learnService.fetchLessonResults(this.course._id).pipe(Object(P.a)(function(){return n.componentActive}),function(n,l){void 0===l&&(l=Qu.a);var e=2e3 instanceof Date&&!isNaN(2e3)?2e3-l.now():Math.abs(2e3);return function(n){return n.lift(new Xu(e,l))}}()).subscribe(function(l){l&&n.countTotals(l)},function(l){return n.errorService.handleError(l)})},n.prototype.countTotals=function(n){var l=this,e=this.getActiveLessonIds(),t=0;n&&n.forEach(function(n){e.find(function(l){return l===n._id})&&l.resultsByLesson[n._id]&&(l.resultsByLesson[n._id].introOnly||(l.resultsByLesson[n._id]=n,l.resultsByLesson[n._id].hasStarted=!(!n.learned&&!n.studied),l.resultsByLesson[n._id].hasCompleted=n.learned>=n.total,t+=l.resultsByLesson[n._id].hasCompleted?1:0))}),this.courseChapters.forEach(function(n){l.chapterLessons[n]&&(l.chapterLessons[n].forEach(function(e){l.resultsByLesson[e._id]&&l.hasStudyOrPractise(e)&&(l.resultsByChapter[n].learned+=l.resultsByLesson[e._id].learned||0,l.resultsByChapter[n].total+=l.resultsByLesson[e._id].total||0)}),l.resultsByChapter[n].hasCompleted=l.resultsByChapter[n].total>0&&l.resultsByChapter[n].learned>=l.resultsByChapter[n].total)}),t===e.length&&(this.isCourseComplete=!0,this.currentChapter=null,this.currentLessonId=null,this.courseCompleted.emit(!0))},n.prototype.hasStudyOrPractise=function(n){return!(!n.exerciseSteps.study.active&&!n.exerciseSteps.practise.active)},n.prototype.getActiveLessonIds=function(){var n=[];return this.course.lessons.forEach(function(l){l.lessonIds.forEach(function(l){n.push(l)})}),n},n.prototype.fetchLesson=function(n,l,e){var t=this;void 0===l&&(l=null),void 0===e&&(e=null),this.learnService.fetchLesson(n).pipe(Object(P.a)(function(){return t.componentActive})).subscribe(function(n){l?(n.rehearseStep=l,t.rehearseLesson.emit(n)):e?(n.skipToStep=e,t.goToIntro.emit(n)):t.currentLesson.emit(n)},function(n){return t.errorService.handleError(n)})},n.prototype.ngOnDestroy=function(){this.componentActive=!1},n}(),li=t["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;padding:4px;font-size:20px}section.overview[_ngcontent-%COMP%]{background:#fff;border-radius:4px;padding:2px 2px 1px}li[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%]{cursor:pointer;margin-left:-15px;margin-right:-15px;padding:12px;margin-top:0}.deselected[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:0}h2.completed[_ngcontent-%COMP%]{color:#449d44;padding:0 0 8px 8px}h2[_ngcontent-%COMP%] > .count[_ngcontent-%COMP%]{color:#fff}.lesson-title[_ngcontent-%COMP%]{cursor:pointer;padding:12px}.selected[_ngcontent-%COMP%]   .lesson-title[_ngcontent-%COMP%]{margin-bottom:12px}.selected[_ngcontent-%COMP%]{cursor:default}.list-group[_ngcontent-%COMP%]{margin-bottom:0}.list-group-item[_ngcontent-%COMP%]{padding:0}.chapters[_ngcontent-%COMP%] > .list-group-item[_ngcontent-%COMP%]{margin-bottom:5px;padding:0 15px}.chapters[_ngcontent-%COMP%] > .selected[_ngcontent-%COMP%]{padding:0 15px 5px}.lesson[_ngcontent-%COMP%] > .list-group-item[_ngcontent-%COMP%]{color:#000;background-color:#5bc0de;border-color:#326999;margin-bottom:3px}.lesson-title[_ngcontent-%COMP%]   .fa-check[_ngcontent-%COMP%]{color:green;font-size:28px}H2[_ngcontent-%COMP%] > .fa-check[_ngcontent-%COMP%]{font-size:36px}H2.chapter[_ngcontent-%COMP%] > .fa-check[_ngcontent-%COMP%]{font-size:28px;color:#fff}.count[_ngcontent-%COMP%]{font-size:16px;color:#333}.dropdown-menu[_ngcontent-%COMP%]{top:32px}km-lesson-overview[_ngcontent-%COMP%]{margin:8px;display:block;padding:15px;font-size:20px;background-color:#fff;border-radius:6px}"]],data:{}});function ei(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"h2",[["class","completed"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,0,"span",[["class","fa fa-check fa-spacing"]],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,[""," "]))],null,function(n,l){n(l,2,0,l.component.text.CourseCompleted)})}function ti(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,0,"span",[["class","fa fa-check"]],null,null,null,null,null))],null,null)}function ui(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function ii(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"km-lesson-overview",[["kmScrollTo",""]],null,[[null,"currentLesson"]],function(n,l,e){var t=!0;return"currentLesson"===l&&(t=!1!==n.component.onLessonDataLoaded(e)&&t),t},zu,ku)),t["\u0275did"](1,245760,[["lessonDetail",4]],0,Ru,[k,g.a],{lessonId:[0,"lessonId"],text:[1,"text"],courseId:[2,"courseId"],isDemo:[3,"isDemo"]},{currentLesson:"currentLesson"}),t["\u0275did"](2,4210688,null,0,Gu,[t.ElementRef],null,null)],function(n,l){var e=l.component;n(l,1,0,e.currentLessonId,e.text,e.getCourseId(),e.isDemo)},null)}function oi(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,5,"li",[["class","list-group-item lesson-title"]],[[2,"selected",null]],null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,2,null,ui)),t["\u0275did"](2,540672,null,0,m.NgTemplateOutlet,[t.ViewContainerRef],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),t["\u0275pod"](3,{lesson:0,nr:1,chapterNr:2}),(n()(),t["\u0275and"](16777216,null,null,1,null,ii)),t["\u0275did"](5,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,2,0,n(l,3,0,l.context.$implicit,l.context.index,l.parent.parent.context.index),t["\u0275nov"](l.parent.parent.parent.parent.parent,5)),n(l,5,0,l.context.$implicit._id===e.currentLessonId&&!e.resultsByLesson[l.context.$implicit._id].introOnly)},function(n,l){n(l,0,0,l.context.$implicit._id===l.component.currentLessonId)})}function si(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"ul",[["class","list-group lesson"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,oi)),t["\u0275did"](2,802816,null,0,m.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,l){n(l,2,0,l.component.chapterLessons[l.parent.context.$implicit])},null)}function ri(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,10,"li",[["class","list-group-item"]],null,null,null,null,null)),t["\u0275did"](1,278528,null,0,m.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](2,{selected:0,deselected:1}),(n()(),t["\u0275eld"](3,0,null,null,5,"h2",[["class","chapter bg-primary"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onSelectChapter(n.context.$implicit)&&t),t},null,null)),(n()(),t["\u0275ted"](4,null,[" ",". "," "])),(n()(),t["\u0275eld"](5,0,null,null,1,"span",[["class","count"]],null,null,null,null,null)),(n()(),t["\u0275ted"](6,null,[" ("," / ",") "])),(n()(),t["\u0275and"](16777216,null,null,1,null,ti)),t["\u0275did"](8,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,si)),t["\u0275did"](10,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,1,0,"list-group-item",n(l,2,0,l.context.$implicit===e.currentChapter,l.context.$implicit!==e.currentChapter)),n(l,8,0,null==e.resultsByChapter[l.context.$implicit]?null:e.resultsByChapter[l.context.$implicit].hasCompleted),n(l,10,0,l.context.$implicit===e.currentChapter)},function(n,l){var e=l.component;n(l,4,0,l.context.index+1,e.getChapterName(l.context.$implicit)),n(l,6,0,(null==e.resultsByChapter[l.context.$implicit]?null:e.resultsByChapter[l.context.$implicit].learned)||0,(null==e.resultsByChapter[l.context.$implicit]?null:e.resultsByChapter[l.context.$implicit].total)||0)})}function ai(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"ul",[["class","list-group chapters"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,ri)),t["\u0275did"](2,802816,null,0,m.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,l){n(l,2,0,l.component.courseChapters)},null)}function ci(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function di(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"km-lesson-overview",[["kmScrollTo",""]],null,[[null,"currentLesson"]],function(n,l,e){var t=!0;return"currentLesson"===l&&(t=!1!==n.component.onLessonDataLoaded(e)&&t),t},zu,ku)),t["\u0275did"](1,245760,[["lessonDetail",4]],0,Ru,[k,g.a],{lessonId:[0,"lessonId"],text:[1,"text"],courseId:[2,"courseId"],isDemo:[3,"isDemo"]},{currentLesson:"currentLesson"}),t["\u0275did"](2,4210688,null,0,Gu,[t.ElementRef],null,null)],function(n,l){var e=l.component;n(l,1,0,e.currentLessonId,e.text,e.getCourseId(),e.isDemo)},null)}function pi(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,5,"li",[["class","list-group-item"]],[[2,"selected",null]],null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,2,null,ci)),t["\u0275did"](2,540672,null,0,m.NgTemplateOutlet,[t.ViewContainerRef],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),t["\u0275pod"](3,{lesson:0,nr:1}),(n()(),t["\u0275and"](16777216,null,null,1,null,di)),t["\u0275did"](5,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,2,0,n(l,3,0,l.context.$implicit,l.context.index),t["\u0275nov"](l.parent.parent.parent,5)),n(l,5,0,l.context.$implicit._id===e.currentLessonId)},function(n,l){n(l,0,0,l.context.$implicit._id===l.component.currentLessonId)})}function fi(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"ul",[["class","list-group lesson"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,pi)),t["\u0275did"](2,802816,null,0,m.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,l){n(l,2,0,l.component.chapterLessons.NoChapter)},null)}function hi(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,4,"div",[],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,ai)),t["\u0275did"](2,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,fi)),t["\u0275did"](4,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,2,0,e.hasChapters),n(l,4,0,!e.hasChapters)},null)}function gi(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"button",[["class","btn btn-success pull-right"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onContinueLesson(e,n.parent.parent.context.lesson._id)&&t),t},null,null)),(n()(),t["\u0275eld"](1,0,null,null,0,"span",[["class","fa fa-arrow-right fa-spacing"]],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,[" "," "]))],null,function(n,l){n(l,2,0,l.component.text.StartLesson)})}function mi(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"button",[["class","btn btn-success pull-right"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onContinueLesson(e,n.parent.parent.context.lesson._id)&&t),t},null,null)),(n()(),t["\u0275eld"](1,0,null,null,0,"span",[["class","fa fa-arrow-right fa-spacing"]],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,[" "," "]))],null,function(n,l){n(l,2,0,l.component.text.ContinueLesson)})}function vi(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"li",[],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"a",[],null,[[null,"click"]],function(n,l,e){var t=!0,u=n.component;return"click"===l&&(t=!1!==u.onRehearseLesson(e,n.parent.parent.parent.context.lesson._id,"study",u.resultsByLesson[n.parent.parent.parent.context.lesson._id].totalwords)&&t),t},null,null)),(n()(),t["\u0275ted"](2,null,[" "," (",") "]))],null,function(n,l){var e=l.component;n(l,2,0,e.text.Study,e.resultsByLesson[l.parent.parent.parent.context.lesson._id].totalwords)})}function xi(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,10,"div",[["class","btn-group pull-right"]],null,[[null,"mouseover"],[null,"mouseout"]],function(n,l,e){var t=!0,u=n.component;return"mouseover"===l&&(t=!1!==u.onOpenDropDown(n.parent.parent.context.lesson._id)&&t),"mouseout"===l&&(t=!1!==u.onCloseDropDown()&&t),t},null,null)),(n()(),t["\u0275eld"](1,0,null,null,3,"button",[["class","btn btn-primary dropdown-toggle"],["data-toggle","dropdown"],["type","button"]],null,null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,0,"span",[["class","fa fa-repeat fa-spacing"]],null,null,null,null,null)),(n()(),t["\u0275ted"](3,null,[" "," "])),(n()(),t["\u0275eld"](4,0,null,null,0,"span",[["class","caret"]],null,null,null,null,null)),(n()(),t["\u0275eld"](5,0,null,null,5,"ul",[["class","dropdown-menu"]],[[4,"display",null]],null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,vi)),t["\u0275did"](7,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](8,0,null,null,2,"li",[],null,null,null,null,null)),(n()(),t["\u0275eld"](9,0,null,null,1,"a",[],null,[[null,"click"]],function(n,l,e){var t=!0,u=n.component;return"click"===l&&(t=!1!==u.onRehearseLesson(e,n.parent.parent.context.lesson._id,"practise",u.resultsByLesson[n.parent.parent.context.lesson._id].total)&&t),t},null,null)),(n()(),t["\u0275ted"](10,null,[" "," (",") "]))],function(n,l){n(l,7,0,l.component.resultsByLesson[l.parent.parent.context.lesson._id].totalwords>0)},function(n,l){var e=l.component;n(l,3,0,e.text.RehearseLesson),n(l,5,0,e.dropDown===l.parent.parent.context.lesson._id?"block":"none"),n(l,10,0,e.text.Practise,e.resultsByLesson[l.parent.parent.context.lesson._id].total)})}function Ci(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,6,"div",[["class","header-data"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,gi)),t["\u0275did"](2,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,mi)),t["\u0275did"](4,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,xi)),t["\u0275did"](6,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,2,0,!e.resultsByLesson[l.parent.context.lesson._id].hasStarted),n(l,4,0,e.resultsByLesson[l.parent.context.lesson._id].hasStarted&&!e.resultsByLesson[l.parent.context.lesson._id].hasCompleted),n(l,6,0,e.resultsByLesson[l.parent.context.lesson._id].hasCompleted)},null)}function wi(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"button",[["class","btn btn-success pull-right"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onContinueLesson(e,n.parent.parent.context.lesson._id)&&t),t},null,null)),(n()(),t["\u0275eld"](1,0,null,null,0,"span",[["class","fa fa-arrow-right fa-spacing"]],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,[" "," "]))],null,function(n,l){n(l,2,0,l.component.text.GoToLesson)})}function yi(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","header-data"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,wi)),t["\u0275did"](2,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){n(l,2,0,!l.component.resultsByLesson[l.parent.context.lesson._id].hasStarted)},null)}function bi(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"button",[["class","btn btn-success pull-right"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onGoToStep(e,n.parent.context.lesson._id,"dialogue")&&t),t},null,null)),(n()(),t["\u0275eld"](1,0,null,null,0,"span",[["class","fa fa-comment fa-spacing"]],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,[" "," "]))],null,function(n,l){n(l,2,0,l.component.text.Dialogue)})}function Si(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"button",[["class","btn btn-success pull-right"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onGoToStep(e,n.parent.context.lesson._id,"intro")&&t),t},null,null)),(n()(),t["\u0275eld"](1,0,null,null,0,"span",[["class","fa fa-info-circle fa-spacing"]],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,[" "," "]))],null,function(n,l){n(l,2,0,l.component.text.Intro)})}function Ii(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),t["\u0275ted"](1,null,["","."]))],null,function(n,l){n(l,1,0,l.parent.context.chapterNr+1)})}function Di(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,0,"span",[["class","fa fa-check"]],null,null,null,null,null))],null,null)}function Ri(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,4,"span",[],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"span",[["class","count"]],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,[" ("," / ",") "])),(n()(),t["\u0275and"](16777216,null,null,1,null,Di)),t["\u0275did"](4,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){n(l,4,0,l.component.resultsByLesson[l.parent.context.lesson._id].hasCompleted)},function(n,l){var e=l.component;n(l,2,0,e.resultsByLesson[l.parent.context.lesson._id].learned||0,e.resultsByLesson[l.parent.context.lesson._id].total||0)})}function ki(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,13,"div",[["class","lesson-title"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onSelectLesson(n.context.lesson._id)&&t),t},null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Ci)),t["\u0275did"](2,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,yi)),t["\u0275did"](4,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,bi)),t["\u0275did"](6,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Si)),t["\u0275did"](8,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Ii)),t["\u0275did"](10,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275ted"](11,null,["",". "," "])),(n()(),t["\u0275and"](16777216,null,null,1,null,Ri)),t["\u0275did"](13,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,2,0,e.resultsByLesson[l.context.lesson._id]&&!e.resultsByLesson[l.context.lesson._id].introOnly),n(l,4,0,e.resultsByLesson[l.context.lesson._id].hasStarted&&!(null!=e.resultsByLesson[l.context.lesson._id]&&e.resultsByLesson[l.context.lesson._id].introOnly)),n(l,6,0,e.hasStep("dialogue",l.context.lesson._id)),n(l,8,0,e.hasStep("intro",l.context.lesson._id)),n(l,10,0,void 0!==l.context.chapterNr),n(l,13,0,e.resultsByLesson[l.context.lesson._id]&&!e.resultsByLesson[l.context.lesson._id].introOnly)},function(n,l){n(l,11,0,l.context.nr+1,l.context.lesson.name)})}function Ti(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,4,"section",[["class","overview"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,ei)),t["\u0275did"](2,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,hi)),t["\u0275did"](4,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](0,[["titleTemplate",2]],null,0,null,ki))],function(n,l){var e=l.component;n(l,2,0,e.isCourseComplete),n(l,4,0,e.isLessonsReady)},null)}var Pi=function(){function n(){this.showModal=!1}return n.prototype.ngOnInit=function(){this.cheer=this.loadAudio("/assets/audio/cheer.ogg")},n.prototype.onKeyPressed=function(n){"Escape"===n&&this.close()},n.prototype.onClose=function(){this.close()},n.prototype.doShowModal=function(){var n=this;this.showModal=!0,this.cheer.play(),setTimeout(function(){n.showModal=!1},1e4)},n.prototype.loadAudio=function(n){var l=new Audio;return l.src=n,l.load(),l.volume=.1,l},n.prototype.close=function(){this.showModal=!1},n}(),Ni=t["\u0275crt"]({encapsulation:0,styles:[[".jumbotron[_ngcontent-%COMP%]{margin-bottom:0;background-image:url(/assets/img/ranks/promoted.jpg);color:#fff}.modal-body[_ngcontent-%COMP%]{padding:0}h1[_ngcontent-%COMP%]{text-shadow:4px 1px #000}.newrank[_ngcontent-%COMP%]{border:1px dotted #000;border-radius:5px;padding:12px;margin:36px 12px;font-size:36px;color:#000;background-color:#fff}.newrank[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{width:64px;height:64px;margin-right:12px}.closeModal[_ngcontent-%COMP%]{height:36px;font-size:36px;color:#fff;margin:-26px;text-shadow:1px 1px 1px #333;cursor:pointer}"]],data:{}});function Oi(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,16,"div",[["class","modal"],["kmPressed",""],["role","dialog"],["tabindex","-1"]],null,[[null,"hasKeyPressed"],["document","keydown"]],function(n,l,e){var u=!0,i=n.component;return"document:keydown"===l&&(u=!1!==t["\u0275nov"](n,3).keypress(e)&&u),"hasKeyPressed"===l&&(u=!1!==i.onKeyPressed(e)&&u),u},null,null)),t["\u0275did"](1,278528,null,0,m.NgStyle,[t.KeyValueDiffers,t.ElementRef,t.Renderer2],{ngStyle:[0,"ngStyle"]},null),t["\u0275pod"](2,{display:0}),t["\u0275did"](3,16384,null,0,jn.a,[],null,{hasKeyPressed:"hasKeyPressed"}),(n()(),t["\u0275eld"](4,0,null,null,12,"div",[["class","modal-dialog"]],null,null,null,null,null)),(n()(),t["\u0275eld"](5,0,null,null,11,"div",[["class","modal-content"]],null,null,null,null,null)),(n()(),t["\u0275eld"](6,0,null,null,10,"div",[["class","modal-body"]],null,null,null,null,null)),(n()(),t["\u0275eld"](7,0,null,null,9,"div",[["class","text-center jumbotron"]],null,null,null,null,null)),(n()(),t["\u0275eld"](8,0,null,null,1,"div",[["class","closeModal"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onClose()&&t),t},null,null)),(n()(),t["\u0275eld"](9,0,null,null,0,"span",[["class","fa fa-times pull-right"]],null,null,null,null,null)),(n()(),t["\u0275eld"](10,0,null,null,1,"h1",[],null,null,null,null,null)),(n()(),t["\u0275ted"](11,null,["","!"])),(n()(),t["\u0275eld"](12,0,null,null,1,"h1",[],null,null,null,null,null)),(n()(),t["\u0275ted"](13,null,["",":"])),(n()(),t["\u0275eld"](14,0,null,null,2,"div",[["class","newrank"]],null,null,null,null,null)),(n()(),t["\u0275eld"](15,0,null,null,0,"img",[["class","img"]],[[8,"src",4]],null,null,null,null)),(n()(),t["\u0275ted"](16,null,[" "," "]))],function(n,l){n(l,1,0,n(l,2,0,l.component.showModal?"block":"none"))},function(n,l){var e=l.component;n(l,11,0,e.text.Congratulations),n(l,13,0,e.text.YouPromoted),n(l,15,0,t["\u0275inlineInterpolate"](1,"/assets/img/ranks/rank",e.rankNr,"_64.png")),n(l,16,0,e.text["rank"+e.rankNr+e.gender])})}var Li=e("VnD/"),Ei=function(){function n(n,l,e,t,u,i,o,s,r){this.route=n,this.router=l,this.location=e,this.learnService=t,this.sharedService=u,this.utilsService=i,this.authService=o,this.userService=s,this.errorService=r,this.componentActive=!0,this.settingsUpdated=!1,this.countPerStep={},this.text={},this.currentStep=0,this.isLoading=!1,this.isLessonReady=!1,this.exercisesStarted=!1,this.exercisesInterrupted=new Un.a,this.stepcountUpdated=new Bn.a({}),this.lessonChanged=new Un.a,this.continueCourseLevel=new Un.a,this.level=T.c,this.isCourseDone=!1,this.loopCount=0,this.isError=!1}return n.prototype.ngOnInit=function(){this.isDemo=!this.authService.isLoggedIn(),this.settings=this.userService.user.jazyk.learn,this.subscriptions()},n.prototype.stepTo=function(n){this.currentStep!==n?(this.errorService.clearError(),this.currentStep=n,this.courseLevel=this.steps[n].level):this.courseLevel===T.c.Course&&this.continueCourseLevel.next(!0)},n.prototype.getGender=function(){return this.userService.user.main.gender||"m"},n.prototype.onSkipStep=function(){this.nextStep()},n.prototype.onStepBack=function(){this.previousStep()},n.prototype.onStartStudy=function(){this.stepTo(1)},n.prototype.onStepCompleted=function(n,l){this.isDemo?this.saveDemoAnswers(n,l):this.saveAnswers(n,l),this.settingsUpdated&&this.saveSettings()},n.prototype.onExitExercises=function(n){n.showModal=!0},n.prototype.onExitConfirmed=function(n){n&&(this.sharedService.changeExerciseMode(!1),this.exercisesInterrupted.next(!0),this.log("User aborted exercises"))},n.prototype.onLessonCompleted=function(n){this.getNextLesson(n)},n.prototype.onSettingsUpdated=function(n){this.settingsUpdated=!0,this.settings=n},n.prototype.onLessonSelected=function(n){this.routeStep="",this.lessonSelected(n)},n.prototype.onRehearseLesson=function(n){this.lessonSelected(n)},n.prototype.onGoToIntro=function(n){this.lessonSelected(n)},n.prototype.onCourseCompleted=function(n){n&&(this.isCourseDone=!0)},n.prototype.onContinueCourse=function(){this.router.navigate(["/learn/course/"+this.courseId+"/continue"])},n.prototype.capitalize=function(n){return n.charAt(0).toUpperCase()+n.slice(1)},n.prototype.hasStep=function(n){return!!this.steps.find(function(l){return l.name===n})},n.prototype.validateCourseStep=function(n){if(n&&"overview"!==n){if("review"===n||"difficult"===n||"exam"===n)return this.courseLevel=T.c.Course,this.routeStep=n,n;this.router.navigate(["/learn/course/"+this.courseId])}else this.courseLevel=T.c.Lesson,"overview"===n&&(this.routeStep=n,this.currentStep=0)},n.prototype.nextStep=function(){var n=this.steps.filter(function(n){return n.level===T.c.Lesson});this.currentStep<n.length-1?this.currentStep++:this.getNextLesson(this.lesson._id)},n.prototype.previousStep=function(){this.currentStep>0&&this.currentStep--},n.prototype.setText=function(n){this.text=this.utilsService.getTranslatedText(n)},n.prototype.getTranslations=function(){var n=this;this.utilsService.fetchTranslations(this.userService.user.main.lan,"LearnComponent").pipe(Object(P.a)(function(){return n.componentActive})).subscribe(function(l){n.getCourse(l,n.courseId),n.setText(l)},function(l){return n.errorService.handleError(l)})},n.prototype.getCourse=function(n,l){var e=this;this.isLoading=!0,this.learnService.fetchCourse(l).pipe(Object(P.a)(function(){return e.componentActive})).subscribe(function(l){if(e.isLoading=!1,l)l.isDemo||e.authService.isLoggedIn()||e.router.navigate(["/auth/signin"],{queryParams:{returnUrl:e.router.url}}),l.isPublished||e.isCourseAuthor(l)?(e.course=l,e.getCurrentLesson(),e.log("Loaded course '"+e.course.name+"'"),e.utilsService.setPageTitle(null,l.name)):(e.isError=!0,e.infoMsg=e.utilsService.getTranslation(n,"notpublished"));else{e.isError=!0;var t=e.utilsService.getTranslation(n,"InvalidCourseId");e.errorService.handleError({title:"Error",message:t})}})},n.prototype.isCourseAuthor=function(n){return this.userService.hasAccessLevel(n.access,T.a.Author)},n.prototype.getStepData=function(){this.setSteps(),this.isDemo?this.processStepResults(null):this.fetchStepData()},n.prototype.fetchStepData=function(){var n=this;this.learnService.fetchStepData(this.courseId,this.lesson._id).pipe(Object(P.a)(function(){return n.componentActive})).subscribe(function(l){n.processStepResults(l)},function(l){return n.errorService.handleError(l)})},n.prototype.processStepResults=function(n){this.countPerStep={},n?(this.getCourseStepCount(n),this.getLessonStepCount(n.lesson),this.courseLevel===T.c.Lesson?this.setDefaultLessonStep(n.lesson.length):this.setCourseStep()):(this.getLessonStepCount(null),this.setDefaultLessonStep(null))},n.prototype.setSteps=function(){var n=this,l=this.utilsService.getSteps();this.steps=[],l.forEach(function(l,e){n.showStep(l)&&n.steps.push(l)})},n.prototype.showStep=function(n){return!!n.alwaysShown||this.lesson.rehearseStep===n.name||(this.lesson.exerciseSteps[n.name]&&this.lesson.exerciseSteps[n.name].active?"study"===n.name?!!this.lesson.exercises.find(function(n){return n.tpe===S.c.Word}):"exam"!==n.name||this.learnService.getExamCount(this.course.totalCount)>0:void 0)},n.prototype.setDefaultLessonStep=function(n){var l=null;this.lesson.rehearseStep?this.currentStep=this.getStepNr(this.lesson.rehearseStep):this.lesson.skipToStep?this.currentStep=this.getStepNr(this.lesson.skipToStep):("overview"===this.routeStep?l=0:n>0?this.hasStep("practise")&&this.countPerStep.practise.nrRemaining>0?(l=this.getStepNr("practise"),this.currentStep=l):this.hasStep("study")&&this.countPerStep.study.nrRemaining>0?l=this.getStepNr("study"):(l=-1,this.getNextLesson(this.lesson._id)):l=this.getNextStep(0),null===l&&(l=this.hasStep("dialogue")&&this.countPerStep.dialogue.nrDone>0?this.getNextStep(this.getStepNr("dialogue")):this.hasStep("intro")&&this.countPerStep.intro.nrDone>0?this.getNextStep(this.getStepNr("intro")):this.getStepNr("intro")),-1!==l&&(null!==l?(this.currentStep=l,this.isLessonReady=!0,this.lessonChanged.next(this.lesson)):this.loopCount<1?(this.loopCount++,this.getFirstLesson()):(this.currentStep=0,this.isLessonReady=!0)))},n.prototype.getNextStep=function(n){var l=null;return n++,this.hasStep("intro")&&n<=this.getStepNr("intro")?l=this.getStepNr("intro"):this.hasStep("dialogue")&&n<=this.getStepNr("dialogue")?l=this.getStepNr("dialogue"):this.hasStep("study")&&n<=this.getStepNr("study")?l=this.getStepNr("study"):this.hasStep("practise")&&n<=this.getStepNr("practise")?l=this.getStepNr("practise"):this.getNextLesson(this.lesson._id),l},n.prototype.setCourseStep=function(){var n=this.courseStep;this.hasStep(n)&&(this.currentStep=this.getStepNr(n),this.isLessonReady=!0)},n.prototype.getStepNr=function(n){var l=-1;return this.steps&&this.steps.forEach(function(e,t){e.name===n&&(l=t)}),l},n.prototype.getCourseStepCount=function(n){var l=this;this.steps.forEach(function(n){n.level!==T.c.Course||l.countPerStep[n.name]||(l.countPerStep[n.name]={nrDone:0,nrRemaining:0})}),this.countPerStep.difficult.nrRemaining=n.difficult,this.countPerStep.review.nrRemaining=n.review,this.countPerStep.exam&&(this.countPerStep.exam.nrRemaining=this.learnService.getExamCount(this.course.totalCount))},n.prototype.getLessonStepCount=function(n){var l,e=this,t=this.lesson.exercises.length,u=this.lesson.exercises.filter(function(n){return n.tpe===S.c.Word}).length;n&&n.length>0&&n.forEach(function(n){"study"!==n.step&&"practise"!==n.step&&"intro"!==n.step&&"dialogue"!==n.step||(l="study"===n.step?u:t,e.countPerStep[n.step]={nrDone:n.nrDone||0,nrRemaining:Math.max(0,l-n.nrDone||0)})}),this.steps.forEach(function(n){n.level===T.c.Lesson&&(l="study"===n.name?u:t,n.level!==T.c.Lesson||e.countPerStep[n.name]||(e.countPerStep[n.name]={nrDone:0,nrRemaining:Math.max(0,l)}))}),this.countPerStep.practise&&this.countPerStep.study&&(this.countPerStep.practise.nrRemaining=Math.max(0,this.countPerStep.study.nrDone+(t-u)-this.countPerStep.practise.nrDone)),this.stepcountUpdated.next(this.countPerStep)},n.prototype.saveAnswers=function(n,l){var e=this,t=this.sharedService.processAnswers(n,l,this.course._id,this.lesson?this.lesson._id:null,!!this.lesson&&!!this.lesson.rehearseStep,this.courseLevel);t&&(this.log("Total points earned: "+t.pointsEarned),this.learnService.saveUserResults(JSON.stringify(t.result)).pipe(Object(P.a)(function(){return e.componentActive})).subscribe(function(u){"intro"===n||"dialogue"===n?e.nextStep():(e.log("Saved exercise answers"),u&&(t.result.data.forEach(function(n,e){l[e].result=n}),e.checkStepCount(),e.checkNewRank(u,t.pointsEarned)))},function(n){return e.errorService.handleError(n)}))},n.prototype.saveDemoAnswers=function(n,l){this.userService.storeDemoData(l,n,this.course._id,this.lesson._id);var e=this.userService.getDemoData(n,this.course._id),t=this.sharedService.processAnswers(n,e,this.course._id,this.lesson._id,!1,T.c.Lesson);"intro"===n||"dialogue"===n?this.nextStep():this.updateStepCount(n,t.lastResult)},n.prototype.checkNewRank=function(n,l){var e=this.utilsService.getRank(n);e>this.utilsService.getRank(n-l)&&this.promotionComponent&&(this.rankNr=e||0,this.rankKey="rank"+this.rankNr.toString()+this.userService.user.main.gender||"m",this.promotionComponent.doShowModal())},n.prototype.saveSettings=function(){var n=this;this.userService.saveLearnSettings(this.settings).pipe(Object(P.a)(function(){return n.componentActive})).subscribe(function(l){n.settingsUpdated=!1},function(l){return n.errorService.handleError(l)})},n.prototype.updateStepCount=function(n,l){var e,t,u=Object.keys(l).length;switch(n){case"study":e=this.countPerStep[n].nrDone+u,t=Math.max(0,this.countPerStep[n].nrRemaining-u),this.countPerStep[n]={nrDone:e,nrRemaining:t},t=this.countPerStep.practise.nrRemaining+u,this.countPerStep.practise.nrRemaining=Math.max(0,t);break;case"practise":for(var i in l)l.hasOwnProperty(i)&&!0===l[i].isLearned&&(t=this.countPerStep.practise.nrRemaining-1,this.countPerStep.practise.nrRemaining=Math.max(0,t));break;case"difficult":for(var i in l)l.hasOwnProperty(i)&&!1===l[i].isDifficult&&(t=this.countPerStep.difficult.nrRemaining-1,this.countPerStep.difficult.nrRemaining=Math.max(0,t));break;case"review":t=this.countPerStep.review.nrRemaining-u,this.countPerStep.review.nrRemaining=Math.max(0,t)}this.stepcountUpdated.next(this.countPerStep)},n.prototype.checkStepCount=function(){var n=this;this.learnService.fetchStepData(this.course._id,this.lesson._id).pipe(Object(P.a)(function(){return n.componentActive})).subscribe(function(l){l&&(n.getCourseStepCount(l),n.getLessonStepCount(l.lesson))},function(l){return n.errorService.handleError(l)})},n.prototype.lessonSelected=function(n){n&&(this.lesson=n,this.getStepData())},n.prototype.getCurrentLesson=function(){this.isDemo?this.getFirstLesson():this.fetchMostRecentLesson()},n.prototype.fetchMostRecentLesson=function(){var n=this;this.learnService.fetchMostRecentLesson(this.course._id).pipe(Object(P.a)(function(){return n.componentActive})).subscribe(function(l){l?n.getLesson(l):(n.log("No results yet; start from beginning."),n.getFirstLesson())},function(l){return n.errorService.handleError(l)})},n.prototype.getLesson=function(n){var l=this;this.log("Fetching lesson data"),this.learnService.fetchLesson(n).pipe(Object(P.a)(function(){return l.componentActive})).subscribe(function(n){n?(l.log("Fetched lesson data for lesson '"+n.name+"'"),l.lessonSelected(n)):l.getFirstLesson()},function(n){return l.errorService.handleError(n)})},n.prototype.getFirstLesson=function(){var n=this.course.chapters,l=this.course.lessons.find(function(l){return l.chapter===n[0]});this.getLesson(l?l.lessonIds[0]:this.course.lessons[0].lessonIds[0])},n.prototype.getNextLesson=function(n){var l,e,t=this,u=!1;(this.course.chapters.length?this.course.chapters:[""]).forEach(function(i){(e=t.course.lessons.find(function(n){return n.chapter===i}))&&e.lessonIds.forEach(function(e){u&&!l?l=e:u=n===e})}),l?this.getLesson(l):(this.currentStep=0,this.isLessonReady=!0)},n.prototype.subscriptions=function(){var n=this;this.route.params.pipe(Object(P.a)(function(){return n.componentActive}),Object(Li.a)(function(n){return n.id})).subscribe(function(l){n.courseId=l.id,n.courseStep=n.validateCourseStep(l.step),l.step&&n.location.go("/learn/course/"+n.courseId),n.getTranslations()}),this.sharedService.exerciseModeChanged.pipe(Object(P.a)(function(){return n.componentActive})).subscribe(function(l){n.exercisesStarted=l,l&&(n.log("Starting lesson '"+n.lesson.name+"'"),n.errorService.clearError())})},n.prototype.log=function(n){this.sharedService.sendEventMessage({message:n,source:"LearnCourseComponent"})},n.prototype.ngOnDestroy=function(){this.componentActive=!1},n}(),Mi=t["\u0275crt"]({encapsulation:0,styles:[[".list-inline[_ngcontent-%COMP%]{margin-left:0}.flag[_ngcontent-%COMP%]{margin-top:-8px}h1[_ngcontent-%COMP%]{margin-top:2px;margin-bottom:2px}.panel-header[_ngcontent-%COMP%]{padding-bottom:0;margin-bottom:4px;height:132px}.panel-start[_ngcontent-%COMP%]{text-align:center;padding:16px}.panel-start[_ngcontent-%COMP%]   .btn-start[_ngcontent-%COMP%]{font-size:32px}.steps[_ngcontent-%COMP%]{margin-bottom:3px;padding:0 4px;width:100%;float:right}.btn-step[_ngcontent-%COMP%]{margin-top:4px;padding-left:12px;padding-right:12px;border-radius:3px 3px 0 0;border-bottom:3px solid inherit}.active[_ngcontent-%COMP%]{position:relative;top:4px;margin-top:0!important;height:51px;color:#fff}.inactive[_ngcontent-%COMP%]{border-bottom-width:3px}.activeLevel[_ngcontent-%COMP%]   .inactive[_ngcontent-%COMP%]{border-bottom:3px solid #fff}.inactive[_ngcontent-%COMP%]:hover{background-color:#fff}.active.btn-overview[_ngcontent-%COMP%]{background-color:#7f95a5;border-bottom:3px solid #7f95a5}.inactive[_ngcontent-%COMP%]:hover.btn-overview{border-bottom:3px solid #7f95a5}.learn-header.overview[_ngcontent-%COMP%]{background-color:#7f95a5}.active.btn-intro[_ngcontent-%COMP%]{background-color:#7da483;border-bottom:3px solid #7da483}.inactive[_ngcontent-%COMP%]:hover.btn-intro{border-bottom:3px solid #7da483}.learn-header.intro[_ngcontent-%COMP%]{background-color:#7da483}.active.btn-study[_ngcontent-%COMP%]{background-color:#adc888;border-bottom:3px solid #adc888}.inactive[_ngcontent-%COMP%]:hover.btn-study{border-bottom:3px solid #adc888}.learn-header.study[_ngcontent-%COMP%]{background-color:#adc888}.active.btn-dialogue[_ngcontent-%COMP%]{background-color:#4cb6ac;border-bottom:3px solid #4cb6ac}.inactive[_ngcontent-%COMP%]:hover.btn-dialogue{border-bottom:3px solid #4cb6ac}.learn-header.dialogue[_ngcontent-%COMP%]{background-color:#4cb6ac}.active.btn-practise[_ngcontent-%COMP%]{background-color:#dcca53;border-bottom:3px solid #dcca53}.inactive[_ngcontent-%COMP%]:hover.btn-practise{border-bottom:3px solid #dcca53}.learn-header.practise[_ngcontent-%COMP%]{background-color:#dcca53}.active.btn-review[_ngcontent-%COMP%]{background-color:#f2c40f;border-bottom:3px solid #f2c40f}.inactive[_ngcontent-%COMP%]:hover.btn-review{border-bottom:3px solid #f2c40f}.learn-header.review[_ngcontent-%COMP%]{background-color:#f2c40f}.active.btn-difficult[_ngcontent-%COMP%]{background-color:#f39c11;border-bottom:3px solid #f39c11}.inactive[_ngcontent-%COMP%]:hover.btn-difficult{border-bottom:3px solid #f39c11}.learn-header.difficult[_ngcontent-%COMP%]{background-color:#f39c11}.active.btn-exam[_ngcontent-%COMP%]{background-color:#e84c3d;border-bottom:3px solid #e84c3d}.inactive[_ngcontent-%COMP%]:hover.btn-exam{border-bottom:3px solid #e84c3d}.learn-header.exam[_ngcontent-%COMP%]{background-color:#e84c3d}.btn[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{margin-right:4px}.learn-header[_ngcontent-%COMP%]{border-top-left-radius:4px;border-top-right-radius:4px;height:8px}.learn[_ngcontent-%COMP%]{border-bottom-left-radius:4px;border-bottom-right-radius:4px;padding:4px;background-color:#eee;background:linear-gradient(90deg,#efefef ,#fff)}.closeExercises[_ngcontent-%COMP%]{font-size:36px;color:#fff;margin-bottom:12px;text-shadow:1px 1px 1px #333;cursor:pointer}.exercise-header[_ngcontent-%COMP%]{height:36px}.demo-message[_ngcontent-%COMP%]{background-color:#fff;border:1px dotted #999;font-size:18px;padding:6px 6px 3px}.demo-title[_ngcontent-%COMP%]{color:red;font-size:24px;margin-right:12px}.register[_ngcontent-%COMP%]{font-style:italic;font-size:24px;color:#999;padding:60px 20px;background-color:#fff}.badge[_ngcontent-%COMP%]{background-color:#ccc}.remaining[_ngcontent-%COMP%]{background-color:red;color:#fff}.lesson-title[_ngcontent-%COMP%]{font-size:20px;font-style:italic;height:22px;color:#666}.overview[_ngcontent-%COMP%]{background:#7f95a5}.intro[_ngcontent-%COMP%]{background:#7da483}.dialogue[_ngcontent-%COMP%]{background:#4cb6ac}.study[_ngcontent-%COMP%]{background:#adc888}.practise[_ngcontent-%COMP%]{background:#dcca53}.review[_ngcontent-%COMP%]{background:#f2c40f}.difficult[_ngcontent-%COMP%]{background:#f39c11}.rehearse[_ngcontent-%COMP%]{background:#428bca}.exam[_ngcontent-%COMP%]{background:#e84c3d}"]],data:{}});function Ai(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,4,"span",[["class","demo-message"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"span",[["class","demo-title"]],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,["",""])),(n()(),t["\u0275eld"](3,0,null,null,1,"km-signup",[],null,null,null,$,F)),t["\u0275did"](4,49152,null,0,j,[],{text:[0,"text"],courseId:[1,"courseId"]},null)],function(n,l){var e=l.component;n(l,4,0,e.text,e.course._id)},function(n,l){n(l,2,0,l.component.text.DemoMode)})}function _i(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,3,"div",[["class","exercise-header"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,0,"span",[["class","fa fa-times pull-right closeExercises"]],null,[[null,"click"]],function(n,l,e){var u=!0;return"click"===l&&(u=!1!==n.component.onExitExercises(t["\u0275nov"](n.parent,10))&&u),u},null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Ai)),t["\u0275did"](3,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){n(l,3,0,l.component.isDemo)},null)}function Vi(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"button",[["accesskey","h"],["class","btn btn-success pull-right"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onContinueCourse()&&t),t},null,null)),(n()(),t["\u0275eld"](1,0,null,null,0,"span",[["class","fa fa-arrow-right"]],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,[""," "]))],null,function(n,l){n(l,2,0,l.component.text.continuecourse)})}function qi(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),t["\u0275ted"](1,null,["",": ",""]))],null,function(n,l){var e=l.component;n(l,1,0,e.text.CurrentLesson,null==e.lesson?null:e.lesson.name)})}function Wi(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"span",[["class","fa fa-spacing"]],null,null,null,null,null)),t["\u0275did"](1,278528,null,0,m.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](2,{"fa-repeat":0,"fa-fire":1,"fa-clock-o":2})],function(n,l){n(l,1,0,"fa fa-spacing",n(l,2,0,"review"===l.parent.parent.context.$implicit.name,"difficult"===l.parent.parent.context.$implicit.name,"exam"===l.parent.parent.context.$implicit.name))},null)}function ji(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"div",[["class","badge"]],[[2,"remaining",null]],null,null,null,null)),(n()(),t["\u0275ted"](1,null,[" "," "]))],null,function(n,l){var e=l.component;n(l,0,0,(null==e.countPerStep[l.parent.parent.context.$implicit.name]?null:e.countPerStep[l.parent.parent.context.$implicit.name].nrRemaining)>0),n(l,1,0,(null==e.countPerStep[l.parent.parent.context.$implicit.name]?null:e.countPerStep[l.parent.parent.context.$implicit.name].nrRemaining)||0)})}function Fi(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,7,"li",[["class","btn btn-lg btn-step"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.stepTo(n.parent.context.index)&&t),t},null,null)),t["\u0275did"](1,278528,null,0,m.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](2,{"btn-overview":0,"btn-intro":1,"btn-dialogue":2,"btn-study":3,"btn-practise":4,"btn-review":5,"btn-difficult":6,"btn-exam":7,active:8,inactive:9,"pull-right":10}),(n()(),t["\u0275and"](16777216,null,null,1,null,Wi)),t["\u0275did"](4,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275ted"](5,null,[" "," "])),(n()(),t["\u0275and"](16777216,null,null,1,null,ji)),t["\u0275did"](7,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,1,0,"btn btn-lg btn-step",n(l,2,1,["overview"===l.parent.context.$implicit.name,"intro"===l.parent.context.$implicit.name,"dialogue"===l.parent.context.$implicit.name,"study"===l.parent.context.$implicit.name,"practise"===l.parent.context.$implicit.name,"review"===l.parent.context.$implicit.name,"difficult"===l.parent.context.$implicit.name,"exam"===l.parent.context.$implicit.name,e.currentStep===l.parent.context.index,e.currentStep!==l.parent.context.index,l.parent.context.$implicit.level===e.level.Course])),n(l,4,0,l.parent.context.$implicit.hasCounter),n(l,7,0,l.parent.context.$implicit.hasCounter&&"exam"!==l.parent.context.$implicit.name)},function(n,l){var e=l.component;n(l,5,0,e.text["dialogue"===l.parent.context.$implicit.name?null==e.lesson.dialogue?null:e.lesson.dialogue.tpe:e.capitalize(l.parent.context.$implicit.name)])})}function $i(n){return t["\u0275vid"](0,[(n()(),t["\u0275and"](16777216,null,null,1,null,Fi)),t["\u0275did"](1,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](0,null,null,0))],function(n,l){var e=l.component;n(l,1,0,e.isLessonReady||l.context.$implicit.level===e.level.Course)},null)}function Ki(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"div",[["class","learn-header"]],null,null,null,null,null)),t["\u0275did"](1,278528,null,0,m.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null)],function(n,l){var e=l.component;n(l,1,0,"learn-header",null==e.steps[e.currentStep]?null:e.steps[e.currentStep].name)},null)}function Bi(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,16,"div",[],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,13,"div",[["class","panel panel-default panel-header"]],null,null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,12,"div",[["class","panel-body"]],null,null,null,null,null)),(n()(),t["\u0275eld"](3,0,null,null,8,"h1",[],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Vi)),t["\u0275did"](5,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](6,0,null,null,0,"img",[["class","flag"]],[[8,"src",4]],null,null,null,null)),(n()(),t["\u0275eld"](7,0,null,null,1,"span",[["class","course-title"]],null,null,null,null,null)),(n()(),t["\u0275ted"](8,null,["",""])),(n()(),t["\u0275eld"](9,0,null,null,2,"div",[["class","lesson-title"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,qi)),t["\u0275did"](11,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](12,0,null,null,2,"ul",[["class","list-unstyled list-inline steps"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,$i)),t["\u0275did"](14,802816,null,0,m.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Ki)),t["\u0275did"](16,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,5,0,!e.isDemo&&e.currentStep===e.getStepNr("overview")),n(l,11,0,!e.isCourseDone),n(l,14,0,e.steps),n(l,16,0,e.isLessonReady)},function(n,l){var e=l.component;n(l,6,0,t["\u0275inlineInterpolate"](1,"/assets/img/flags/",null==e.course?null:e.course.languagePair.to,".png")),n(l,8,0,null==e.course?null:e.course.name)})}function Ui(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-learn-intro",[],null,[[null,"stepCompleted"]],function(n,l,e){var t=!0;return"stepCompleted"===l&&(t=!1!==n.component.onStepCompleted("intro",null)&&t),t},Z,G)),t["\u0275did"](1,245760,null,0,z,[k,I.a,g.a],{lesson:[0,"lesson"],lessonChanged:[1,"lessonChanged"],steps:[2,"steps"],text:[3,"text"]},{stepCompleted:"stepCompleted"})],function(n,l){var e=l.component;n(l,1,0,e.lesson,e.lessonChanged,e.steps,e.text)},null)}function zi(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-learn-dialogue",[],null,[[null,"stepCompleted"]],function(n,l,e){var t=!0;return"stepCompleted"===l&&(t=!1!==n.component.onStepCompleted("dialogue",null)&&t),t},un,en)),t["\u0275did"](1,245760,null,0,ln,[k,g.a],{lesson:[0,"lesson"],lessonChanged:[1,"lessonChanged"],steps:[2,"steps"],lanPair:[3,"lanPair"],text:[4,"text"]},{stepCompleted:"stepCompleted"})],function(n,l){var e=l.component;n(l,1,0,e.lesson,e.lessonChanged,e.steps,e.course.languagePair,e.text)},null)}function Gi(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-learn-study",[],null,[[null,"skipStep"],[null,"stepCompleted"],[null,"updatedSettings"]],function(n,l,e){var t=!0,u=n.component;return"skipStep"===l&&(t=!1!==u.onSkipStep()&&t),"stepCompleted"===l&&(t=!1!==u.onStepCompleted("study",e)&&t),"updatedSettings"===l&&(t=!1!==u.onSettingsUpdated(e)&&t),t},ml,Gn)),t["\u0275did"](1,245760,null,0,zn,[k,I.a,g.a,h.a],{lesson:[0,"lesson"],exercisesInterrupted:[1,"exercisesInterrupted"],lessonChanged:[2,"lessonChanged"],lanPair:[3,"lanPair"],text:[4,"text"],isDemo:[5,"isDemo"],settings:[6,"settings"]},{skipStep:"skipStep",stepCompleted:"stepCompleted",updatedSettings:"updatedSettings"})],function(n,l){var e=l.component;n(l,1,0,e.lesson,e.exercisesInterrupted,e.lessonChanged,e.course.languagePair,e.text,e.isDemo,e.settings)},null)}function Qi(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-learn-practise",[],null,[[null,"lessonCompleted"],[null,"stepCompleted"],[null,"stepBack"],[null,"updatedSettings"]],function(n,l,e){var t=!0,u=n.component;return"lessonCompleted"===l&&(t=!1!==u.onLessonCompleted(e)&&t),"stepCompleted"===l&&(t=!1!==u.onStepCompleted("practise",e)&&t),"stepBack"===l&&(t=!1!==u.onStepBack()&&t),"updatedSettings"===l&&(t=!1!==u.onSettingsUpdated(e)&&t),t},Fe,ie)),t["\u0275did"](1,245760,null,0,ue,[k,I.a,h.a,g.a,c.a,te],{exercisesInterrupted:[0,"exercisesInterrupted"],stepcountUpdated:[1,"stepcountUpdated"],lesson:[2,"lesson"],settings:[3,"settings"],course:[4,"course"],text:[5,"text"],lanPair:[6,"lanPair"],lessonChanged:[7,"lessonChanged"],hasStudyTab:[8,"hasStudyTab"],isDemo:[9,"isDemo"]},{stepCompleted:"stepCompleted",updatedSettings:"updatedSettings",lessonCompleted:"lessonCompleted",stepBack:"stepBack"})],function(n,l){var e=l.component;n(l,1,0,e.exercisesInterrupted,e.stepcountUpdated,e.lesson,e.settings,e.course,e.text,e.course.languagePair,e.lessonChanged,e.hasStep("study"),e.isDemo)},null)}function Hi(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-learn-review",[],null,[[null,"stepCompleted"],[null,"updatedSettings"]],function(n,l,e){var t=!0,u=n.component;return"stepCompleted"===l&&(t=!1!==u.onStepCompleted("review",e)&&t),"updatedSettings"===l&&(t=!1!==u.onSettingsUpdated(e)&&t),t},xt,Ke)),t["\u0275did"](1,245760,null,0,$e,[k,I.a,h.a,g.a],{exercisesInterrupted:[0,"exercisesInterrupted"],stepcountUpdated:[1,"stepcountUpdated"],settings:[2,"settings"],course:[3,"course"],text:[4,"text"],lanPair:[5,"lanPair"],continueCourseLevel:[6,"continueCourseLevel"]},{stepCompleted:"stepCompleted",updatedSettings:"updatedSettings"})],function(n,l){var e=l.component;n(l,1,0,e.exercisesInterrupted,e.stepcountUpdated,e.settings,e.course,e.text,e.course.languagePair,e.continueCourseLevel)},null)}function Ji(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-learn-difficult",[],null,[[null,"stepCompleted"],[null,"updatedSettings"]],function(n,l,e){var t=!0,u=n.component;return"stepCompleted"===l&&(t=!1!==u.onStepCompleted("difficult",e)&&t),"updatedSettings"===l&&(t=!1!==u.onSettingsUpdated(e)&&t),t},Ht,wt)),t["\u0275did"](1,245760,null,0,Ct,[k,I.a,h.a,g.a],{exercisesInterrupted:[0,"exercisesInterrupted"],stepcountUpdated:[1,"stepcountUpdated"],settings:[2,"settings"],course:[3,"course"],text:[4,"text"],lanPair:[5,"lanPair"],continueCourseLevel:[6,"continueCourseLevel"]},{stepCompleted:"stepCompleted",updatedSettings:"updatedSettings"})],function(n,l){var e=l.component;n(l,1,0,e.exercisesInterrupted,e.stepcountUpdated,e.settings,e.course,e.text,e.course.languagePair,e.continueCourseLevel)},null)}function Xi(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-learn-exam",[],null,null,null,Du,Xt)),t["\u0275did"](1,245760,null,0,Jt,[k,I.a,h.a,g.a],{exercisesInterrupted:[0,"exercisesInterrupted"],stepcountUpdated:[1,"stepcountUpdated"],settings:[2,"settings"],course:[3,"course"],text:[4,"text"],lanPair:[5,"lanPair"],continueCourseLevel:[6,"continueCourseLevel"]},null)],function(n,l){var e=l.component;n(l,1,0,e.exercisesInterrupted,e.stepcountUpdated,e.settings,e.course,e.text,e.course.languagePair,e.continueCourseLevel)},null)}function Zi(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,6,"div",[],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Hi)),t["\u0275did"](2,278528,null,0,m.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,m.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Ji)),t["\u0275did"](4,278528,null,0,m.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,m.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Xi)),t["\u0275did"](6,278528,null,0,m.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,m.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null)],function(n,l){n(l,2,0,"review"),n(l,4,0,"difficult"),n(l,6,0,"exam")},null)}function Yi(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-learn-overview",[],null,[[null,"rehearseLesson"],[null,"currentLesson"],[null,"courseCompleted"],[null,"goToIntro"]],function(n,l,e){var t=!0,u=n.component;return"rehearseLesson"===l&&(t=!1!==u.onRehearseLesson(e)&&t),"currentLesson"===l&&(t=!1!==u.onLessonSelected(e)&&t),"courseCompleted"===l&&(t=!1!==u.onCourseCompleted(e)&&t),"goToIntro"===l&&(t=!1!==u.onGoToIntro(e)&&t),t},Ti,li)),t["\u0275did"](1,245760,null,0,ni,[k,g.a],{course:[0,"course"],text:[1,"text"],isDemo:[2,"isDemo"],currentLessonId:[3,"currentLessonId"]},{currentLesson:"currentLesson",rehearseLesson:"rehearseLesson",courseCompleted:"courseCompleted",goToIntro:"goToIntro"})],function(n,l){var e=l.component;n(l,1,0,e.course,e.text,e.isDemo,e.lesson._id)},null)}function no(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,3,"div",[["class","register"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"a",[["href","/auth/signup"]],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,["",""])),(n()(),t["\u0275ted"](3,null,[" ",". "]))],null,function(n,l){var e=l.component;n(l,2,0,e.text.SignupAction),n(l,3,0,e.text.ToUseReview)})}function lo(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,3,"div",[["class","register"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"a",[["href","/auth/signup"]],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,["",""])),(n()(),t["\u0275ted"](3,null,[" ",". "]))],null,function(n,l){var e=l.component;n(l,2,0,e.text.SignupAction),n(l,3,0,e.text.ToUseDifficult)})}function eo(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,3,"div",[["class","register"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"a",[["href","/auth/signup"]],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,["",""])),(n()(),t["\u0275ted"](3,null,[" ",". "]))],null,function(n,l){var e=l.component;n(l,2,0,e.text.SignupAction),n(l,3,0,e.text.ToUseExam)})}function to(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,6,"div",[],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,no)),t["\u0275did"](2,278528,null,0,m.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,m.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,lo)),t["\u0275did"](4,278528,null,0,m.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,m.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,eo)),t["\u0275did"](6,278528,null,0,m.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,m.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null)],function(n,l){n(l,2,0,"review"),n(l,4,0,"difficult"),n(l,6,0,"exam")},null)}function uo(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,17,"div",[],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,16,"div",[["class","learn"]],[[2,"rehearse",null]],null,null,null,null)),t["\u0275did"](2,278528,null,0,m.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275did"](3,16384,null,0,m.NgSwitch,[],{ngSwitch:[0,"ngSwitch"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Ui)),t["\u0275did"](5,278528,null,0,m.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,m.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,zi)),t["\u0275did"](7,278528,null,0,m.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,m.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Gi)),t["\u0275did"](9,278528,null,0,m.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,m.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Qi)),t["\u0275did"](11,278528,null,0,m.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,m.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Zi)),t["\u0275did"](13,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Yi)),t["\u0275did"](15,278528,null,0,m.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,m.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,to)),t["\u0275did"](17,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,2,0,"learn",null==e.steps[e.currentStep]?null:e.steps[e.currentStep].name),n(l,3,0,null==e.steps[e.currentStep]?null:e.steps[e.currentStep].name),n(l,5,0,"intro"),n(l,7,0,"dialogue"),n(l,9,0,"study"),n(l,11,0,"practise"),n(l,13,0,!e.isDemo),n(l,15,0,"overview"),n(l,17,0,e.isDemo)},function(n,l){var e=l.component;n(l,1,0,e.exercisesStarted&&!(null==e.lesson||!e.lesson.rehearseStep))})}function io(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"km-loader",[],null,null,null,C.b,C.a)),t["\u0275did"](1,114688,null,0,w.a,[],{msg:[0,"msg"]},null)],function(n,l){n(l,1,0,l.component.text.LoadingCourse)},null)}function oo(n){return t["\u0275vid"](0,[t["\u0275qud"](402653184,1,{promotionComponent:0}),(n()(),t["\u0275and"](16777216,null,null,1,null,_i)),t["\u0275did"](2,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Bi)),t["\u0275did"](4,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,uo)),t["\u0275did"](6,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](7,0,null,null,1,"km-info-msg",[],null,null,null,v.b,v.a)),t["\u0275did"](8,49152,null,0,x.a,[],{msg:[0,"msg"]},null),(n()(),t["\u0275eld"](9,0,null,null,5,"km-modal-confirm",[],null,[[null,"confirmed"]],function(n,l,e){var t=!0;return"confirmed"===l&&(t=!1!==n.component.onExitConfirmed(e)&&t),t},Fn.b,Fn.a)),t["\u0275did"](10,49152,[["confirmexit",4]],0,$n.a,[],{level:[0,"level"],text:[1,"text"]},{confirmed:"confirmed"}),(n()(),t["\u0275eld"](11,0,null,0,1,"div",[["title",""]],null,null,null,null,null)),(n()(),t["\u0275ted"](12,null,["",""])),(n()(),t["\u0275eld"](13,0,null,1,1,"div",[["message",""]],null,null,null,null,null)),(n()(),t["\u0275ted"](14,null,["",""])),(n()(),t["\u0275eld"](15,0,null,null,1,"km-modal-promotion",[],null,null,null,Oi,Ni)),t["\u0275did"](16,114688,[[1,4],["promotion",4]],0,Pi,[],{rankNr:[0,"rankNr"],rankName:[1,"rankName"],gender:[2,"gender"],text:[3,"text"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,io)),t["\u0275did"](18,16384,null,0,m.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,2,0,e.exercisesStarted),n(l,4,0,!e.exercisesStarted&&!e.isError&&!e.isLoading),n(l,6,0,e.isLessonReady&&!e.isLoading),n(l,8,0,e.infoMsg),n(l,10,0,"warning",e.text),n(l,16,0,e.rankNr,e.text[e.rankKey],e.getGender(),e.text),n(l,18,0,e.isLoading&&!e.isError)},function(n,l){var e=l.component;n(l,12,0,e.text.Warning),n(l,14,0,e.text.ConfirmExit)})}var so=t["\u0275ccf"]("ng-component",Ei,function(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,oo,Mi)),t["\u0275did"](1,245760,null,0,Ei,[a.a,a.l,m.Location,k,h.a,p.a,f.a,c.a,g.a],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),ro=e("t/Na"),ao=e("RDNO"),co=e("9Z1F"),po=e("XlPw"),fo=function(){function n(n){this.errorService=n}return n.prototype.intercept=function(n,l){var e=this;return l.handle(n).pipe(Object(co.a)(function(n){return e.errorService.handleError(n),Object(po.a)(n)}))},n}(),ho=e("ZYjt"),go=function(){function n(){}return n.prototype.startTimer=function(){this.startTime=new Date},n.prototype.endTimer=function(){this.endTime=new Date},n.prototype.getTimeElapsedSeconds=function(){return(this.endTime.getTime()-this.startTime.getTime())/1e3},n.prototype.getTimeElapsedTime=function(){var n=this.getTimeElapsedSeconds(),l=Math.floor(n/3600),e=Math.floor((n-3600*l)/60),t=Math.floor(n-3600*l-60*e);return this.pad(l)+":"+this.pad(e)+":"+this.pad(t)},n.prototype.pad=function(n){return("0"+n).slice(-2)},n}(),mo=e("7mek"),vo=e("d2mR"),xo=e("l6Jb"),Co=e("UTcu");e.d(l,"LearnModuleNgFactory",function(){return wo});var wo=t["\u0275cmf"](u,[],function(n){return t["\u0275mod"]([t["\u0275mpd"](512,t.ComponentFactoryResolver,t["\u0275CodegenComponentFactoryResolver"],[[8,[i.a,W,so]],[3,t.ComponentFactoryResolver],t.NgModuleRef]),t["\u0275mpd"](4608,m.NgLocalization,m.NgLocaleLocalization,[t.LOCALE_ID,[2,m["\u0275angular_packages_common_common_a"]]]),t["\u0275mpd"](4608,ro.j,ro.p,[m.DOCUMENT,t.PLATFORM_ID,ro.n]),t["\u0275mpd"](4608,ro.q,ro.q,[ro.j,ro.o]),t["\u0275mpd"](5120,ro.a,function(n,l,e){return[n,new ao.a(l),new fo(e)]},[ro.q,f.a,g.a]),t["\u0275mpd"](4608,ro.m,ro.m,[]),t["\u0275mpd"](6144,ro.k,null,[ro.m]),t["\u0275mpd"](4608,ro.i,ro.i,[ro.k]),t["\u0275mpd"](6144,ro.b,null,[ro.i]),t["\u0275mpd"](4608,ro.f,ro.l,[ro.b,t.Injector]),t["\u0275mpd"](4608,ro.c,ro.c,[ro.f]),t["\u0275mpd"](4608,Fl.A,Fl.A,[]),t["\u0275mpd"](4608,p.a,p.a,[ro.c,ho.h]),t["\u0275mpd"](4608,I.a,I.a,[]),t["\u0275mpd"](4608,k,k,[ro.c,f.a,I.a]),t["\u0275mpd"](4608,go,go,[]),t["\u0275mpd"](4608,te,te,[]),t["\u0275mpd"](1073742336,m.CommonModule,m.CommonModule,[]),t["\u0275mpd"](1073742336,ro.e,ro.e,[]),t["\u0275mpd"](1073742336,ro.d,ro.d,[]),t["\u0275mpd"](1073742336,Fl.y,Fl.y,[]),t["\u0275mpd"](1073742336,Fl.k,Fl.k,[]),t["\u0275mpd"](1073742336,mo.TooltipModule,mo.TooltipModule,[]),t["\u0275mpd"](1073742336,vo.a,vo.a,[]),t["\u0275mpd"](1073742336,xo.a,xo.a,[]),t["\u0275mpd"](1073742336,a.o,a.o,[[2,a.t],[2,a.l]]),t["\u0275mpd"](1073742336,u,u,[]),t["\u0275mpd"](256,ro.n,"XSRF-TOKEN",[]),t["\u0275mpd"](256,ro.o,"X-XSRF-TOKEN",[]),t["\u0275mpd"](1024,a.j,function(){return[[{path:"",component:N,canActivate:[Co.a]},{path:"course/:id",component:Ei,canActivate:[Co.a]},{path:"course/:id/:step",component:Ei,canActivate:[Co.a]}]]},[])])})}}]);